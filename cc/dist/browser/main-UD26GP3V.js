import{a as gv,b as bv,c as bh,d as _v,e as ms,f as _h,g as Lc,h as vv,i as yv,j as vh,k as St,l as $i,m as mn,n as jc,o as ps,p as yh,q as wv,r as Ev,s as gs,t as Bc,u as ce,v as me,w as wh}from"./chunk-GLG2SXL6.js";import{$ as O_,$a as z_,$b as ov,A as Ht,Aa as ie,Ab as K_,B as eh,Ba as On,Bb as Q_,C as Pr,Ca as ds,Cb as Y_,D as Ni,Da as xc,Db as Rc,E as nh,Ea as hs,Eb as jr,F as ih,Fa as M,Fb as kc,G as $e,Ga as k,Gb as Pc,H as P_,Ha as Fr,Hb as X_,I as Mr,Ia as fs,Ib as Mc,J as as,Ja as j_,Jb as Oc,K as ln,Ka as Cc,Kb as hh,L as rh,La as Tc,Lb as Nc,M as M_,Ma as dn,Mb as fh,N as Or,Na as Ac,Nb as Fc,O as Fi,Oa as z,Ob as Bi,P as Ec,Pa as B_,Pb as Z_,Q as Ic,Qa as Vr,Qb as Vc,R as un,Ra as re,Rb as J_,S as Ut,Sa as ji,Sb as mh,T as oh,Ta as U_,Tb as Vn,U as qe,Ua as ch,Ub as tv,V as Ot,Va as lh,Vb as ev,W as vt,Wa as Ct,Wb as nv,X as ii,Xa as ri,Xb as Ye,Y as Vi,Ya as it,Yb as iv,Z as N,Za as uh,Zb as Ui,_ as W,_a as Me,_b as rv,a as Mi,aa as F,ab as dh,ac as J,b as Qd,ba as sh,bb as y,bc as sv,c as fe,ca as g,cb as _,cc as ph,d as Yd,da as S,db as K,dc as av,e as Xd,ea as ee,eb as $_,ec as cv,f as ht,fa as N_,fb as q_,fc as zi,g as we,ga as cs,gb as Nt,gc as gh,h as vc,ha as xt,hb as G_,hc as lv,i as S_,ia as ot,ib as Z,ic as Br,j as ei,ja as H,jb as W_,jc as Oe,k as ni,ka as ft,kb as et,kc as uv,l as Oi,la as Nr,lb as Sc,lc as dv,m as wt,ma as F_,mb as Lr,mc as hv,n as L,na as ls,nb as Nn,nc as fv,o as ss,oa as Pn,ob as hn,oc as Ln,p as Zd,pa as Li,pb as fn,pc as mv,q as D_,qa as st,qb as Dc,qc as pv,r as U,ra as at,rb as T,s as kr,sa as Mn,sb as Ce,t as xe,ta as Kt,tb as Ge,tc as Iv,u as Jd,ua as ah,ub as H_,uc as Eh,v as yc,va as At,vb as We,w as th,wa as ne,wb as He,wc as Uc,x as R_,xa as V_,xb as Ke,xc as Ih,y as k_,ya as us,yb as Qe,yc as xh,z as wc,za as L_,zb as Fn}from"./chunk-ALCYENNB.js";import{a as C,b as bt,c as A_,e as Kd,f as p}from"./chunk-CQCHLVVT.js";var $c=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,n);let r=(t.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(t,n){let i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var kv=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(kv||{}),Ch=class{constructor(t,n=Pv.Ok,i="OK"){this.headers=t.headers||new $c,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var qc=class e extends Ch{constructor(t={}){super(t),this.type=kv.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var Pv=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(Pv||{});var dT=new F("");var xv="b",Cv="h",Tv="s",Av="st",Sv="u",Dv="rt",zc=new F(""),hT=["GET","HEAD"];function fT(e,t){let d=S(zc),{isCacheActive:n}=d,i=A_(d,["isCacheActive"]),{transferCache:r,method:o}=e;if(!n||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!hT.includes(o)||r===!1||i.filter?.(e)===!1)return t(e);let s=S(xc),a=pT(e),c=s.get(a,null),l=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(l=r.includeHeaders),c){let{[xv]:h,[Dv]:f,[Cv]:E,[Tv]:v,[Av]:x,[Sv]:V}=c,$=h;switch(f){case"arraybuffer":$=new TextEncoder().encode(h).buffer;break;case"blob":$=new Blob([h]);break}let O=new $c(E);return L(new qc({body:$,headers:O,status:v,statusText:x,url:V}))}let u=Ln(S(ie));return t(e).pipe(Ot(h=>{h instanceof qc&&u&&s.set(a,{[xv]:h.body,[Cv]:mT(h.headers,l),[Tv]:h.status,[Av]:h.statusText,[Sv]:h.url||"",[Dv]:e.responseType})}))}function mT(e,t){if(!t)return{};let n={};for(let i of t){let r=e.getAll(i);r!==null&&(n[i]=r)}return n}function Rv(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function pT(e){let{params:t,method:n,responseType:i,url:r}=e,o=Rv(t),s=e.serializeBody();s instanceof URLSearchParams?s=Rv(s):typeof s!="string"&&(s="");let a=[n,i,r,s,o].join("|"),c=gT(a);return c}function gT(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function Mv(e){return[{provide:zc,useFactory:()=>(Ac("NgHttpTransferCache"),C({isCacheActive:!0},e))},{provide:dT,useValue:fT,multi:!0,deps:[xc,zc]},{provide:Fc,multi:!0,useFactory:()=>{let t=S(Bi),n=S(zc);return()=>{Z_(t).then(()=>{n.isCacheActive=!1})}}}]}var Sh=class extends ov{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Dh=class e extends Sh{static makeCurrent(){rv(new e)}onAndCancel(t,n,i){return t.addEventListener(n,i),()=>{t.removeEventListener(n,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=_T();return n==null?null:vT(n)}resetBaseElement(){bs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return gh(document.cookie,t)}},bs=null;function _T(){return bs=bs||document.querySelector("base"),bs?bs.getAttribute("href"):null}function vT(e){return new URL(e,document.baseURI).pathname}var Rh=class{addToWindow(t){ii.getAngularTestability=(i,r=!0)=>{let o=t.findTestabilityInTree(i,r);if(o==null)throw new vt(5103,!1);return o},ii.getAllAngularTestabilities=()=>t.getAllTestabilities(),ii.getAllAngularRootElements=()=>t.getAllRootElements();let n=i=>{let r=ii.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&i()};r.forEach(a=>{a.whenStable(s)})};ii.frameworkStabilizers||(ii.frameworkStabilizers=[]),ii.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,i){if(n==null)return null;let r=t.getTestability(n);return r??(i?Ui().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},yT=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:t.\u0275fac});let e=t;return e})(),kh=new F(""),Fv=(()=>{let t=class t{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new vt(5101,!1);return this._eventNameToPlugin.set(i,r),r}};t.\u0275fac=function(r){return new(r||t)(g(kh),g(z))},t.\u0275prov=N({token:t,factory:t.\u0275fac});let e=t;return e})(),Gc=class{constructor(t){this._doc=t}},Th="ng-app-id",Vv=(()=>{let t=class t{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ln(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Th}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(Th),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Th,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(g(J),g(us),g(ds,8),g(ie))},t.\u0275prov=N({token:t,factory:t.\u0275fac});let e=t;return e})(),Ah={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Oh=/%COMP%/g,Lv="%COMP%",wT=`_nghost-${Lv}`,ET=`_ngcontent-${Lv}`,IT=!0,xT=new F("",{providedIn:"root",factory:()=>IT});function CT(e){return ET.replace(Oh,e)}function TT(e){return wT.replace(Oh,e)}function jv(e,t){return t.map(n=>n.replace(Oh,e))}var Wc=(()=>{let t=class t{constructor(i,r,o,s,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Ln(c),this.defaultRenderer=new _s(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===cs.ShadowDom&&(r=bt(C({},r),{encapsulation:cs.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof Hc?o.applyToHost(i):o instanceof vs&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case cs.Emulated:s=new Hc(l,u,r,this.appId,d,a,c,h);break;case cs.ShadowDom:return new Ph(l,u,i,r,a,c,this.nonce,h);default:s=new vs(l,u,r,d,a,c,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(g(Fv),g(Vv),g(us),g(xT),g(J),g(ie),g(z),g(ds))},t.\u0275prov=N({token:t,factory:t.\u0275fac});let e=t;return e})(),_s=class{constructor(t,n,i,r){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Ah[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Ov(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(Ov(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new vt(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;let o=Ah[r];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let r=Ah[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(hs.DashCase|hs.Important)?t.style.setProperty(n,i,r&hs.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&hs.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i){if(typeof t=="string"&&(t=Ui().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(i))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function Ov(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Ph=class extends _s{constructor(t,n,i,r,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=jv(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},vs=class extends _s{constructor(t,n,i,r,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?jv(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Hc=class extends vs{constructor(t,n,i,r,o,s,a,c){let l=r+"-"+i.id;super(t,n,i,o,s,a,c,l),this.contentAttr=CT(l),this.hostAttr=TT(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}},AT=(()=>{let t=class t extends Gc{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};t.\u0275fac=function(r){return new(r||t)(g(J))},t.\u0275prov=N({token:t,factory:t.\u0275fac});let e=t;return e})(),Nv=["alt","control","meta","shift"],ST={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DT={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},RT=(()=>{let t=class t extends Gc{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,r,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ui().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=t._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),Nv.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let o=ST[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Nv.forEach(a=>{if(a!==o){let c=DT[a];c(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{t.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(r){return new(r||t)(g(J))},t.\u0275prov=N({token:t,factory:t.\u0275fac});let e=t;return e})();function kT(){Dh.makeCurrent()}function PT(){return new ah}function MT(){return V_(document),document}var OT=[{provide:ie,useValue:hv},{provide:L_,useValue:kT,multi:!0},{provide:J,useFactory:MT,deps:[]}],Bv=J_(tv,"browser",OT),NT=new F(""),FT=[{provide:Mc,useClass:Rh,deps:[]},{provide:X_,useClass:Oc,deps:[z,hh,Mc]},{provide:Oc,useClass:Oc,deps:[z,hh,Mc]}],VT=[{provide:F_,useValue:"root"},{provide:ah,useFactory:PT,deps:[]},{provide:kh,useClass:AT,multi:!0,deps:[J,z,ie]},{provide:kh,useClass:RT,multi:!0,deps:[J]},Wc,Vv,Fv,{provide:Tc,useExisting:Wc},{provide:pv,useClass:yT,deps:[]},[]],Uv=(()=>{let t=class t{constructor(i){}static withServerTransition(i){return{ngModule:t,providers:[{provide:us,useValue:i.appId}]}}};t.\u0275fac=function(r){return new(r||t)(g(NT,12))},t.\u0275mod=H({type:t}),t.\u0275inj=W({providers:[...VT,...FT],imports:[dv,ev]});let e=t;return e})();var zv=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(r){return new(r||t)(g(J))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Mh=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e}(Mh||{});function $v(...e){let t=[],n=new Set,i=n.has(Mh.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of e)n.add(o),r.length&&t.push(r);return Nr([[],nv(),n.has(Mh.NoHttpTransferCache)||i?[]:Mv({}),t])}var Jv=(()=>{let t=class t{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};t.\u0275fac=function(r){return new(r||t)(k(dn),k(At))},t.\u0275dir=ft({type:t});let e=t;return e})(),tl=(()=>{let t=class t extends Jv{};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=Mn(t)))(o||t)}})(),t.\u0275dir=ft({type:t,features:[re]});let e=t;return e})(),xs=new F(""),LT={provide:xs,useExisting:Vi(()=>Fh),multi:!0},Fh=(()=>{let t=class t extends tl{writeValue(i){this.setProperty("checked",i)}};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=Mn(t)))(o||t)}})(),t.\u0275dir=ft({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&Z("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},features:[Qe([LT]),re]});let e=t;return e})(),jT={provide:xs,useExisting:Vi(()=>pn),multi:!0};function BT(){let e=Ui()?Ui().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var UT=new F(""),pn=(()=>{let t=class t extends Jv{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!BT())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};t.\u0275fac=function(r){return new(r||t)(k(dn),k(At),k(UT,8))},t.\u0275dir=ft({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&Z("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Qe([jT]),re]});let e=t;return e})();var ty=new F(""),ey=new F("");function ny(e){return e!=null}function iy(e){return Nc(e)?wt(e):e}function ry(e){let t={};return e.forEach(n=>{t=n!=null?C(C({},t),n):t}),Object.keys(t).length===0?null:t}function oy(e,t){return t.map(n=>n(e))}function zT(e){return!e.validate}function sy(e){return e.map(t=>zT(t)?t:n=>t.validate(n))}function $T(e){if(!e)return null;let t=e.filter(ny);return t.length==0?null:function(n){return ry(oy(n,t))}}function Vh(e){return e!=null?$T(sy(e)):null}function qT(e){if(!e)return null;let t=e.filter(ny);return t.length==0?null:function(n){let i=oy(n,t).map(iy);return R_(i).pipe(U(ry))}}function Lh(e){return e!=null?qT(sy(e)):null}function Gv(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function GT(e){return e._rawValidators}function WT(e){return e._rawAsyncValidators}function Nh(e){return e?Array.isArray(e)?e:[e]:[]}function Qc(e,t){return Array.isArray(e)?e.includes(t):e===t}function Wv(e,t){let n=Nh(t);return Nh(e).forEach(r=>{Qc(n,r)||n.push(r)}),n}function Hv(e,t){return Nh(t).filter(n=>!Qc(e,n))}var Yc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Vh(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Lh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},zr=class extends Yc{get formDirective(){return null}get path(){return null}},Is=class extends Yc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Xc=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},HT={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ZN=bt(C({},HT),{"[class.ng-submitted]":"isSubmitted"}),oi=(()=>{let t=class t extends Xc{constructor(i){super(i)}};t.\u0275fac=function(r){return new(r||t)(k(Is,2))},t.\u0275dir=ft({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Me("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[re]});let e=t;return e})(),el=(()=>{let t=class t extends Xc{constructor(i){super(i)}};t.\u0275fac=function(r){return new(r||t)(k(zr,10))},t.\u0275dir=ft({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&Me("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[re]});let e=t;return e})();var ys="VALID",Kc="INVALID",Ur="PENDING",ws="DISABLED";function ay(e){return(nl(e)?e.validators:e)||null}function KT(e){return Array.isArray(e)?Vh(e):e||null}function cy(e,t){return(nl(t)?t.asyncValidators:e)||null}function QT(e){return Array.isArray(e)?Lh(e):e||null}function nl(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function YT(e,t,n){let i=e.controls;if(!(t?Object.keys(i):i).length)throw new vt(1e3,"");if(!i[n])throw new vt(1001,"")}function XT(e,t,n){e._forEachChild((i,r)=>{if(n[r]===void 0)throw new vt(1002,"")})}var Zc=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ys}get invalid(){return this.status===Kc}get pending(){return this.status==Ur}get disabled(){return this.status===ws}get enabled(){return this.status!==ws}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Wv(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Wv(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Hv(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Hv(t,this._rawAsyncValidators))}hasValidator(t){return Qc(this._rawValidators,t)}hasAsyncValidator(t){return Qc(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ur,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ws,this.errors=null,this._forEachChild(i=>{i.disable(bt(C({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(bt(C({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=ys,this._forEachChild(i=>{i.enable(bt(C({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(bt(C({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ys||this.status===Ur)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ws:ys}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ur,this._hasOwnPendingAsyncValidator=!0;let n=iy(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ne,this.statusChanges=new ne}_calculateStatus(){return this._allControlsDisabled()?ws:this.errors?Kc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ur)?Ur:this._anyControlsHaveStatus(Kc)?Kc:ys}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){nl(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=KT(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=QT(this._rawAsyncValidators)}},Jc=class extends Zc{constructor(t,n,i){super(ay(n),cy(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){XT(this,!0,t),Object.keys(t).forEach(i=>{YT(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var jh=new F("CallSetDisabledState",{providedIn:"root",factory:()=>Bh}),Bh="always";function ZT(e,t){return[...t.path,e]}function ly(e,t,n=Bh){uy(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),tA(e,t),nA(e,t),eA(e,t),JT(e,t)}function Kv(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function JT(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function uy(e,t){let n=GT(e);t.validator!==null?e.setValidators(Gv(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=WT(e);t.asyncValidator!==null?e.setAsyncValidators(Gv(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let r=()=>e.updateValueAndValidity();Kv(t._rawValidators,r),Kv(t._rawAsyncValidators,r)}function tA(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&dy(e,t)})}function eA(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&dy(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function dy(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function nA(e,t){let n=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function iA(e,t){e==null,uy(e,t)}function rA(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function oA(e){return Object.getPrototypeOf(e.constructor)===tl}function sA(e,t){e._syncPendingControls(),t.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function aA(e,t){if(!t)return null;Array.isArray(t);let n,i,r;return t.forEach(o=>{o.constructor===pn?n=o:oA(o)?i=o:r=o}),r||i||n||null}var cA={provide:zr,useExisting:Vi(()=>Cs)},Es=Promise.resolve(),Cs=(()=>{let t=class t extends zr{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ne,this.form=new Jc({},Vh(i),Lh(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Es.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),ly(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Es.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Es.then(()=>{let r=this._findContainer(i.path),o=new Jc({});iA(o,i),r.registerControl(i.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Es.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){Es.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,sA(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};t.\u0275fac=function(r){return new(r||t)(k(ty,10),k(ey,10),k(jh,8))},t.\u0275dir=ft({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&Z("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[xt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qe([cA]),re]});let e=t;return e})();function Qv(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Yv(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var lA=class extends Zc{constructor(t=null,n,i){super(ay(n),cy(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nl(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Yv(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Qv(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Qv(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Yv(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var uA={provide:Is,useExisting:Vi(()=>jn)},Xv=Promise.resolve(),jn=(()=>{let t=class t extends Is{constructor(i,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new lA,this._registered=!1,this.name="",this.update=new ne,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=aA(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),rA(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ly(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){Xv.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&Ye(r);Xv.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?ZT(i,this._parent):[i]}};t.\u0275fac=function(r){return new(r||t)(k(zr,9),k(ty,10),k(ey,10),k(xs,10),k(Vn,8),k(jh,8))},t.\u0275dir=ft({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[xt.None,"disabled","isDisabled"],model:[xt.None,"ngModel","model"],options:[xt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qe([uA]),re,Li]});let e=t;return e})(),il=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ft({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})();var dA={provide:xs,useExisting:Vi(()=>$r),multi:!0};function hy(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function hA(e){return e.split(":")[0]}var $r=(()=>{let t=class t extends tl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),o=hy(r,i);this.setProperty("value",o)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=hA(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=Mn(t)))(o||t)}})(),t.\u0275dir=ft({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&Z("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Qe([dA]),re]});let e=t;return e})(),rl=(()=>{let t=class t{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(hy(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(r){return new(r||t)(k(At),k(dn),k($r,9))},t.\u0275dir=ft({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})(),fA={provide:xs,useExisting:Vi(()=>fy),multi:!0};function Zv(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function mA(e){return e.split(":")[0]}var fy=(()=>{let t=class t extends tl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let o=i.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let l=a[c],u=this._getOptionValue(l.value);o.push(u)}}else{let a=r.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let u=this._getOptionValue(l.value);o.push(u)}}}this.value=o,i(o)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=mA(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=Mn(t)))(o||t)}})(),t.\u0275dir=ft({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&Z("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Qe([fA]),re]});let e=t;return e})(),ol=(()=>{let t=class t{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(Zv(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(Zv(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(r){return new(r||t)(k(At),k(dn),k(fy,9))},t.\u0275dir=ft({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let e=t;return e})();var pA=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=W({});let e=t;return e})();var my=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:jh,useValue:i.callSetDisabledState??Bh}]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=W({imports:[pA]});let e=t;return e})();var gA="firebase",bA="10.11.0";ce(gA,bA,"app");var Ee=new jr("ANGULARFIRE2_VERSION");function cl(e,t,n){if(t){if(t.length===1)return t[0];let o=t.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var Ts=(e,t)=>{let n=t?[t]:Bc(),i=[];return n.forEach(r=>{r.container.getProvider(e).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},Xe=class{constructor(){return Ts(_A)}},_A="app-check";function qr(){}var al=class{zone;delegate;constructor(t,n=S_){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},Uh=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qr,{},qr,qr)),n.pipe(Ot({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},gn=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new al(Zone.current)),this.insideAngular=n.run(()=>new al(Zone.current,vc)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||e)(g(z))};static \u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ll(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function vA(e){return ll().ngZone.runOutsideAngular(()=>e())}function qi(e){return ll().ngZone.run(()=>e())}function pe(e){return yA(ll())(e)}function yA(e){return function(n){return n=n.lift(new Uh(e.ngZone)),n.pipe(Oi(e.outsideAngular),ni(e.insideAngular))}}var wA=(e,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),qi(()=>e.apply(void 0,i))},ge=(e,t)=>function(){let n,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(t&&(n||=qi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qr,{},qr,qr))),i[o]=wA(i[o],n));let r=vA(()=>e.apply(this,i));if(!t)if(r instanceof fe){let o=ll();return r.pipe(Oi(o.outsideAngular),ni(o.insideAngular))}else return qi(()=>r);return r instanceof fe?r.pipe(pe):r instanceof Promise?qi(()=>new Promise((o,s)=>r.then(a=>qi(()=>o(a)),a=>qi(()=>s(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:qi(()=>r)};var Bn=class{constructor(t){return t}},Gi=class{constructor(){return Bc()}};function EA(e){return e&&e.length===1?e[0]:new Bn(gs())}var zh=new F("angularfire2._apps"),IA={provide:Bn,useFactory:EA,deps:[[new ee,zh]]},xA={provide:Gi,deps:[[new ee,zh]]};function CA(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Bn(i)}}var TA=(()=>{class e{constructor(n){ce("angularfire",Ee.full,"core"),ce("angularfire",Ee.full,"app"),ce("angular",kc.full,n.toString())}static \u0275fac=function(i){return new(i||e)(g(ie))};static \u0275mod=H({type:e});static \u0275inj=W({providers:[IA,xA]})}return e})();function gy(e,...t){return{ngModule:TA,providers:[{provide:zh,useFactory:CA(e),multi:!0,deps:[z,Kt,gn,...t]}]}}var by=ge(Ev,!0);var AA=new Map,SA={activated:!1,tokenObservers:[]},DA={initialized:!1,enabled:!1};function Ze(e){return AA.get(e)||Object.assign({},SA)}function Ey(){return DA}var RA="https://content-firebaseappcheck.googleapis.com/v1";var kA="exchangeDebugToken",_y={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},AF=24*60*60*1e3;var qh=class{constructor(t,n,i,r,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return p(this,null,function*(){this.stop();try{this.pending=new bh,this.pending.promise.catch(n=>{}),yield PA(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new bh,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function PA(e){return new Promise(t=>{setTimeout(t,e)})}var MA={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},si=new yv("appCheck","AppCheck",MA);function Iy(e){if(!Ze(e).activated)throw si.create("use-before-activation",{appName:e.name})}function xy(i,r){return p(this,arguments,function*({url:e,body:t},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(t),headers:o},c;try{c=yield fetch(e,a)}catch(f){throw si.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw si.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(f){throw si.create("fetch-parse-error",{originalErrorMessage:f?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw si.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function Cy(e,t){let{projectId:n,appId:i,apiKey:r}=e.options;return{url:`${RA}/projects/${n}/apps/${i}:${kA}?key=${r}`,body:{debug_token:t}}}var OA="firebase-app-check-database",NA=1,Gh="firebase-app-check-store";var ul=null;function FA(){return ul||(ul=new Promise((e,t)=>{try{let n=indexedDB.open(OA,NA);n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{var r;t(si.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Gh,{keyPath:"compositeKey"})}}}catch(n){t(si.create("storage-open",{originalErrorMessage:n?.message}))}}),ul)}function VA(e,t){return LA(jA(e),t)}function LA(e,t){return p(this,null,function*(){let i=(yield FA()).transaction(Gh,"readwrite"),o=i.objectStore(Gh).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=c=>{s()},i.onerror=c=>{var l;a(si.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function jA(e){return`${e.options.appId}-${e.name}`}var Wh=new jc("@firebase/app-check");function $h(e,t){return Lc()?VA(e,t).catch(n=>{Wh.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Ty(){return Ey().enabled}function Ay(){return p(this,null,function*(){let e=Ey();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var BA={error:"UNKNOWN_ERROR"};function UA(e){return gv.encodeString(JSON.stringify(e),!1)}function Hh(e,t=!1){return p(this,null,function*(){let n=e.app;Iy(n);let i=Ze(n),r=i.token,o;if(r&&!As(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(As(c)?r=c:yield $h(n,void 0))}if(!t&&r&&As(r))return{token:r.token};let s=!1;if(Ty()){i.exchangeTokenPromise||(i.exchangeTokenPromise=xy(Cy(n,yield Ay()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let c=yield i.exchangeTokenPromise;return yield $h(n,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield Ze(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Wh.warn(c.message):Wh.error(c),o=c}let a;return r?o?As(r)?a={token:r.token,internalError:o}:a=yy(o):(a={token:r.token},i.token=r,yield $h(n,r)):a=yy(o),s&&GA(n,a),a})}function zA(e){return p(this,null,function*(){let t=e.app;Iy(t);let{provider:n}=Ze(t);if(Ty()){let i=yield Ay(),{token:r}=yield xy(Cy(t,i),e.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function $A(e,t,n,i){let{app:r}=e,o=Ze(r),s={next:n,error:i,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&As(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),vy(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>vy(e))}function Sy(e,t){let n=Ze(e),i=n.tokenObservers.filter(r=>r.next!==t);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function vy(e){let{app:t}=e,n=Ze(t),i=n.tokenRefresher;i||(i=qA(e),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function qA(e){let{app:t}=e;return new qh(()=>p(this,null,function*(){let n=Ze(t),i;if(n.token?i=yield Hh(e,!0):i=yield Hh(e),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=Ze(t);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},_y.RETRIAL_MIN_WAIT,_y.RETRIAL_MAX_WAIT)}function GA(e,t){let n=Ze(e).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function As(e){return e.expireTimeMillis-Date.now()>0}function yy(e){return{token:UA(BA),error:e}}var Kh=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=Ze(this.app);for(let n of t)Sy(this.app,n.next);return Promise.resolve()}};function WA(e,t){return new Kh(e,t)}function HA(e){return{getToken:t=>Hh(e,t),getLimitedUseToken:()=>zA(e),addTokenListener:t=>$A(e,"INTERNAL",t),removeTokenListener:t=>Sy(e.app,t)}}var KA="@firebase/app-check",QA="0.8.3";var YA="app-check",wy="app-check-internal";function XA(){ps(new $i(YA,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return WA(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(wy).initialize()})),ps(new $i(wy,e=>{let t=e.getProvider("app-check").getImmediate();return HA(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ce(KA,QA)}XA();var ZA=["localhost","0.0.0.0","127.0.0.1"],jF=typeof window<"u"&&ZA.includes(window.location.hostname);var JA="firebase",tS="10.11.0";me.registerVersion(JA,tS,"app-compat");var eS=["ngOnDestroy"],ky=(e,t,n,i={})=>new Proxy(e,{get:(r,o)=>n.runOutsideAngular(()=>{if(e[o])return i?.spy?.get&&i.spy.get(o,e[o]),e[o];if(eS.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let d=u?.(...l);return i?.spy?.apply&&i.spy.apply(o,l,d),d})})})});var dl=class{constructor(t){return t}},Gr=new F("angularfire2.app.options"),Wr=new F("angularfire2.app.name");function Ss(e,t,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=me.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>me.initializeApp(e,r));try{if(JSON.stringify(e)!==JSON.stringify(s.options)){let a=!!module.hot;nS("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new dl(s)}var nS=(e,...t)=>{mh()&&typeof console<"u"&&console[e](...t)},iS={provide:dl,useFactory:Ss,deps:[Gr,z,[new ee,Wr]]},Py=(()=>{class e{static initializeApp(n,i){return{ngModule:e,providers:[{provide:Gr,useValue:n},{provide:Wr,useValue:i}]}}constructor(n){me.registerVersion("angularfire",Ee.full,"core"),me.registerVersion("angularfire",Ee.full,"app-compat"),me.registerVersion("angular",kc.full,n.toString())}static \u0275fac=function(i){return new(i||e)(g(ie))};static \u0275mod=H({type:e});static \u0275inj=W({providers:[iS]})}return e})();function hl(e,t,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(o)return rS(r,s)||(Ry("error",`${t} was already initialized on the ${n} Firebase App with different settings.${oS?" You may need to reload as Firebase is not HMR aware.":""}`),Ry("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([e,a,r]),a}}function rS(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var oS=typeof module<"u"&&!!module.hot,Ry=(e,...t)=>{mh()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var Qh=new F("angularfire2.auth.use-emulator"),Yh=new F("angularfire2.auth.settings"),Xh=new F("angularfire2.auth.tenant-id"),Zh=new F("angularfire2.auth.langugage-code"),Jh=new F("angularfire2.auth.use-device-language"),tf=new F("angularfire.auth.persistence"),ef=(e,t,n,i,r,o,s,a)=>hl(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let c=t.runOutsideAngular(()=>e.auth());if(n&&c.useEmulator(...n),i&&(c.tenantId=i),c.languageCode=r,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[n,i,r,o,s,a]),Un=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,c,l,u,d,h,f){let E=new ht,v=L(void 0).pipe(ni(s.outsideAngular),Ut(()=>o.runOutsideAngular(()=>import("./chunk-P6YOBRBG.js"))),U(()=>Ss(n,o,i)),U(x=>ef(x,o,a,l,u,d,c,h)),Ec({bufferSize:1,refCount:!1}));if(Ln(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=L(null);else{v.pipe(ln()).subscribe();let x=v.pipe(Ut(O=>O.getRedirectResult().then(X=>X,()=>null)),pe,Ec({bufferSize:1,refCount:!1})),V=v.pipe(Ut(O=>new fe(X=>({unsubscribe:o.runOutsideAngular(()=>O.onAuthStateChanged(tt=>X.next(tt),tt=>X.error(tt),()=>X.complete()))})))),$=v.pipe(Ut(O=>new fe(X=>({unsubscribe:o.runOutsideAngular(()=>O.onIdTokenChanged(tt=>X.next(tt),tt=>X.error(tt),()=>X.complete()))}))));this.authState=x.pipe(oh(V),Oi(s.outsideAngular),ni(s.insideAngular)),this.user=x.pipe(oh($),Oi(s.outsideAngular),ni(s.insideAngular)),this.idToken=this.user.pipe(Ut(O=>O?wt(O.getIdToken()):L(null))),this.idTokenResult=this.user.pipe(Ut(O=>O?wt(O.getIdTokenResult()):L(null))),this.credential=wc(x,E,this.authState.pipe(Ht(O=>!O))).pipe(U(O=>O?.user?O:null),Oi(s.outsideAngular),ni(s.insideAngular))}return ky(this,v,o,{spy:{apply:(x,V,$)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&$.then(O=>E.next(O))}}})}static \u0275fac=function(i){return new(i||e)(g(Gr),g(Wr,8),g(ie),g(z),g(gn),g(Qh,8),g(Yh,8),g(Xh,8),g(Zh,8),g(Jh,8),g(tf,8),g(Xe,8))};static \u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),My=(()=>{class e{constructor(){me.registerVersion("angularfire",Ee.full,"auth-compat")}static \u0275fac=function(i){return new(i||e)};static \u0275mod=H({type:e});static \u0275inj=W({providers:[Un]})}return e})();var sS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tn={},R,xf=xf||{},q=sS||self;function Al(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function zs(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function aS(e){return Object.prototype.hasOwnProperty.call(e,nf)&&e[nf]||(e[nf]=++cS)}var nf="closure_uid_"+(1e9*Math.random()>>>0),cS=0;function lS(e,t,n){return e.call.apply(e.bind,arguments)}function uS(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function le(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?le=lS:le=uS,le.apply(null,arguments)}function ml(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),e.apply(this,i)}}function Xt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(i,r,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[r].apply(i,s)}}function ai(){this.s=this.s,this.o=this.o}var dS=0;ai.prototype.s=!1;ai.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),dS!=0)&&aS(this)};ai.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Wy=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Cf(e){let t=e.length;if(0<t){let n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function Oy(e,t){for(let n=1;n<arguments.length;n++){let i=arguments[n];if(Al(i)){let r=e.length||0,o=i.length||0;e.length=r+o;for(let s=0;s<o;s++)e[r+s]=i[s]}else e.push(i)}}function ue(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var hS=function(){if(!q.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let n=()=>{};q.addEventListener("test",n,t),q.removeEventListener("test",n,t)}catch{}return e}();function Os(e){return/^[\s\xa0]*$/.test(e)}function Sl(){var e=q.navigator;return e&&(e=e.userAgent)?e:""}function bn(e){return Sl().indexOf(e)!=-1}function Tf(e){return Tf[" "](e),e}Tf[" "]=function(){};function fS(e,t){var n=eD;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var mS=bn("Opera"),Yr=bn("Trident")||bn("MSIE"),Hy=bn("Edge"),cf=Hy||Yr,Ky=bn("Gecko")&&!(Sl().toLowerCase().indexOf("webkit")!=-1&&!bn("Edge"))&&!(bn("Trident")||bn("MSIE"))&&!bn("Edge"),pS=Sl().toLowerCase().indexOf("webkit")!=-1&&!bn("Edge");function Qy(){var e=q.document;return e?e.documentMode:void 0}var lf;t:{if(pl="",gl=function(){var e=Sl();if(Ky)return/rv:([^\);]+)(\)|;)/.exec(e);if(Hy)return/Edge\/([\d\.]+)/.exec(e);if(Yr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(pS)return/WebKit\/(\S+)/.exec(e);if(mS)return/(?:Version)[ \/]?(\S+)/.exec(e)}(),gl&&(pl=gl?gl[1]:""),Yr&&(bl=Qy(),bl!=null&&bl>parseFloat(pl))){lf=String(bl);break t}lf=pl}var pl,gl,bl,uf;q.document&&Yr?(rf=Qy(),uf=rf||parseInt(lf,10)||void 0):uf=void 0;var rf,gS=uf;function Ns(e,t){if(ue.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ky){t:{try{Tf(t.nodeName);var r=!0;break t}catch{}r=!1}r||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:bS[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ns.$.h.call(this)}}Xt(Ns,ue);var bS={2:"touch",3:"pen",4:"mouse"};Ns.prototype.h=function(){Ns.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var $s="closure_listenable_"+(1e6*Math.random()|0),_S=0;function vS(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=r,this.key=++_S,this.fa=this.ia=!1}function Dl(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Af(e,t,n){for(let i in e)t.call(n,e[i],i,e)}function yS(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function Yy(e){let t={};for(let n in e)t[n]=e[n];return t}var Ny="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xy(e,t){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)e[n]=i[n];for(let o=0;o<Ny.length;o++)n=Ny[o],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function Rl(e){this.src=e,this.g={},this.h=0}Rl.prototype.add=function(e,t,n,i,r){var o=e.toString();e=this.g[o],e||(e=this.g[o]=[],this.h++);var s=hf(e,t,i,r);return-1<s?(t=e[s],n||(t.ia=!1)):(t=new vS(t,this.src,o,!!i,r),t.ia=n,e.push(t)),t};function df(e,t){var n=t.type;if(n in e.g){var i=e.g[n],r=Wy(i,t),o;(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(Dl(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function hf(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==i)return r}return-1}var Sf="closure_lm_"+(1e6*Math.random()|0),of={};function Zy(e,t,n,i,r){if(i&&i.once)return t0(e,t,n,i,r);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Zy(e,t[o],n,i,r);return null}return n=kf(n),e&&e[$s]?e.O(t,n,zs(i)?!!i.capture:!!i,r):Jy(e,t,n,!1,i,r)}function Jy(e,t,n,i,r,o){if(!t)throw Error("Invalid event type");var s=zs(r)?!!r.capture:!!r,a=Rf(e);if(a||(e[Sf]=a=new Rl(e)),n=a.add(t,n,i,s,o),n.proxy)return n;if(i=wS(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)hS||(r=s),r===void 0&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(n0(t.toString()),i);else if(e.addListener&&e.removeListener)e.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function wS(){function e(n){return t.call(e.src,e.listener,n)}let t=ES;return e}function t0(e,t,n,i,r){if(Array.isArray(t)){for(var o=0;o<t.length;o++)t0(e,t[o],n,i,r);return null}return n=kf(n),e&&e[$s]?e.P(t,n,zs(i)?!!i.capture:!!i,r):Jy(e,t,n,!0,i,r)}function e0(e,t,n,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)e0(e,t[o],n,i,r);else i=zs(i)?!!i.capture:!!i,n=kf(n),e&&e[$s]?(e=e.i,t=String(t).toString(),t in e.g&&(o=e.g[t],n=hf(o,n,i,r),-1<n&&(Dl(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete e.g[t],e.h--)))):e&&(e=Rf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=hf(t,n,i,r)),(n=-1<e?t[e]:null)&&Df(n))}function Df(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[$s])df(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(n0(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Rf(t))?(df(n,e),n.h==0&&(n.src=null,t[Sf]=null)):Dl(e)}}}function n0(e){return e in of?of[e]:of[e]="on"+e}function ES(e,t){if(e.fa)e=!0;else{t=new Ns(t,this);var n=e.listener,i=e.la||e.src;e.ia&&Df(e),e=n.call(i,t)}return e}function Rf(e){return e=e[Sf],e instanceof Rl?e:null}var sf="__closure_events_fn_"+(1e9*Math.random()>>>0);function kf(e){return typeof e=="function"?e:(e[sf]||(e[sf]=function(t){return e.handleEvent(t)}),e[sf])}function Yt(){ai.call(this),this.i=new Rl(this),this.S=this,this.J=null}Xt(Yt,ai);Yt.prototype[$s]=!0;Yt.prototype.removeEventListener=function(e,t,n,i){e0(this,e,t,n,i)};function se(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,typeof t=="string")t=new ue(t,e);else if(t instanceof ue)t.target=t.target||e;else{var r=t;t=new ue(i,e),Xy(t,r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];r=_l(s,i,!0,t)&&r}if(s=t.g=e,r=_l(s,i,!0,t)&&r,r=_l(s,i,!1,t)&&r,n)for(o=0;o<n.length;o++)s=t.g=n[o],r=_l(s,i,!1,t)&&r}Yt.prototype.N=function(){if(Yt.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)Dl(n[i]);delete e.g[t],e.h--}}this.J=null};Yt.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)};Yt.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};function _l(e,t,n,i){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&df(e.i,s),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var Pf=q.JSON.stringify,ff=class{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}};function IS(){var e=Mf;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var mf=class{constructor(){this.h=this.g=null}add(t,n){let i=i0.get();i.set(t,n),this.h?this.h.next=i:this.g=i,this.h=i}},i0=new ff(()=>new pf,e=>e.reset()),pf=class{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function xS(e){var t=1;e=e.split(":");let n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function CS(e){q.setTimeout(()=>{throw e},0)}var Fs,Vs=!1,Mf=new mf,r0=()=>{let e=q.Promise.resolve(void 0);Fs=()=>{e.then(TS)}},TS=()=>{for(var e;e=IS();){try{e.h.call(e.g)}catch(n){CS(n)}var t=i0;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Vs=!1};function kl(e,t){Yt.call(this),this.h=e||1,this.g=t||q,this.j=le(this.qb,this),this.l=Date.now()}Xt(kl,Yt);R=kl.prototype;R.ga=!1;R.T=null;R.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),se(this,"tick"),this.ga&&(Of(this),this.start()))}};R.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Of(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}R.N=function(){kl.$.N.call(this),Of(this),delete this.g};function Nf(e,t,n){if(typeof e=="function")n&&(e=le(e,n));else if(e&&typeof e.handleEvent=="function")e=le(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:q.setTimeout(e,t||0)}function o0(e){e.g=Nf(()=>{e.g=null,e.i&&(e.i=!1,o0(e))},e.j);let t=e.h;e.h=null,e.m.apply(null,t)}var gf=class extends ai{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:o0(this)}N(){super.N(),this.g&&(q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ls(e){ai.call(this),this.h=e,this.g={}}Xt(Ls,ai);var Fy=[];function s0(e,t,n,i){Array.isArray(n)||(n&&(Fy[0]=n.toString()),n=Fy);for(var r=0;r<n.length;r++){var o=Zy(t,n[r],i||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function a0(e){Af(e.g,function(t,n){this.g.hasOwnProperty(n)&&Df(t)},e),e.g={}}Ls.prototype.N=function(){Ls.$.N.call(this),a0(this)};Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Pl(){this.g=!0}Pl.prototype.Ea=function(){this.g=!1};function AS(e,t,n,i,r,o){e.info(function(){if(e.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");s=2<=d.length&&d[1]=="type"?s+(u+"="+l+"&"):s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+`
`+n+`
`+s})}function SS(e,t,n,i,r,o,s){e.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+`
`+n+`
`+o+" "+s})}function Kr(e,t,n,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+RS(e,n)+(i?" "+i:"")})}function DS(e,t){e.info(function(){return"TIMEOUT: "+t})}Pl.prototype.info=function(){};function RS(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<r.length;s++)r[s]=""}}}}return Pf(n)}catch{return t}}var Qi={},Vy=null;function Ml(){return Vy=Vy||new Yt}Qi.Ta="serverreachability";function c0(e){ue.call(this,Qi.Ta,e)}Xt(c0,ue);function js(e){let t=Ml();se(t,new c0(t))}Qi.STAT_EVENT="statevent";function l0(e,t){ue.call(this,Qi.STAT_EVENT,e),this.stat=t}Xt(l0,ue);function be(e){let t=Ml();se(t,new l0(t,e))}Qi.Ua="timingevent";function u0(e,t){ue.call(this,Qi.Ua,e),this.size=t}Xt(u0,ue);function qs(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return q.setTimeout(function(){e()},t)}var Ol={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},d0={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ff(){}Ff.prototype.h=null;function Ly(e){return e.h||(e.h=e.i())}function h0(){}var Gs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Vf(){ue.call(this,"d")}Xt(Vf,ue);function Lf(){ue.call(this,"c")}Xt(Lf,ue);var bf;function Nl(){}Xt(Nl,Ff);Nl.prototype.g=function(){return new XMLHttpRequest};Nl.prototype.i=function(){return{}};bf=new Nl;function Ws(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new Ls(this),this.P=kS,e=cf?125:void 0,this.V=new kl(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new f0}function f0(){this.i=null,this.g="",this.h=!1}var kS=45e3,m0={},_f={};R=Ws.prototype;R.setTimeout=function(e){this.P=e};function vf(e,t,n){e.L=1,e.A=Vl($n(t)),e.u=n,e.S=!0,p0(e,null)}function p0(e,t){e.G=Date.now(),Hs(e),e.B=$n(e.A);var n=e.B,i=e.W;Array.isArray(i)||(i=[String(i)]),I0(n.i,"t",i),e.o=0,n=e.l.J,e.h=new f0,e.g=q0(e.l,n?t:null,!e.u),0<e.O&&(e.M=new gf(le(e.Pa,e,e.g),e.O)),s0(e.U,e.g,"readystatechange",e.nb),t=e.I?Yy(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),js(),AS(e.j,e.v,e.B,e.m,e.W,e.u)}R.nb=function(e){e=e.target;let t=this.M;t&&_n(e)==3?t.l():this.Pa(e)};R.Pa=function(e){try{if(e==this.g)t:{let u=_n(this.g);var t=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||cf||this.g&&(this.h.h||this.g.ja()||zy(this.g)))){this.J||u!=4||t==7||(t==8||0>=d?js(3):js(2)),Fl(this);var n=this.g.da();this.ca=n;e:if(g0(this)){var i=zy(this.g);e="";var r=i.length,o=_n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wi(this),Ms(this);var s="";break e}this.h.i=new q.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:o&&t==r-1});i.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,SS(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Os(a)){var l=a;break e}}l=null}if(n=l)Kr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yf(this,n);else{this.i=!1,this.s=3,be(12),Wi(this),Ms(this);break t}}this.S?(b0(this,u,s),cf&&this.i&&u==3&&(s0(this.U,this.V,"tick",this.mb),this.V.start())):(Kr(this.j,this.m,s,null),yf(this,s)),u==4&&Wi(this),this.i&&!this.J&&(u==4?B0(this.l,this):(this.i=!1,Hs(this)))}else ZS(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,be(12)):(this.s=0,be(13)),Wi(this),Ms(this)}}}catch{}finally{}};function g0(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function b0(e,t,n){let i=!0,r;for(;!e.J&&e.o<n.length;)if(r=PS(e,n),r==_f){t==4&&(e.s=4,be(14),i=!1),Kr(e.j,e.m,null,"[Incomplete Response]");break}else if(r==m0){e.s=4,be(15),Kr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}else Kr(e.j,e.m,r,null),yf(e,r);g0(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,be(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),qf(t),t.M=!0,be(11))):(Kr(e.j,e.m,n,"[Invalid Chunked Response]"),Wi(e),Ms(e))}R.mb=function(){if(this.g){var e=_n(this.g),t=this.g.ja();this.o<t.length&&(Fl(this),b0(this,e,t),this.i&&e!=4&&Hs(this))}};function PS(e,t){var n=e.o,i=t.indexOf(`
`,n);return i==-1?_f:(n=Number(t.substring(n,i)),isNaN(n)?m0:(i+=1,i+n>t.length?_f:(t=t.slice(i,i+n),e.o=i+n,t)))}R.cancel=function(){this.J=!0,Wi(this)};function Hs(e){e.Y=Date.now()+e.P,_0(e,e.P)}function _0(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=qs(le(e.lb,e),t)}function Fl(e){e.C&&(q.clearTimeout(e.C),e.C=null)}R.lb=function(){this.C=null;let e=Date.now();0<=e-this.Y?(DS(this.j,this.B),this.L!=2&&(js(),be(17)),Wi(this),this.s=2,Ms(this)):_0(this,this.Y-e)};function Ms(e){e.l.H==0||e.J||B0(e.l,e)}function Wi(e){Fl(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Of(e.V),a0(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function yf(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||wf(n.i,e))){if(!e.K&&wf(n.i,e)&&n.H==3){try{var i=n.Ja.g.parse(t)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Il(n),Bl(n);else break t;$f(n),be(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=qs(le(n.ib,n),6e3));if(1>=T0(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Hi(n,11)}else if((e.K||n.g==e)&&Il(n),!Os(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){let l=r[t];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;let f=e.g;if(f){let E=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var o=i.i;o.g||E.indexOf("spdy")==-1&&E.indexOf("quic")==-1&&E.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(jf(o,o.h),o.h=null))}if(i.F){let v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(i.Da=v,Et(i.I,i.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var s=e;if(i.wa=$0(i,i.J?i.pa:null,i.Y),s.K){A0(i.i,s);var a=s,c=i.L;c&&a.setTimeout(c),a.C&&(Fl(a),Hs(a)),i.g=s}else L0(i);0<n.j.length&&Ul(n)}else l[0]!="stop"&&l[0]!="close"||Hi(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Hi(n,7):zf(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}js(4)}catch{}}function MS(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(Al(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}t=[],n=0;for(i in e)t[n++]=e[i];return t}function OS(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(Al(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(let i in e)t[n++]=i;return t}}}function v0(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(Al(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=OS(e),i=MS(e),r=i.length,o=0;o<r;o++)t.call(void 0,i[o],n&&n[o],e)}var y0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NS(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var o=e[n].substring(0,i);r=e[n].substring(i+1)}else o=e[n];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Ki(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ki){this.h=e.h,wl(this,e.j),this.s=e.s,this.g=e.g,El(this,e.m),this.l=e.l;var t=e.i,n=new Bs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),jy(this,n),this.o=e.o}else e&&(t=String(e).match(y0))?(this.h=!1,wl(this,t[1]||"",!0),this.s=ks(t[2]||""),this.g=ks(t[3]||"",!0),El(this,t[4]),this.l=ks(t[5]||"",!0),jy(this,t[6]||"",!0),this.o=ks(t[7]||"")):(this.h=!1,this.i=new Bs(null,this.h))}Ki.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ps(t,By,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Ps(t,By,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(Ps(n,n.charAt(0)=="/"?LS:VS,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ps(n,BS)),e.join("")};function $n(e){return new Ki(e)}function wl(e,t,n){e.j=n?ks(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function El(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function jy(e,t,n){t instanceof Bs?(e.i=t,US(e.i,e.h)):(n||(t=Ps(t,jS)),e.i=new Bs(t,e.h))}function Et(e,t,n){e.i.set(t,n)}function Vl(e){return Et(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ks(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ps(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,FS),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function FS(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var By=/[#\/\?@]/g,VS=/[#\?:]/g,LS=/[#\?]/g,jS=/[#\?@]/g,BS=/#/g;function Bs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ci(e){e.g||(e.g=new Map,e.h=0,e.i&&NS(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}R=Bs.prototype;R.add=function(e,t){ci(this),this.i=null,e=Xr(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function w0(e,t){ci(e),t=Xr(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function E0(e,t){return ci(e),t=Xr(e,t),e.g.has(t)}R.forEach=function(e,t){ci(this),this.g.forEach(function(n,i){n.forEach(function(r){e.call(t,r,i,this)},this)},this)};R.ta=function(){ci(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){let r=e[i];for(let o=0;o<r.length;o++)n.push(t[i])}return n};R.Z=function(e){ci(this);let t=[];if(typeof e=="string")E0(this,e)&&(t=t.concat(this.g.get(Xr(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};R.set=function(e,t){return ci(this),this.i=null,e=Xr(this,e),E0(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};R.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function I0(e,t,n){w0(e,t),0<n.length&&(e.i=null,e.g.set(Xr(e,t),Cf(n)),e.h+=n.length)}R.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];let o=encodeURIComponent(String(i)),s=this.Z(i);for(i=0;i<s.length;i++){var r=o;s[i]!==""&&(r+="="+encodeURIComponent(String(s[i]))),e.push(r)}}return this.i=e.join("&")};function Xr(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function US(e,t){t&&!e.j&&(ci(e),e.i=null,e.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(w0(this,i),I0(this,r,n))},e)),e.j=t}var zS=class{constructor(e,t){this.g=e,this.map=t}};function x0(e){this.l=e||$S,q.PerformanceNavigationTiming?(e=q.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(q.g&&q.g.Ka&&q.g.Ka()&&q.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $S=10;function C0(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function T0(e){return e.h?1:e.g?e.g.size:0}function wf(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function jf(e,t){e.g?e.g.add(t):e.h=t}function A0(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}x0.prototype.cancel=function(){if(this.i=S0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function S0(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.F);return t}return Cf(e.i)}var qS=class{stringify(e){return q.JSON.stringify(e,void 0)}parse(e){return q.JSON.parse(e,void 0)}};function GS(){this.g=new qS}function WS(e,t,n){let i=n||"";try{v0(e,function(r,o){let s=r;zs(r)&&(s=Pf(r)),t.push(i+o+"="+encodeURIComponent(s))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function HS(e,t){let n=new Pl;if(q.Image){let i=new Image;i.onload=ml(vl,n,i,"TestLoadImage: loaded",!0,t),i.onerror=ml(vl,n,i,"TestLoadImage: error",!1,t),i.onabort=ml(vl,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=ml(vl,n,i,"TestLoadImage: timeout",!1,t),q.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}function vl(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function Ks(e){this.l=e.ec||null,this.j=e.ob||!1}Xt(Ks,Ff);Ks.prototype.g=function(){return new Ll(this.l,this.j)};Ks.prototype.i=function(e){return function(){return e}}({});function Ll(e,t){Yt.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Bf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Xt(Ll,Yt);var Bf=0;R=Ll.prototype;R.open=function(e,t){if(this.readyState!=Bf)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Us(this)};R.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||q).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};R.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qs(this)),this.readyState=Bf};R.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Us(this)),this.g&&(this.readyState=3,Us(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof q.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;D0(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function D0(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}R.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Qs(this):Us(this),this.readyState==3&&D0(this)}};R.Za=function(e){this.g&&(this.response=this.responseText=e,Qs(this))};R.Ya=function(e){this.g&&(this.response=e,Qs(this))};R.ka=function(){this.g&&Qs(this)};function Qs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Us(e)}R.setRequestHeader=function(e,t){this.v.append(e,t)};R.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};R.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function Us(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var KS=q.JSON.parse;function Rt(e){Yt.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=R0,this.L=this.M=!1}Xt(Rt,Yt);var R0="",QS=/^https?$/i,YS=["POST","PUT"];R=Rt.prototype;R.Oa=function(e){this.M=e};R.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():bf.g(),this.C=this.u?Ly(this.u):Ly(bf),this.g.onreadystatechange=le(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){Uy(this,o);return}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),r=q.FormData&&e instanceof q.FormData,!(0<=Wy(YS,t))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{M0(this),0<this.B&&((this.L=XS(this.g))?(this.g.timeout=this.B,this.g.ontimeout=le(this.ua,this)):this.A=Nf(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Uy(this,o)}};function XS(e){return Yr&&typeof e.timeout=="number"&&e.ontimeout!==void 0}R.ua=function(){typeof xf<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,se(this,"timeout"),this.abort(8))};function Uy(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,k0(e),jl(e)}function k0(e){e.F||(e.F=!0,se(e,"complete"),se(e,"error"))}R.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,se(this,"complete"),se(this,"abort"),jl(this))};R.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jl(this,!0)),Rt.$.N.call(this)};R.La=function(){this.s||(this.G||this.v||this.l?P0(this):this.kb())};R.kb=function(){P0(this)};function P0(e){if(e.h&&typeof xf<"u"&&(!e.C[1]||_n(e)!=4||e.da()!=2)){if(e.v&&_n(e)==4)Nf(e.La,0,e);else if(se(e,"readystatechange"),_n(e)==4){e.h=!1;try{let s=e.da();t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var i;if(i=s===0){var r=String(e.I).match(y0)[1]||null;!r&&q.self&&q.self.location&&(r=q.self.location.protocol.slice(0,-1)),i=!QS.test(r?r.toLowerCase():"")}n=i}if(n)se(e,"complete"),se(e,"success");else{e.m=6;try{var o=2<_n(e)?e.g.statusText:""}catch{o=""}e.j=o+" ["+e.da()+"]",k0(e)}}finally{jl(e)}}}}function jl(e,t){if(e.g){M0(e);let n=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||se(e,"ready");try{n.onreadystatechange=i}catch{}}}function M0(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(q.clearTimeout(e.A),e.A=null)}R.isActive=function(){return!!this.g};function _n(e){return e.g?e.g.readyState:0}R.da=function(){try{return 2<_n(this)?this.g.status:-1}catch{return-1}};R.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};R.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),KS(t)}};function zy(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case R0:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function ZS(e){let t={};e=(e.g&&2<=_n(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<e.length;i++){if(Os(e[i]))continue;var n=xS(e[i]);let r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=t[r]||[];t[r]=o,o.push(n)}yS(t,function(i){return i.join(", ")})}R.Ia=function(){return this.m};R.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function O0(e){let t="";return Af(e,function(n,i){t+=i,t+=":",t+=n,t+=`\r
`}),t}function Uf(e,t,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=O0(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Et(e,t,n))}function Ds(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function N0(e){this.Ga=0,this.j=[],this.l=new Pl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ds("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ds("baseRetryDelayMs",5e3,e),this.hb=Ds("retryDelaySeedMs",1e4,e),this.eb=Ds("forwardChannelMaxRetries",2,e),this.xa=Ds("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new x0(e&&e.concurrentRequestLimit),this.Ja=new GS,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}R=N0.prototype;R.ra=8;R.H=1;function zf(e){if(F0(e),e.H==3){var t=e.W++,n=$n(e.I);if(Et(n,"SID",e.K),Et(n,"RID",t),Et(n,"TYPE","terminate"),Ys(e,n),t=new Ws(e,e.l,t),t.L=2,t.A=Vl($n(n)),n=!1,q.navigator&&q.navigator.sendBeacon)try{n=q.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&q.Image&&(new Image().src=t.A,n=!0),n||(t.g=q0(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Hs(t)}z0(e)}function Bl(e){e.g&&(qf(e),e.g.cancel(),e.g=null)}function F0(e){Bl(e),e.u&&(q.clearTimeout(e.u),e.u=null),Il(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&q.clearTimeout(e.m),e.m=null)}function Ul(e){if(!C0(e.i)&&!e.m){e.m=!0;var t=e.Na;Fs||r0(),Vs||(Fs(),Vs=!0),Mf.add(t,e),e.C=0}}function JS(e,t){return T0(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=qs(le(e.Na,e,t),U0(e,e.C)),e.C++,!0)}R.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;let r=new Ws(this,this.l,e),o=this.s;if(this.U&&(o?(o=Yy(o),Xy(o,this.U)):o=this.U),this.o!==null||this.O||(r.I=o,o=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break e}i=void 0}if(i===void 0)break;if(t+=i,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=V0(this,r,t),n=$n(this.I),Et(n,"RID",e),Et(n,"CVER",22),this.F&&Et(n,"X-HTTP-Session-Id",this.F),Ys(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(O0(o)))+"&"+t:this.o&&Uf(n,this.o,o)),jf(this.i,r),this.bb&&Et(n,"TYPE","init"),this.P?(Et(n,"$req",t),Et(n,"SID","null"),r.aa=!0,vf(r,n,null)):vf(r,n,t),this.H=2}}else this.H==3&&(e?$y(this,e):this.j.length==0||C0(this.i)||$y(this))};function $y(e,t){var n;t?n=t.m:n=e.W++;let i=$n(e.I);Et(i,"SID",e.K),Et(i,"RID",n),Et(i,"AID",e.V),Ys(e,i),e.o&&e.s&&Uf(i,e.o,e.s),n=new Ws(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=V0(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),jf(e.i,n),vf(n,i,t)}function Ys(e,t){e.na&&Af(e.na,function(n,i){Et(t,i,n)}),e.h&&v0({},function(n,i){Et(t,i,n)})}function V0(e,t,n){n=Math.min(e.j.length,n);var i=e.h?le(e.h.Va,e.h,e):null;t:{var r=e.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=r[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let l=r[c].g,u=r[c].map;if(l-=o,0>l)o=Math.max(0,r[c].g-100),a=!1;else try{WS(u,s,"req"+l+"_")}catch{i&&i(u)}}if(a){i=s.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,i}function L0(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Fs||r0(),Vs||(Fs(),Vs=!0),Mf.add(t,e),e.A=0}}function $f(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=qs(le(e.Ma,e),U0(e,e.A)),e.A++,!0)}R.Ma=function(){if(this.u=null,j0(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=qs(le(this.jb,this),e)}};R.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,be(10),Bl(this),j0(this))};function qf(e){e.B!=null&&(q.clearTimeout(e.B),e.B=null)}function j0(e){e.g=new Ws(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=$n(e.wa);Et(t,"RID","rpc"),Et(t,"SID",e.K),Et(t,"AID",e.V),Et(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Et(t,"TO",e.qa),Et(t,"TYPE","xmlhttp"),Ys(e,t),e.o&&e.s&&Uf(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Vl($n(t)),n.u=null,n.S=!0,p0(n,e)}R.ib=function(){this.v!=null&&(this.v=null,Bl(this),$f(this),be(19))};function Il(e){e.v!=null&&(q.clearTimeout(e.v),e.v=null)}function B0(e,t){var n=null;if(e.g==t){Il(e),qf(e),e.g=null;var i=2}else if(wf(e.i,t))n=t.F,A0(e.i,t),i=1;else return;if(e.H!=0){if(t.i)if(i==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var r=e.C;i=Ml(),se(i,new u0(i,n)),Ul(e)}else L0(e);else if(r=t.s,r==3||r==0&&0<t.ca||!(i==1&&JS(e,t)||i==2&&$f(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:Hi(e,5);break;case 4:Hi(e,10);break;case 3:Hi(e,6);break;default:Hi(e,2)}}}function U0(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Hi(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var i=le(e.pb,e);n||(n=new Ki("//www.google.com/images/cleardot.gif"),q.location&&q.location.protocol=="http"||wl(n,"https"),Vl(n)),HS(n.toString(),i)}else be(2);e.H=0,e.h&&e.h.za(t),z0(e),F0(e)}R.pb=function(e){e?(this.l.info("Successfully pinged google.com"),be(2)):(this.l.info("Failed to ping google.com"),be(1))};function z0(e){if(e.H=0,e.ma=[],e.h){let t=S0(e.i);(t.length!=0||e.j.length!=0)&&(Oy(e.ma,t),Oy(e.ma,e.j),e.i.i.length=0,Cf(e.j),e.j.length=0),e.h.ya()}}function $0(e,t,n){var i=n instanceof Ki?$n(n):new Ki(n);if(i.g!="")t&&(i.g=t+"."+i.g),El(i,i.m);else{var r=q.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var o=new Ki(null);i&&wl(o,i),t&&(o.g=t),r&&El(o,r),n&&(o.l=n),i=o}return n=e.F,t=e.Da,n&&t&&Et(i,n,t),Et(i,"VER",e.ra),Ys(e,i),i}function q0(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Rt(new Ks({ob:n})):new Rt(e.va),t.Oa(e.J),t}R.isActive=function(){return!!this.h&&this.h.isActive(this)};function G0(){}R=G0.prototype;R.Ba=function(){};R.Aa=function(){};R.za=function(){};R.ya=function(){};R.isActive=function(){return!0};R.Va=function(){};function xl(){if(Yr&&!(10<=Number(gS)))throw Error("Environmental error: no available transport.")}xl.prototype.g=function(e,t){return new Te(e,t)};function Te(e,t){Yt.call(this),this.g=new N0(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Os(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Os(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Zr(this)}Xt(Te,Yt);Te.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;be(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=$0(e,null,e.Y),Ul(e)};Te.prototype.close=function(){zf(this.g)};Te.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Pf(e),e=n);t.j.push(new zS(t.fb++,e)),t.H==3&&Ul(t)};Te.prototype.N=function(){this.g.h=null,delete this.j,zf(this.g),delete this.g,Te.$.N.call(this)};function W0(e){Vf.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(let n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Xt(W0,Vf);function H0(){Lf.call(this),this.status=1}Xt(H0,Lf);function Zr(e){this.g=e}Xt(Zr,G0);Zr.prototype.Ba=function(){se(this.g,"a")};Zr.prototype.Aa=function(e){se(this.g,new W0(e))};Zr.prototype.za=function(e){se(this.g,new H0)};Zr.prototype.ya=function(){se(this.g,"b")};function tD(){this.blockSize=-1}function Je(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Xt(Je,tD);Je.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function af(e,t,n){n||(n=0);var i=Array(16);if(typeof t=="string")for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var o=e.g[3],s=t+(o^n&(r^o))+i[0]+3614090360&4294967295;t=n+(s<<7&4294967295|s>>>25),s=o+(r^t&(n^r))+i[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(n^o&(t^n))+i[2]+606105819&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(t^r&(o^t))+i[3]+3250441966&4294967295,n=r+(s<<22&4294967295|s>>>10),s=t+(o^n&(r^o))+i[4]+4118548399&4294967295,t=n+(s<<7&4294967295|s>>>25),s=o+(r^t&(n^r))+i[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(n^o&(t^n))+i[6]+2821735955&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(t^r&(o^t))+i[7]+4249261313&4294967295,n=r+(s<<22&4294967295|s>>>10),s=t+(o^n&(r^o))+i[8]+1770035416&4294967295,t=n+(s<<7&4294967295|s>>>25),s=o+(r^t&(n^r))+i[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(n^o&(t^n))+i[10]+4294925233&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(t^r&(o^t))+i[11]+2304563134&4294967295,n=r+(s<<22&4294967295|s>>>10),s=t+(o^n&(r^o))+i[12]+1804603682&4294967295,t=n+(s<<7&4294967295|s>>>25),s=o+(r^t&(n^r))+i[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(n^o&(t^n))+i[14]+2792965006&4294967295,r=o+(s<<17&4294967295|s>>>15),s=n+(t^r&(o^t))+i[15]+1236535329&4294967295,n=r+(s<<22&4294967295|s>>>10),s=t+(r^o&(n^r))+i[1]+4129170786&4294967295,t=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(t^n))+i[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^n&(o^t))+i[11]+643717713&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^t&(r^o))+i[0]+3921069994&4294967295,n=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(n^r))+i[5]+3593408605&4294967295,t=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(t^n))+i[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^n&(o^t))+i[15]+3634488961&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^t&(r^o))+i[4]+3889429448&4294967295,n=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(n^r))+i[9]+568446438&4294967295,t=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(t^n))+i[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^n&(o^t))+i[3]+4107603335&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^t&(r^o))+i[8]+1163531501&4294967295,n=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(n^r))+i[13]+2850285829&4294967295,t=n+(s<<5&4294967295|s>>>27),s=o+(n^r&(t^n))+i[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^n&(o^t))+i[7]+1735328473&4294967295,r=o+(s<<14&4294967295|s>>>18),s=n+(o^t&(r^o))+i[12]+2368359562&4294967295,n=r+(s<<20&4294967295|s>>>12),s=t+(n^r^o)+i[5]+4294588738&4294967295,t=n+(s<<4&4294967295|s>>>28),s=o+(t^n^r)+i[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^n)+i[11]+1839030562&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^t)+i[14]+4259657740&4294967295,n=r+(s<<23&4294967295|s>>>9),s=t+(n^r^o)+i[1]+2763975236&4294967295,t=n+(s<<4&4294967295|s>>>28),s=o+(t^n^r)+i[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^n)+i[7]+4139469664&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^t)+i[10]+3200236656&4294967295,n=r+(s<<23&4294967295|s>>>9),s=t+(n^r^o)+i[13]+681279174&4294967295,t=n+(s<<4&4294967295|s>>>28),s=o+(t^n^r)+i[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^n)+i[3]+3572445317&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^t)+i[6]+76029189&4294967295,n=r+(s<<23&4294967295|s>>>9),s=t+(n^r^o)+i[9]+3654602809&4294967295,t=n+(s<<4&4294967295|s>>>28),s=o+(t^n^r)+i[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^n)+i[15]+530742520&4294967295,r=o+(s<<16&4294967295|s>>>16),s=n+(r^o^t)+i[2]+3299628645&4294967295,n=r+(s<<23&4294967295|s>>>9),s=t+(r^(n|~o))+i[0]+4096336452&4294967295,t=n+(s<<6&4294967295|s>>>26),s=o+(n^(t|~r))+i[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~n))+i[14]+2878612391&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~t))+i[5]+4237533241&4294967295,n=r+(s<<21&4294967295|s>>>11),s=t+(r^(n|~o))+i[12]+1700485571&4294967295,t=n+(s<<6&4294967295|s>>>26),s=o+(n^(t|~r))+i[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~n))+i[10]+4293915773&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~t))+i[1]+2240044497&4294967295,n=r+(s<<21&4294967295|s>>>11),s=t+(r^(n|~o))+i[8]+1873313359&4294967295,t=n+(s<<6&4294967295|s>>>26),s=o+(n^(t|~r))+i[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~n))+i[6]+2734768916&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~t))+i[13]+1309151649&4294967295,n=r+(s<<21&4294967295|s>>>11),s=t+(r^(n|~o))+i[4]+4149444226&4294967295,t=n+(s<<6&4294967295|s>>>26),s=o+(n^(t|~r))+i[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~n))+i[2]+718787259&4294967295,r=o+(s<<15&4294967295|s>>>17),s=n+(o^(r|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+o&4294967295}Je.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,i=this.m,r=this.h,o=0;o<t;){if(r==0)for(;o<=n;)af(this,e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<t;)if(i[r++]=e.charCodeAt(o++),r==this.blockSize){af(this,i),r=0;break}}else for(;o<t;)if(i[r++]=e[o++],r==this.blockSize){af(this,i),r=0;break}}this.h=r,this.i+=t};Je.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};function pt(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var o=e[r]|0;i&&o==t||(n[r]=o,i=!1)}this.g=n}var eD={};function Gf(e){return-128<=e&&128>e?fS(e,function(t){return new pt([t|0],0>t?-1:0)}):new pt([e|0],0>e?-1:0)}function vn(e){if(isNaN(e)||!isFinite(e))return Qr;if(0>e)return oe(vn(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=Ef;return new pt(t,0)}function K0(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return oe(K0(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=vn(Math.pow(t,8)),i=Qr,r=0;r<e.length;r+=8){var o=Math.min(8,e.length-r),s=parseInt(e.substring(r,r+o),t);8>o?(o=vn(Math.pow(t,o)),i=i.R(o).add(vn(s))):(i=i.R(n),i=i.add(vn(s)))}return i}var Ef=4294967296,Qr=Gf(0),If=Gf(1),qy=Gf(16777216);R=pt.prototype;R.ea=function(){if(Ne(this))return-oe(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:Ef+i)*t,t*=Ef}return e};R.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(zn(this))return"0";if(Ne(this))return"-"+oe(this).toString(e);for(var t=vn(Math.pow(e,6)),n=this,i="";;){var r=Tl(n,t).g;n=Cl(n,r.R(t));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=r,zn(n))return o+i;for(;6>o.length;)o="0"+o;i=o+i}};R.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function zn(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function Ne(e){return e.h==-1}R.X=function(e){return e=Cl(this,e),Ne(e)?-1:zn(e)?0:1};function oe(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new pt(n,~e.h).add(If)}R.abs=function(){return Ne(this)?oe(this):this};R.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,r=0;r<=t;r++){var o=i+(this.D(r)&65535)+(e.D(r)&65535),s=(o>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);i=s>>>16,o&=65535,s&=65535,n[r]=s<<16|o}return new pt(n,n[n.length-1]&-2147483648?-1:0)};function Cl(e,t){return e.add(oe(t))}R.R=function(e){if(zn(this)||zn(e))return Qr;if(Ne(this))return Ne(e)?oe(this).R(oe(e)):oe(oe(this).R(e));if(Ne(e))return oe(this.R(oe(e)));if(0>this.X(qy)&&0>e.X(qy))return vn(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<e.g.length;r++){var o=this.D(i)>>>16,s=this.D(i)&65535,a=e.D(r)>>>16,c=e.D(r)&65535;n[2*i+2*r]+=s*c,yl(n,2*i+2*r),n[2*i+2*r+1]+=o*c,yl(n,2*i+2*r+1),n[2*i+2*r+1]+=s*a,yl(n,2*i+2*r+1),n[2*i+2*r+2]+=o*a,yl(n,2*i+2*r+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new pt(n,0)};function yl(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Rs(e,t){this.g=e,this.h=t}function Tl(e,t){if(zn(t))throw Error("division by zero");if(zn(e))return new Rs(Qr,Qr);if(Ne(e))return t=Tl(oe(e),t),new Rs(oe(t.g),oe(t.h));if(Ne(t))return t=Tl(e,oe(t)),new Rs(oe(t.g),t.h);if(30<e.g.length){if(Ne(e)||Ne(t))throw Error("slowDivide_ only works with positive integers.");for(var n=If,i=t;0>=i.X(e);)n=Gy(n),i=Gy(i);var r=Hr(n,1),o=Hr(i,1);for(i=Hr(i,2),n=Hr(n,2);!zn(i);){var s=o.add(i);0>=s.X(e)&&(r=r.add(n),o=s),i=Hr(i,1),n=Hr(n,1)}return t=Cl(e,r.R(t)),new Rs(r,t)}for(r=Qr;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),o=vn(n),s=o.R(t);Ne(s)||0<s.X(e);)n-=i,o=vn(n),s=o.R(t);zn(o)&&(o=If),r=r.add(o),e=Cl(e,s)}return new Rs(r,e)}R.gb=function(e){return Tl(this,e).h};R.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new pt(n,this.h&e.h)};R.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new pt(n,this.h|e.h)};R.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new pt(n,this.h^e.h)};function Gy(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new pt(n,e.h)}function Hr(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,r=[],o=0;o<i;o++)r[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new pt(r,e.h)}xl.prototype.createWebChannel=xl.prototype.g;Te.prototype.send=Te.prototype.u;Te.prototype.open=Te.prototype.m;Te.prototype.close=Te.prototype.close;Ol.NO_ERROR=0;Ol.TIMEOUT=8;Ol.HTTP_ERROR=6;d0.COMPLETE="complete";h0.EventType=Gs;Gs.OPEN="a";Gs.CLOSE="b";Gs.ERROR="c";Gs.MESSAGE="d";Yt.prototype.listen=Yt.prototype.O;Rt.prototype.listenOnce=Rt.prototype.P;Rt.prototype.getLastError=Rt.prototype.Sa;Rt.prototype.getLastErrorCode=Rt.prototype.Ia;Rt.prototype.getStatus=Rt.prototype.da;Rt.prototype.getResponseJson=Rt.prototype.Wa;Rt.prototype.getResponseText=Rt.prototype.ja;Rt.prototype.send=Rt.prototype.ha;Rt.prototype.setWithCredentials=Rt.prototype.Oa;Je.prototype.digest=Je.prototype.l;Je.prototype.reset=Je.prototype.reset;Je.prototype.update=Je.prototype.j;pt.prototype.add=pt.prototype.add;pt.prototype.multiply=pt.prototype.R;pt.prototype.modulo=pt.prototype.gb;pt.prototype.compare=pt.prototype.X;pt.prototype.toNumber=pt.prototype.ea;pt.prototype.toString=pt.prototype.toString;pt.prototype.getBits=pt.prototype.D;pt.fromNumber=vn;pt.fromString=K0;var Q0=tn.createWebChannelTransport=function(){return new xl},Y0=tn.getStatEventTarget=function(){return Ml()},zl=tn.ErrorCode=Ol,X0=tn.EventType=d0,Z0=tn.Event=Qi,Wf=tn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},uV=tn.FetchXmlHttpFactory=Ks,Xs=tn.WebChannel=h0,J0=tn.XhrIo=Rt,tw=tn.Md5=Je,Yi=tn.Integer=pt;var ew="@firebase/firestore";var qt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");var Ro="10.11.0";var pi=new jc("@firebase/firestore");function io(){return pi.logLevel}function Qp(e){pi.setLogLevel(e)}function I(e,...t){if(pi.logLevel<=mn.DEBUG){let n=t.map(Yp);pi.debug(`Firestore (${Ro}): ${e}`,...n)}}function Ft(e,...t){if(pi.logLevel<=mn.ERROR){let n=t.map(Yp);pi.error(`Firestore (${Ro}): ${e}`,...n)}}function Ve(e,...t){if(pi.logLevel<=mn.WARN){let n=t.map(Yp);pi.warn(`Firestore (${Ro}): ${e}`,...n)}}function Yp(e){if(typeof e=="string")return e;try{return function(n){return JSON.stringify(n)}(e)}catch{return e}}function P(e="Unexpected state"){let t=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: `+e;throw Ft(t),new Error(t)}function j(e,t){e||P()}function eE(e,t){e||P()}function D(e,t){return e}var b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends vv{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Gt=class{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}};var Jl=class{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Xf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}},Zf=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Jf=class{constructor(t){this.t=t,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),o=new Gt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Gt,t.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let c=o;t.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Gt)}},0),s()}getToken(){let t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(j(typeof i.accessToken=="string"),new Jl(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return j(t===null||typeof t=="string"),new qt(t)}},tm=class{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},em=class{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new tm(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},nm=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},im=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){let i=o=>{o.error!=null&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,I("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};let r=o=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(j(typeof n.token=="string"),this.R=n.token,new nm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function nD(e){let t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}var tu=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=nD(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=t.charAt(r[o]%t.length))}return i}};function G(e,t){return e<t?-1:e>t?1:0}function fo(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}function nE(e){return e+"\0"}var Dt=class e{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new w(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new w(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new w(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new e(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?G(this.nanoseconds,t.nanoseconds):G(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var B=class e{constructor(t){this.timestamp=t}static fromTimestamp(t){return new e(t)}static min(){return new e(new Dt(0,0))}static max(){return new e(new Dt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var eu=class e{constructor(t,n,i){n===void 0?n=0:n>t.length&&P(),i===void 0?i=t.length-n:i>t.length-n&&P(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let i=Math.min(t.length,n.length);for(let r=0;r<i;r++){let o=t.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return t.length<n.length?-1:t.length>n.length?1:0}},lt=class e extends eu{construct(t,n,i){return new e(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let n=[];for(let i of t){if(i.indexOf("//")>=0)throw new w(b.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new e(n)}static emptyPath(){return new e([])}},iD=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vt=class e extends eu{construct(t,n,i){return new e(t,n,i)}static isValidIdentifier(t){return iD.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new e(["__name__"])}static fromServerFormat(t){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new w(b.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},s=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new w(b.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new w(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=c,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new w(b.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}};var A=class e{constructor(t){this.path=t}static fromPath(t){return new e(lt.fromString(t))}static fromName(t){return new e(lt.fromString(t).popFirst(5))}static empty(){return new e(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&lt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return lt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new e(new lt(t.slice()))}};var mo=class{constructor(t,n,i,r){this.indexId=t,this.collectionGroup=n,this.fields=i,this.indexState=r}};function rm(e){return e.fields.find(t=>t.kind===2)}function Zi(e){return e.fields.filter(t=>t.kind!==2)}mo.UNKNOWN_ID=-1;var lo=class{constructor(t,n){this.fieldPath=t,this.kind=n}};var la=class e{constructor(t,n){this.sequenceNumber=t,this.offset=n}static empty(){return new e(0,Le.min())}};function iE(e,t){let n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=B.fromTimestamp(i===1e9?new Dt(n+1,0):new Dt(n,i));return new Le(r,A.empty(),t)}function rE(e){return new Le(e.readTime,e.key,-1)}var Le=class e{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new e(B.min(),A.empty(),-1)}static max(){return new e(B.max(),A.empty(),-1)}};function Xp(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=A.comparator(e.documentKey,t.documentKey),n!==0?n:G(e.largestBatchId,t.largestBatchId))}var oE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nu=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function xi(e){return p(this,null,function*(){if(e.code!==b.FAILED_PRECONDITION||e.message!==oE)throw e;I("LocalStore","Unexpectedly lost primary lease")})}var m=class e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&P(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):e.reject(n)}static resolve(t){return new e((n,i)=>{n(t)})}static reject(t){return new e((n,i)=>{i(t)})}static waitFor(t){return new e((n,i)=>{let r=0,o=0,s=!1;t.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&n()},c=>i(c))}),s=!0,o===r&&n()})}static or(t){let n=e.resolve(!1);for(let i of t)n=n.next(r=>r?e.resolve(r):i());return n}static forEach(t,n){let i=[];return t.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(t,n){return new e((i,r)=>{let o=t.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(t[l]).next(u=>{s[l]=u,++a,a===o&&i(s)},u=>r(u))}})}static doWhile(t,n){return new e((i,r)=>{let o=()=>{t()===!0?n().next(()=>{o()},r):i()};o()})}};var iu=class e{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new Gt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new rr(t,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=Zp(i.target.error);this.V.reject(new rr(t,r))}}static open(t,n,i,r){try{return new e(n,t.transaction(r,i))}catch(o){throw new rr(n,o)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(I("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){let n=this.transaction.objectStore(t);return new sm(n)}},Wn=class e{constructor(t,n,i){this.name=t,this.version=n,this.p=i,e.S(ms())===12.2&&Ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return I("SimpleDb","Removing database:",t),Ji(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!Lc())return!1;if(e.C())return!0;let t=ms(),n=e.S(t),i=0<n&&n<10,r=e.v(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){let n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(t){let n=t.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(t){return p(this,null,function*(){return this.db||(I("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;n(s)},r.onblocked=()=>{i(new rr(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new w(b.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new w(b.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new rr(t,s))},r.onupgradeneeded=o=>{I("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,r.transaction,o.oldVersion,this.version).next(()=>{I("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(t){this.L=t,this.db&&(this.db.onversionchange=n=>t(n))}runTransaction(t,n,i,r){return p(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(t);let a=iu.open(this.db,t,o?"readonly":"readwrite",i),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),m.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(I("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},om=class{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Ji(this.k.delete())}},rr=class extends w{constructor(t,n){super(b.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Ci(e){return e.name==="IndexedDbTransactionError"}var sm=class{constructor(t){this.store=t}put(t,n){let i;return n!==void 0?(I("SimpleDb","PUT",this.store.name,t,n),i=this.store.put(n,t)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Ji(i)}add(t){return I("SimpleDb","ADD",this.store.name,t,t),Ji(this.store.add(t))}get(t){return Ji(this.store.get(t)).next(n=>(n===void 0&&(n=null),I("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return I("SimpleDb","DELETE",this.store.name,t),Ji(this.store.delete(t))}count(){return I("SimpleDb","COUNT",this.store.name),Ji(this.store.count())}W(t,n){let i=this.options(t,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new m((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(i),s=[];return this.G(o,(a,c)=>{s.push(c)}).next(()=>s)}}j(t,n){let i=this.store.getAll(t,n===null?void 0:n);return new m((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}H(t,n){I("SimpleDb","DELETE ALL",this.store.name);let i=this.options(t,n);i.J=!1;let r=this.cursor(i);return this.G(r,(o,s,a)=>a.delete())}Y(t,n){let i;n?i=t:(i={},n=t);let r=this.cursor(i);return this.G(r,n)}Z(t){let n=this.cursor({});return new m((i,r)=>{n.onerror=o=>{let s=Zp(o.target.error);r(s)},n.onsuccess=o=>{let s=o.target.result;s?t(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}G(t,n){let i=[];return new m((r,o)=>{t.onerror=s=>{o(s.target.error)},t.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let c=new om(a),l=n(a.primaryKey,a.value,c);if(l instanceof m){let u=l.catch(d=>(c.done(),m.reject(d)));i.push(u)}c.isDone?r():c.$===null?a.continue():a.continue(c.$)}}).next(()=>m.waitFor(i))}options(t,n){let i;return t!==void 0&&(typeof t=="string"?i=t:n=t),{index:i,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){let i=this.store.index(t.index);return t.J?i.openKeyCursor(t.range,n):i.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}};function Ji(e){return new m((t,n)=>{e.onsuccess=i=>{let r=i.target.result;t(r)},e.onerror=i=>{let r=Zp(i.target.error);n(r)}})}var nw=!1;function Zp(e){let t=Wn.S(ms());if(t>=12.2&&t<13){let n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){let i=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nw||(nw=!0,setTimeout(()=>{throw i},0)),i}}return e}var am=class{constructor(t,n){this.asyncQueue=t,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(t){I("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,()=>p(this,null,function*(){this.task=null;try{I("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){Ci(n)?I("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield xi(n)}yield this.ee(6e4)}))}},cm=class{constructor(t,n){this.localStore=t,this.persistence=n}te(t=50){return p(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,t))})}ne(t,n){let i=new Set,r=n,o=!0;return m.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(s=>{if(s!==null&&!i.has(s))return I("IndexBackfiller",`Processing collection: ${s}`),this.re(t,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>n-r)}re(t,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,n).next(r=>this.localStore.localDocuments.getNextDocuments(t,n,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next(()=>this.ie(r,o)).next(a=>(I("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,n,a))).next(()=>s.size)}))}ie(t,n){let i=t;return n.changes.forEach((r,o)=>{let s=rE(o);Xp(s,i)>0&&(i=s)}),new Le(i.readTime,i.documentKey,Math.max(n.batchId,t.largestBatchId))}};var Ae=(()=>{class e{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return e._e=-1,e})();function ka(e){return e==null}function ua(e){return e===0&&1/e==-1/0}function sE(e){return typeof e=="number"&&Number.isInteger(e)&&!ua(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function _e(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=iw(t)),t=rD(e.get(n),t);return iw(t)}function rD(e,t){let n=t,i=e.length;for(let r=0;r<i;r++){let o=e.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function iw(e){return e+""}function yn(e){let t=e.length;if(j(t>=2),t===2)return j(e.charAt(0)===""&&e.charAt(1)===""),lt.emptyPath();let n=t-2,i=[],r="";for(let o=0;o<t;){let s=e.indexOf("",o);switch((s<0||s>n)&&P(),e.charAt(s+1)){case"":let a=e.substring(o,s),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=e.substring(o,s),r+="\0";break;case"":r+=e.substring(o,s+1);break;default:P()}o=s+2}return new lt(i)}var rw=["userId","batchId"];function Hl(e,t){return[e,_e(t)]}function aE(e,t,n){return[e,_e(t),n]}var oD={},sD=["prefixPath","collectionGroup","readTime","documentId"],aD=["prefixPath","collectionGroup","documentId"],cD=["collectionGroup","readTime","prefixPath","documentId"],lD=["canonicalId","targetId"],uD=["targetId","path"],dD=["path","targetId"],hD=["collectionId","parent"],fD=["indexId","uid"],mD=["uid","sequenceNumber"],pD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gD=["indexId","uid","orderedDocumentKey"],bD=["userId","collectionPath","documentId"],_D=["userId","collectionPath","largestBatchId"],vD=["userId","collectionGroup","largestBatchId"],cE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yD=[...cE,"documentOverlays"],lE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uE=lE,dE=[...uE,"indexConfiguration","indexState","indexEntries"],wD=dE;var da=class extends nu{constructor(t,n){super(),this.ae=t,this.currentSequenceNumber=n}};function Jt(e,t){let n=D(e);return Wn.M(n.ae,t)}function ow(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function gr(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function hE(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var It=class e{constructor(t,n){this.comparator=t,this.root=n||En.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,En.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){let t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new co(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new co(this.root,t,this.comparator,!1)}getReverseIterator(){return new co(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new co(this.root,t,this.comparator,!0)}},co=class{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?i(t.key,n):1,n&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},En=class e{constructor(t,n,i,r,o){this.key=t,this.value=n,this.color=i??e.RED,this.left=r??e.EMPTY,this.right=o??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,o){return new e(t??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this,o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return e.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw P();let t=this.left.check();if(t!==this.right.check())throw P();return t+(this.isRed()?0:1)}};En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw P()}get value(){throw P()}get color(){throw P()}get left(){throw P()}get right(){throw P()}copy(t,n,i,r,o){return this}insert(t,n,i){return new En(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _t=class e{constructor(t){this.comparator=t,this.data=new It(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new ru(this.data.getIterator())}getIteratorFrom(t){return new ru(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(n=>{t.push(n)}),t}toString(){let t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){let n=new e(this.comparator);return n.data=t,n}},ru=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Jr(e){return e.hasNext()?e.getNext():void 0}var Se=class e{constructor(t){this.fields=t,t.sort(Vt.comparator)}static empty(){return new e([])}unionWith(t){let n=new _t(Vt.comparator);for(let i of this.fields)n=n.add(i);for(let i of t)n=n.add(i);return new e(n.toArray())}covers(t){for(let n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return fo(this.fields,t.fields,(n,i)=>n.isEqual(i))}};var ou=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function fE(){return typeof atob<"u"}var Zt=class e{constructor(t){this.binaryString=t}static fromBase64String(t){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ou("Invalid base64 string: "+o):o}}(t);return new e(n)}static fromUint8Array(t){let n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(t);return new e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return G(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Zt.EMPTY_BYTE_STRING=new Zt("");var ED=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hn(e){if(j(!!e),typeof e=="string"){let t=0,n=ED.exec(e);if(j(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:kt(e.seconds),nanos:kt(e.nanos)}}function kt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function gi(e){return typeof e=="string"?Zt.fromBase64String(e):Zt.fromUint8Array(e)}function Qu(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jp(e){let t=e.mapValue.fields.__previous_value__;return Qu(t)?Jp(t):t}function ha(e){let t=Hn(e.mapValue.fields.__local_write_time__.timestampValue);return new Dt(t.seconds,t.nanos)}var lm=class{constructor(t,n,i,r,o,s,a,c,l){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},bi=class e{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new e("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};var fi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Kl={nullValue:"NULL_VALUE"};function or(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qu(e)?4:mE(e)?9007199254740991:10:P()}function Cn(e,t){if(e===t)return!0;let n=or(e);if(n!==or(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ha(e).isEqual(ha(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Hn(r.timestampValue),a=Hn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,o){return gi(r.bytesValue).isEqual(gi(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,o){return kt(r.geoPointValue.latitude)===kt(o.geoPointValue.latitude)&&kt(r.geoPointValue.longitude)===kt(o.geoPointValue.longitude)}(e,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return kt(r.integerValue)===kt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=kt(r.doubleValue),a=kt(o.doubleValue);return s===a?ua(s)===ua(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return fo(e.arrayValue.values||[],t.arrayValue.values||[],Cn);case 10:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(ow(s)!==ow(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Cn(s[c],a[c])))return!1;return!0}(e,t);default:return P()}}function fa(e,t){return(e.values||[]).find(n=>Cn(n,t))!==void 0}function _i(e,t){if(e===t)return 0;let n=or(e),i=or(t);if(n!==i)return G(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return G(e.booleanValue,t.booleanValue);case 2:return function(o,s){let a=kt(o.integerValue||o.doubleValue),c=kt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return sw(e.timestampValue,t.timestampValue);case 4:return sw(ha(e),ha(t));case 5:return G(e.stringValue,t.stringValue);case 6:return function(o,s){let a=gi(o),c=gi(s);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=G(a[l],c[l]);if(u!==0)return u}return G(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,s){let a=G(kt(o.latitude),kt(s.latitude));return a!==0?a:G(kt(o.longitude),kt(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=_i(a[l],c[l]);if(u)return u}return G(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(o,s){if(o===fi.mapValue&&s===fi.mapValue)return 0;if(o===fi.mapValue)return 1;if(s===fi.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=G(c[d],u[d]);if(h!==0)return h;let f=_i(a[c[d]],l[u[d]]);if(f!==0)return f}return G(c.length,u.length)}(e.mapValue,t.mapValue);default:throw P()}}function sw(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return G(e,t);let n=Hn(e),i=Hn(t),r=G(n.seconds,i.seconds);return r!==0?r:G(n.nanos,i.nanos)}function po(e){return um(e)}function um(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){let i=Hn(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return gi(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return A.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=um(o);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${um(n.fields[s])}`;return r+"}"}(e.mapValue):P()}function sr(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function dm(e){return!!e&&"integerValue"in e}function ma(e){return!!e&&"arrayValue"in e}function aw(e){return!!e&&"nullValue"in e}function cw(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ql(e){return!!e&&"mapValue"in e}function ra(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return gr(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=ra(i)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ra(e.arrayValue.values[n]);return t}return Object.assign({},e)}function mE(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function ID(e){return"nullValue"in e?Kl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?sr(bi.empty(),A.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:P()}function xD(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?sr(bi.empty(),A.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?fi:P()}function lw(e,t){let n=_i(e.value,t.value);return n!==0?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function uw(e,t){let n=_i(e.value,t.value);return n!==0?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var he=class e{constructor(t){this.value=t}static empty(){return new e({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Ql(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ra(n)}setAll(t){let n=Vt.emptyPath(),i={},r=[];t.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}s?i[a.lastSegment()]=ra(s):r.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(t){let n=this.field(t.popLast());Ql(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Cn(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];Ql(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){gr(n,(r,o)=>t[r]=o);for(let r of i)delete t[r]}clone(){return new e(ra(this.value))}};function pE(e){let t=[];return gr(e.fields,(n,i)=>{let r=new Vt([n]);if(Ql(i)){let o=pE(i.mapValue).fields;if(o.length===0)t.push(r);else for(let s of o)t.push(r.child(s))}else t.push(r)}),new Se(t)}var Wt=class e{constructor(t,n,i,r,o,s,a){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new e(t,0,B.min(),B.min(),B.min(),he.empty(),0)}static newFoundDocument(t,n,i,r){return new e(t,1,n,B.min(),i,r,0)}static newNoDocument(t,n){return new e(t,2,n,B.min(),B.min(),he.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,B.min(),B.min(),he.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(B.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=he.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=he.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=B.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Tn=class{constructor(t,n){this.position=t,this.inclusive=n}};function dw(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){let o=t[r],s=e.position[r];if(o.field.isKeyField()?i=A.comparator(A.fromName(s.referenceValue),n.key):i=_i(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function hw(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Cn(e.position[n],t.position[n]))return!1;return!0}var ar=class{constructor(t,n="asc"){this.field=t,this.dir=n}};function CD(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var su=class{},rt=class e extends su{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new mm(t,n,i):n==="array-contains"?new bm(t,i):n==="in"?new au(t,i):n==="not-in"?new _m(t,i):n==="array-contains-any"?new vm(t,i):new e(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new pm(t,i):new gm(t,i)}matches(t){let n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_i(n,this.value)):n!==null&&or(this.value)===or(n)&&this.matchesComparison(_i(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return P()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gt=class e extends su{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new e(t,n)}matches(t){return go(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function go(e){return e.op==="and"}function hm(e){return e.op==="or"}function tg(e){return gE(e)&&go(e)}function gE(e){for(let t of e.filters)if(t instanceof gt)return!1;return!0}function fm(e){if(e instanceof rt)return e.field.canonicalString()+e.op.toString()+po(e.value);if(tg(e))return e.filters.map(t=>fm(t)).join(",");{let t=e.filters.map(n=>fm(n)).join(",");return`${e.op}(${t})`}}function bE(e,t){return e instanceof rt?function(i,r){return r instanceof rt&&i.op===r.op&&i.field.isEqual(r.field)&&Cn(i.value,r.value)}(e,t):e instanceof gt?function(i,r){return r instanceof gt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&bE(s,r.filters[a]),!0):!1}(e,t):void P()}function _E(e,t){let n=e.filters.concat(t);return gt.create(n,e.op)}function vE(e){return e instanceof rt?function(n){return`${n.field.canonicalString()} ${n.op} ${po(n.value)}`}(e):e instanceof gt?function(n){return n.op.toString()+" {"+n.getFilters().map(vE).join(" ,")+"}"}(e):"Filter"}var mm=class extends rt{constructor(t,n,i){super(t,n,i),this.key=A.fromName(i.referenceValue)}matches(t){let n=A.comparator(t.key,this.key);return this.matchesComparison(n)}},pm=class extends rt{constructor(t,n){super(t,"in",n),this.keys=yE("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}},gm=class extends rt{constructor(t,n){super(t,"not-in",n),this.keys=yE("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}};function yE(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>A.fromName(i.referenceValue))}var bm=class extends rt{constructor(t,n){super(t,"array-contains",n)}matches(t){let n=t.data.field(this.field);return ma(n)&&fa(n.arrayValue,this.value)}},au=class extends rt{constructor(t,n){super(t,"in",n)}matches(t){let n=t.data.field(this.field);return n!==null&&fa(this.value.arrayValue,n)}},_m=class extends rt{constructor(t,n){super(t,"not-in",n)}matches(t){if(fa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=t.data.field(this.field);return n!==null&&!fa(this.value.arrayValue,n)}},vm=class extends rt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){let n=t.data.field(this.field);return!(!ma(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>fa(this.value.arrayValue,i))}};var ym=class{constructor(t,n=null,i=[],r=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function wm(e,t=null,n=[],i=[],r=null,o=null,s=null){return new ym(e,t,n,i,r,o,s)}function cr(e){let t=D(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>fm(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),ka(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>po(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>po(i)).join(",")),t.ce=n}return t.ce}function Pa(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!CD(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bE(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hw(e.startAt,t.startAt)&&hw(e.endAt,t.endAt)}function cu(e){return A.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function lu(e,t){return e.filters.filter(n=>n instanceof rt&&n.field.isEqual(t))}function fw(e,t,n){let i=Kl,r=!0;for(let o of lu(e,t)){let s=Kl,a=!0;switch(o.op){case"<":case"<=":s=ID(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Kl}lw({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(n!==null){for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){let s=n.position[o];lw({value:i,inclusive:r},{value:s,inclusive:n.inclusive})<0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}function mw(e,t,n){let i=fi,r=!0;for(let o of lu(e,t)){let s=fi,a=!0;switch(o.op){case">=":case">":s=xD(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=fi}uw({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(n!==null){for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){let s=n.position[o];uw({value:i,inclusive:r},{value:s,inclusive:n.inclusive})>0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}var en=class{constructor(t,n=null,i=[],r=[],o=null,s="F",a=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function wE(e,t,n,i,r,o,s,a){return new en(e,t,n,i,r,o,s,a)}function ko(e){return new en(e)}function pw(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function eg(e){return e.collectionGroup!==null}function uo(e){let t=D(e);if(t.le===null){t.le=[];let n=new Set;for(let o of t.explicitOrderBy)t.le.push(o),n.add(o.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new _t(Vt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||t.le.push(new ar(o,i))}),n.has(Vt.keyField().canonicalString())||t.le.push(new ar(Vt.keyField(),i))}return t.le}function ve(e){let t=D(e);return t.he||(t.he=TD(t,uo(e))),t.he}function TD(e,t){if(e.limitType==="F")return wm(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new ar(r.field,o)});let n=e.endAt?new Tn(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Tn(e.startAt.position,e.startAt.inclusive):null;return wm(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Em(e,t){let n=e.filters.concat([t]);return new en(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function uu(e,t,n){return new en(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ma(e,t){return Pa(ve(e),ve(t))&&e.limitType===t.limitType}function EE(e){return`${cr(ve(e))}|lt:${e.limitType}`}function ro(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>vE(r)).join(", ")}]`),ka(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>po(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>po(r)).join(",")),`Target(${i})`}(ve(e))}; limitType=${e.limitType})`}function Oa(e,t){return t.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):A.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(e,t)&&function(i,r){for(let o of uo(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(e,t)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(s,a,c){let l=dw(s,a,c);return s.inclusive?l<=0:l<0}(i.startAt,uo(i),r)||i.endAt&&!function(s,a,c){let l=dw(s,a,c);return s.inclusive?l>=0:l>0}(i.endAt,uo(i),r))}(e,t)}function IE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xE(e){return(t,n)=>{let i=!1;for(let r of uo(e)){let o=AD(r,t,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function AD(e,t,n){let i=e.field.isKeyField()?A.comparator(t.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?_i(c,l):P()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return P()}}var An=class{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){let n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){let n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){gr(this.inner,(n,i)=>{for(let[r,o]of i)t(r,o)})}isEmpty(){return hE(this.inner)}size(){return this.innerSize}};var SD=new It(A.comparator);function Ie(){return SD}var CE=new It(A.comparator);function na(...e){let t=CE;for(let n of e)t=t.insert(n.key,n);return t}function TE(e){let t=CE;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function wn(){return oa()}function AE(){return oa()}function oa(){return new An(e=>e.toString(),(e,t)=>e.isEqual(t))}var DD=new It(A.comparator),RD=new _t(A.comparator);function Q(...e){let t=RD;for(let n of e)t=t.add(n);return t}var kD=new _t(G);function ng(){return kD}function SE(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ua(t)?"-0":t}}function DE(e){return{integerValue:""+e}}function RE(e,t){return sE(t)?DE(t):SE(e,t)}var bo=class{constructor(){this._=void 0}};function PD(e,t,n){return e instanceof vi?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Qu(o)&&(o=Jp(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,t):e instanceof Kn?PE(e,t):e instanceof Qn?ME(e,t):function(r,o){let s=kE(r,o),a=gw(s)+gw(r.Ie);return dm(s)&&dm(r.Ie)?DE(a):SE(r.serializer,a)}(e,t)}function MD(e,t,n){return e instanceof Kn?PE(e,t):e instanceof Qn?ME(e,t):n}function kE(e,t){return e instanceof yi?function(i){return dm(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}var vi=class extends bo{},Kn=class extends bo{constructor(t){super(),this.elements=t}};function PE(e,t){let n=OE(t);for(let i of e.elements)n.some(r=>Cn(r,i))||n.push(i);return{arrayValue:{values:n}}}var Qn=class extends bo{constructor(t){super(),this.elements=t}};function ME(e,t){let n=OE(t);for(let i of e.elements)n=n.filter(r=>!Cn(r,i));return{arrayValue:{values:n}}}var yi=class extends bo{constructor(t,n){super(),this.serializer=t,this.Ie=n}};function gw(e){return kt(e.integerValue||e.doubleValue)}function OE(e){return ma(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var lr=class{constructor(t,n){this.field=t,this.transform=n}};function OD(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Kn&&r instanceof Kn||i instanceof Qn&&r instanceof Qn?fo(i.elements,r.elements,Cn):i instanceof yi&&r instanceof yi?Cn(i.Ie,r.Ie):i instanceof vi&&r instanceof vi}(e.transform,t.transform)}var Im=class{constructor(t,n){this.version=t,this.transformResults=n}},Pt=class e{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Yl(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var _o=class{};function NE(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Ei(e.key,Pt.none()):new wi(e.key,e.data,Pt.none());{let n=e.data,i=he.empty(),r=new _t(Vt.comparator);for(let o of t.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new nn(e.key,i,new Se(r.toArray()),Pt.none())}}function ND(e,t,n){e instanceof wi?function(r,o,s){let a=r.value.clone(),c=_w(r.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,n):e instanceof nn?function(r,o,s){if(!Yl(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=_w(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(FE(r)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(e,t,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function sa(e,t,n,i){return e instanceof wi?function(o,s,a,c){if(!Yl(o.precondition,s))return a;let l=o.value.clone(),u=vw(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(e,t,n,i):e instanceof nn?function(o,s,a,c){if(!Yl(o.precondition,s))return a;let l=vw(o.fieldTransforms,c,s),u=s.data;return u.setAll(FE(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(e,t,n,i):function(o,s,a){return Yl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(e,t,n)}function FD(e,t){let n=null;for(let i of e.fieldTransforms){let r=t.data.field(i.field),o=kE(i.transform,r||null);o!=null&&(n===null&&(n=he.empty()),n.set(i.field,o))}return n||null}function bw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&fo(i,r,(o,s)=>OD(o,s))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var wi=class extends _o{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},nn=class extends _o{constructor(t,n,i,r,o=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function FE(e){let t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=e.data.field(n);t.set(n,i)}}),t}function _w(e,t,n){let i=new Map;j(e.length===n.length);for(let r=0;r<n.length;r++){let o=e[r],s=o.transform,a=t.data.field(o.field);i.set(o.field,MD(s,a,n[r]))}return i}function vw(e,t,n){let i=new Map;for(let r of e){let o=r.transform,s=n.data.field(r.field);i.set(r.field,PD(o,s,t))}return i}var Ei=class extends _o{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},pa=class extends _o{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ga=class{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(t.key)&&ND(o,t,i[r])}}applyToLocalView(t,n){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(n=sa(i,t,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(n=sa(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){let i=AE();return this.mutations.forEach(r=>{let o=t.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(r.key)?null:a;let c=NE(s,a);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(B.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Q())}isEqual(t){return this.batchId===t.batchId&&fo(this.mutations,t.mutations,(n,i)=>bw(n,i))&&fo(this.baseMutations,t.baseMutations,(n,i)=>bw(n,i))}},xm=class e{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){j(t.mutations.length===i.length);let r=function(){return DD}(),o=t.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new e(t,n,i,r)}};var ba=class{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Cm=class{constructor(t,n){this.count=t,this.unchangedNames=n}};var zt,ct;function VE(e){switch(e){default:return P();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function LE(e){if(e===void 0)return Ft("GRPC error has no .code"),b.UNKNOWN;switch(e){case zt.OK:return b.OK;case zt.CANCELLED:return b.CANCELLED;case zt.UNKNOWN:return b.UNKNOWN;case zt.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case zt.INTERNAL:return b.INTERNAL;case zt.UNAVAILABLE:return b.UNAVAILABLE;case zt.UNAUTHENTICATED:return b.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case zt.NOT_FOUND:return b.NOT_FOUND;case zt.ALREADY_EXISTS:return b.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return b.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case zt.ABORTED:return b.ABORTED;case zt.OUT_OF_RANGE:return b.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return b.UNIMPLEMENTED;case zt.DATA_LOSS:return b.DATA_LOSS;default:return P()}}(ct=zt||(zt={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";var yw=null;function jE(){return new TextEncoder}var VD=new Yi([4294967295,4294967295],0);function ww(e){let t=jE().encode(e),n=new tw;return n.update(t),new Uint8Array(n.digest())}function Ew(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Yi([n,i],0),new Yi([r,o],0)]}var Tm=class e{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ir(`Invalid padding: ${n}`);if(i<0)throw new ir(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ir(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new ir(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=Yi.fromNumber(this.Te)}de(t,n,i){let r=t.add(n.multiply(Yi.fromNumber(i)));return r.compare(VD)===1&&(r=new Yi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;let n=ww(t),[i,r]=Ew(n);for(let o=0;o<this.hashCount;o++){let s=this.de(i,r,o);if(!this.Ae(s))return!1}return!0}static create(t,n,i){let r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new e(o,r,n);return i.forEach(a=>s.insert(a)),s}insert(t){if(this.Te===0)return;let n=ww(t),[i,r]=Ew(n);for(let o=0;o<this.hashCount;o++){let s=this.de(i,r,o);this.Re(s)}}Re(t){let n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}},ir=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var _a=class e{constructor(t,n,i,r,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n,i){let r=new Map;return r.set(t,va.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new e(B.min(),r,new It(G),Ie(),Q())}},va=class e{constructor(t,n,i,r,o){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new e(i,n,Q(),Q(),Q())}};var ho=class{constructor(t,n,i,r){this.Ve=t,this.removedTargetIds=n,this.key=i,this.me=r}},du=class{constructor(t,n){this.targetId=t,this.fe=n}},hu=class{constructor(t,n,i=Zt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}},fu=class{constructor(){this.ge=0,this.pe=xw(),this.ye=Zt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=Q(),n=Q(),i=Q();return this.pe.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:P()}}),new va(this.ye,this.we,t,n,i)}Fe(){this.Se=!1,this.pe=xw()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,j(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},Am=class{constructor(t){this.Be=t,this.ke=new Map,this.qe=Ie(),this.Qe=Iw(),this.Ke=new It(G)}$e(t){for(let n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(let n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{let i=this.ze(n);switch(t.state){case 0:this.je(n)&&i.Ce(t.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(t.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(n);break;case 3:this.je(n)&&(i.Le(),i.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),i.Ce(t.resumeToken));break;default:P()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((i,r)=>{this.je(r)&&n(r)})}Je(t){let n=t.targetId,i=t.fe.count,r=this.Ye(n);if(r){let o=r.target;if(cu(o))if(i===0){let s=new A(o.path);this.We(n,s,Wt.newNoDocument(s,B.min()))}else j(i===1);else{let s=this.Ze(n);if(s!==i){let a=this.Xe(t),c=a?this.et(a,t,s):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}yw?.tt(function(u,d,h,f,E){var v,x,V,$,O,X;let tt={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},dt=d.unchangedNames;return dt&&(tt.bloomFilter={applied:E===0,hashCount:(v=dt?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:($=(V=(x=dt?.bits)===null||x===void 0?void 0:x.bitmap)===null||V===void 0?void 0:V.length)!==null&&$!==void 0?$:0,padding:(X=(O=dt?.bits)===null||O===void 0?void 0:O.padding)!==null&&X!==void 0?X:0,mightContain:Bt=>{var cn;return(cn=f?.mightContain(Bt))!==null&&cn!==void 0&&cn}}),tt}(s,t.fe,this.Be.nt(),a,c))}}}}Xe(t){let n=t.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,s,a;try{s=gi(i).toUint8Array()}catch(c){if(c instanceof ou)return Ve("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Tm(s,r,o)}catch(c){return Ve(c instanceof ir?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(t,n,i){return n.fe.count===i-this.rt(t,n.targetId)?0:2}rt(t,n){let i=this.Be.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.We(n,o,null),r++)}),r}it(t){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&cu(a.target)){let c=new A(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,Wt.newNoDocument(c,t))}o.De&&(n.set(s,o.ve()),o.Fe())}});let i=Q();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(t));let r=new _a(t,n,this.Ke,this.qe,i);return this.qe=Ie(),this.Qe=Iw(),this.Ke=new It(G),r}Ue(t,n){if(!this.je(t))return;let i=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,i),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,i){if(!this.je(t))return;let r=this.ze(t);this.st(t,n)?r.Me(n,1):r.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),i&&(this.qe=this.qe.insert(n,i))}removeTarget(t){this.ke.delete(t)}Ze(t){let n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new fu,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new _t(G),this.Qe=this.Qe.insert(t,n)),n}je(t){let n=this.Ye(t)!==null;return n||I("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){let n=this.ke.get(t);return n&&n.be?null:this.Be._t(t)}He(t){this.ke.set(t,new fu),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}};function Iw(){return new It(A.comparator)}function xw(){return new It(A.comparator)}var LD={asc:"ASCENDING",desc:"DESCENDING"},jD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BD={and:"AND",or:"OR"},Sm=class{constructor(t,n){this.databaseId=t,this.useProto3Json=n}};function Dm(e,t){return e.useProto3Json||ka(t)?t:{value:t}}function vo(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function BE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function UD(e,t){return vo(e,t.toTimestamp())}function Lt(e){return j(!!e),B.fromTimestamp(function(n){let i=Hn(n);return new Dt(i.seconds,i.nanos)}(e))}function ig(e,t){return Rm(e,t).canonicalString()}function Rm(e,t){let n=function(r){return new lt(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function UE(e){let t=lt.fromString(e);return j(XE(t)),t}function ya(e,t){return ig(e.databaseId,t.path)}function In(e,t){let n=UE(t);if(n.get(1)!==e.databaseId.projectId)throw new w(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new w(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new A(qE(n))}function zE(e,t){return ig(e.databaseId,t)}function $E(e){let t=UE(e);return t.length===4?lt.emptyPath():qE(t)}function km(e){return new lt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qE(e){return j(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Cw(e,t,n){return{name:ya(e,t),fields:n.value.mapValue.fields}}function GE(e,t,n){let i=In(e,t.name),r=Lt(t.updateTime),o=t.createTime?Lt(t.createTime):B.min(),s=new he({mapValue:{fields:t.fields}}),a=Wt.newFoundDocument(i,r,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function zD(e,t){return"found"in t?function(i,r){j(!!r.found),r.found.name,r.found.updateTime;let o=In(i,r.found.name),s=Lt(r.found.updateTime),a=r.found.createTime?Lt(r.found.createTime):B.min(),c=new he({mapValue:{fields:r.found.fields}});return Wt.newFoundDocument(o,s,a,c)}(e,t):"missing"in t?function(i,r){j(!!r.missing),j(!!r.readTime);let o=In(i,r.missing),s=Lt(r.readTime);return Wt.newNoDocument(o,s)}(e,t):P()}function $D(e,t){let n;if("targetChange"in t){t.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:P()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(l,u){return l.useProto3Json?(j(u===void 0||typeof u=="string"),Zt.fromBase64String(u||"")):(j(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Zt.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(l){let u=l.code===void 0?b.UNKNOWN:LE(l.code);return new w(u,l.message||"")}(s);n=new hu(i,r,o,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=In(e,i.document.name),o=Lt(i.document.updateTime),s=i.document.createTime?Lt(i.document.createTime):B.min(),a=new he({mapValue:{fields:i.document.fields}}),c=Wt.newFoundDocument(r,o,s,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new ho(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=In(e,i.document),o=i.readTime?Lt(i.readTime):B.min(),s=Wt.newNoDocument(r,o),a=i.removedTargetIds||[];n=new ho([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=In(e,i.document),o=i.removedTargetIds||[];n=new ho([],o,r,null)}else{if(!("filter"in t))return P();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new Cm(r,o),a=i.targetId;n=new du(a,s)}}return n}function wa(e,t){let n;if(t instanceof wi)n={update:Cw(e,t.key,t.value)};else if(t instanceof Ei)n={delete:ya(e,t.key)};else if(t instanceof nn)n={update:Cw(e,t.key,t.data),updateMask:QD(t.fieldMask)};else{if(!(t instanceof pa))return P();n={verify:ya(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof vi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Kn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yi)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw P()}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:UD(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:P()}(e,t.precondition)),n}function Pm(e,t){let n=t.currentDocument?function(o){return o.updateTime!==void 0?Pt.updateTime(Lt(o.updateTime)):o.exists!==void 0?Pt.exists(o.exists):Pt.none()}(t.currentDocument):Pt.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,a){let c=null;if("setToServerValue"in a)j(a.setToServerValue==="REQUEST_TIME"),c=new vi;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new Kn(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new Qn(u)}else"increment"in a?c=new yi(s,a.increment):P();let l=Vt.fromServerFormat(a.fieldPath);return new lr(l,c)}(e,r)):[];if(t.update){t.update.name;let r=In(e,t.update.name),o=new he({mapValue:{fields:t.update.fields}});if(t.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Se(l.map(u=>Vt.fromServerFormat(u)))}(t.updateMask);return new nn(r,o,s,n,i)}return new wi(r,o,n,i)}if(t.delete){let r=In(e,t.delete);return new Ei(r,n)}if(t.verify){let r=In(e,t.verify);return new pa(r,n)}return P()}function qD(e,t){return e&&e.length>0?(j(t!==void 0),e.map(n=>function(r,o){let s=r.updateTime?Lt(r.updateTime):Lt(o);return s.isEqual(B.min())&&(s=Lt(o)),new Im(s,r.transformResults||[])}(n,t))):[]}function WE(e,t){return{documents:[zE(e,t.path)]}}function HE(e,t){let n={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=zE(e,r);let o=function(l){if(l.length!==0)return YE(gt.create(l,"and"))}(t.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:oo(h.field),direction:WD(h.dir)}}(u))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Dm(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ut:n,parent:r}}function KE(e){let t=$E(e.parent),n=e.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){j(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let o=[];n.where&&(o=function(d){let h=QE(d);return h instanceof gt&&tg(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(E){return new ar(so(E.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,ka(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Tn(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new Tn(f,h)}(n.endAt)),wE(t,r,s,o,a,"F",c,l)}function GD(e,t){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return P()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function QE(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=so(n.unaryFilter.field);return rt.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=so(n.unaryFilter.field);return rt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=so(n.unaryFilter.field);return rt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=so(n.unaryFilter.field);return rt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return P()}}(e):e.fieldFilter!==void 0?function(n){return rt.create(so(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return P()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return gt.create(n.compositeFilter.filters.map(i=>QE(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return P()}}(n.compositeFilter.op))}(e):P()}function WD(e){return LD[e]}function HD(e){return jD[e]}function KD(e){return BD[e]}function oo(e){return{fieldPath:e.canonicalString()}}function so(e){return Vt.fromServerFormat(e.fieldPath)}function YE(e){return e instanceof rt?function(n){if(n.op==="=="){if(cw(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NAN"}};if(aw(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cw(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NAN"}};if(aw(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(n.field),op:HD(n.op),value:n.value}}}(e):e instanceof gt?function(n){let i=n.getFilters().map(r=>YE(r));return i.length===1?i[0]:{compositeFilter:{op:KD(n.op),filters:i}}}(e):P()}function QD(e){let t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function XE(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}var yo=class e{constructor(t,n,i,r,o=B.min(),s=B.min(),a=Zt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var mu=class{constructor(t){this.ct=t}};function YD(e,t){let n;if(t.document)n=GE(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let i=A.fromSegments(t.noDocument.path),r=dr(t.noDocument.readTime);n=Wt.newNoDocument(i,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return P();{let i=A.fromSegments(t.unknownDocument.path),r=dr(t.unknownDocument.version);n=Wt.newUnknownDocument(i,r)}}return t.readTime&&n.setReadTime(function(r){let o=new Dt(r[0],r[1]);return B.fromTimestamp(o)}(t.readTime)),n}function Tw(e,t){let n=t.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:pu(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(o,s){return{name:ya(o,s.key),fields:s.data.value.mapValue.fields,updateTime:vo(o,s.version.toTimestamp()),createTime:vo(o,s.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:ur(t.version)};else{if(!t.isUnknownDocument())return P();i.unknownDocument={path:n.path.toArray(),version:ur(t.version)}}return i}function pu(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ur(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function dr(e){let t=new Dt(e.seconds,e.nanoseconds);return B.fromTimestamp(t)}function tr(e,t){let n=(t.baseMutations||[]).map(o=>Pm(e.ct,o));for(let o=0;o<t.mutations.length-1;++o){let s=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){let a=t.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}let i=t.mutations.map(o=>Pm(e.ct,o)),r=Dt.fromMillis(t.localWriteTimeMs);return new ga(t.batchId,r,n,i)}function ia(e){let t=dr(e.readTime),n=e.lastLimboFreeSnapshotVersion!==void 0?dr(e.lastLimboFreeSnapshotVersion):B.min(),i;return i=function(o){return o.documents!==void 0}(e.query)?function(o){return j(o.documents.length===1),ve(ko($E(o.documents[0])))}(e.query):function(o){return ve(KE(o))}(e.query),new yo(i,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Zt.fromBase64String(e.resumeToken))}function ZE(e,t){let n=ur(t.snapshotVersion),i=ur(t.lastLimboFreeSnapshotVersion),r;r=cu(t.target)?WE(e.ct,t.target):HE(e.ct,t.target).ut;let o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:cr(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function rg(e){let t=KE({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?uu(t,t.limit,"L"):t}function Hf(e,t){return new ba(t.largestBatchId,Pm(e.ct,t.overlayMutation))}function Aw(e,t){let n=t.path.lastSegment();return[e,_e(t.path.popLast()),n]}function Sw(e,t,n,i){return{indexId:e,uid:t,sequenceNumber:n,readTime:ur(i.readTime),documentKey:_e(i.documentKey.path),largestBatchId:i.largestBatchId}}var Mm=class{getBundleMetadata(t,n){return Dw(t).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:dr(o.createTime),version:o.version}}(i)})}saveBundleMetadata(t,n){return Dw(t).put(function(r){return{bundleId:r.id,createTime:ur(Lt(r.createTime)),version:r.version}}(n))}getNamedQuery(t,n){return Rw(t).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:rg(o.bundledQuery),readTime:dr(o.readTime)}}(i)})}saveNamedQuery(t,n){return Rw(t).put(function(r){return{name:r.name,readTime:ur(Lt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function Dw(e){return Jt(e,"bundles")}function Rw(e){return Jt(e,"namedQueries")}var gu=class e{constructor(t,n){this.serializer=t,this.userId=n}static lt(t,n){let i=n.uid||"";return new e(t,i)}getOverlay(t,n){return Zs(t).get(Aw(this.userId,n)).next(i=>i?Hf(this.serializer,i):null)}getOverlays(t,n){let i=wn();return m.forEach(n,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,n,i){let r=[];return i.forEach((o,s)=>{let a=new ba(n,s);r.push(this.ht(t,a))}),m.waitFor(r)}removeOverlaysForBatchId(t,n,i){let r=new Set;n.forEach(s=>r.add(_e(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(Zs(t).H("collectionPathOverlayIndex",a))}),m.waitFor(o)}getOverlaysForCollection(t,n,i){let r=wn(),o=_e(n),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Zs(t).W("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=Hf(this.serializer,c);r.set(l.getKey(),l)}return r})}getOverlaysForCollectionGroup(t,n,i,r){let o=wn(),s,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Zs(t).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=Hf(this.serializer,l);o.size()<r||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):u.done()}).next(()=>o)}ht(t,n){return Zs(t).put(function(r,o,s){let[a,c,l]=Aw(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:wa(r.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Zs(e){return Jt(e,"documentOverlays")}var qn=class{constructor(){}Pt(t,n){this.It(t,n),n.Tt()}It(t,n){if("nullValue"in t)this.Et(n,5);else if("booleanValue"in t)this.Et(n,10),n.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(n,15),n.dt(kt(t.integerValue));else if("doubleValue"in t){let i=kt(t.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),ua(i)?n.dt(0):n.dt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Et(n,20),typeof i=="string"&&(i=Hn(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,n),this.Vt(n);else if("bytesValue"in t)this.Et(n,30),n.ft(gi(t.bytesValue)),this.Vt(n);else if("referenceValue"in t)this.gt(t.referenceValue,n);else if("geoPointValue"in t){let i=t.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in t?mE(t)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,n),this.Vt(n)):"arrayValue"in t?(this.wt(t.arrayValue,n),this.Vt(n)):P()}Rt(t,n){this.Et(n,25),this.St(t,n)}St(t,n){n.At(t)}yt(t,n){let i=t.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(t,n){let i=t.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(t,n){this.Et(n,37),A.fromName(t).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(t,n){t.dt(n)}Vt(t){t.dt(2)}};qn.bt=new qn;function XD(e){if(e===0)return 8;let t=0;return!(e>>4)&&(t+=4,e<<=4),!(e>>6)&&(t+=2,e<<=2),!(e>>7)&&(t+=1),t}function kw(e){let t=64-function(i){let r=0;for(let o=0;o<8;++o){let s=XD(255&i[o]);if(r+=s,s!==8)break}return r}(e);return Math.ceil(t/8)}var Om=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(t){let n=t[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(t){let n=t[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(t){for(let n of t){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(t){for(let n of t){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(t){let n=this.Bt(t),i=kw(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(t){let n=this.Bt(t),i=kw(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(t){this.kt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Wt(){return this.buffer.slice(0,this.position)}Bt(t){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(t),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(t){let n=255&t;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(t){let n=255&t;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(t){this.kt(1),this.buffer[this.position++]=t}Ut(t){this.kt(1),this.buffer[this.position++]=~t}kt(t){let n=t+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},Nm=class{constructor(t){this.Gt=t}ft(t){this.Gt.Dt(t)}At(t){this.Gt.Ot(t)}dt(t){this.Gt.Lt(t)}Tt(){this.Gt.Qt()}},Fm=class{constructor(t){this.Gt=t}ft(t){this.Gt.Ft(t)}At(t){this.Gt.Nt(t)}dt(t){this.Gt.qt(t)}Tt(){this.Gt.$t()}},er=class{constructor(){this.Gt=new Om,this.zt=new Nm(this.Gt),this.jt=new Fm(this.Gt)}seed(t){this.Gt.seed(t)}Ht(t){return t===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var nr=class e{constructor(t,n,i,r){this.indexId=t,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let t=this.directionalValue.length,n=t===0||this.directionalValue[t-1]===255?t+1:t,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new e(this.indexId,this.documentKey,this.arrayValue,i)}};function li(e,t){let n=e.indexId-t.indexId;return n!==0?n:(n=Pw(e.arrayValue,t.arrayValue),n!==0?n:(n=Pw(e.directionalValue,t.directionalValue),n!==0?n:A.comparator(e.documentKey,t.documentKey)))}function Pw(e,t){for(let n=0;n<e.length&&n<t.length;++n){let i=e[n]-t[n];if(i!==0)return i}return e.length-t.length}var bu=class{constructor(t){this.Yt=new _t((n,i)=>Vt.comparator(n.field,i.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];for(let n of t.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(t){if(j(t.collectionGroup===this.collectionId),this.en)return!1;let n=rm(t);if(n!==void 0&&!this.nn(n))return!1;let i=Zi(t),r=new Set,o=0,s=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let t=new _t(Vt.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new lo(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new lo(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),n.push(new lo(i.field,i.dir==="asc"?0:1)));return new mo(mo.UNKNOWN_ID,this.collectionId,n,la.empty())}nn(t){for(let n of this.Xt)if(this.rn(n,t))return!0;return!1}rn(t,n){if(t===void 0||!t.field.isEqual(n.fieldPath))return!1;let i=t.op==="array-contains"||t.op==="array-contains-any";return n.kind===2===i}sn(t,n){return!!t.field.isEqual(n.fieldPath)&&(n.kind===0&&t.dir==="asc"||n.kind===1&&t.dir==="desc")}};function JE(e){var t,n;if(j(e instanceof rt||e instanceof gt),e instanceof rt){if(e instanceof au){let r=((n=(t=e.value.arrayValue)===null||t===void 0?void 0:t.values)===null||n===void 0?void 0:n.map(o=>rt.create(e.field,"==",o)))||[];return gt.create(r,"or")}return e}let i=e.filters.map(r=>JE(r));return gt.create(i,e.op)}function ZD(e){if(e.getFilters().length===0)return[];let t=jm(JE(e));return j(tI(t)),Vm(t)||Lm(t)?[t]:t.getFilters()}function Vm(e){return e instanceof rt}function Lm(e){return e instanceof gt&&tg(e)}function tI(e){return Vm(e)||Lm(e)||function(n){if(n instanceof gt&&hm(n)){for(let i of n.getFilters())if(!Vm(i)&&!Lm(i))return!1;return!0}return!1}(e)}function jm(e){if(j(e instanceof rt||e instanceof gt),e instanceof rt)return e;if(e.filters.length===1)return jm(e.filters[0]);let t=e.filters.map(i=>jm(i)),n=gt.create(t,e.op);return n=_u(n),tI(n)?n:(j(n instanceof gt),j(go(n)),j(n.filters.length>1),n.filters.reduce((i,r)=>og(i,r)))}function og(e,t){let n;return j(e instanceof rt||e instanceof gt),j(t instanceof rt||t instanceof gt),n=e instanceof rt?t instanceof rt?function(r,o){return gt.create([r,o],"and")}(e,t):Mw(e,t):t instanceof rt?Mw(t,e):function(r,o){if(j(r.filters.length>0&&o.filters.length>0),go(r)&&go(o))return _E(r,o.getFilters());let s=hm(r)?r:o,a=hm(r)?o:r,c=s.filters.map(l=>og(l,a));return gt.create(c,"or")}(e,t),_u(n)}function Mw(e,t){if(go(t))return _E(t,e.getFilters());{let n=t.filters.map(i=>og(e,i));return gt.create(n,"or")}}function _u(e){if(j(e instanceof rt||e instanceof gt),e instanceof rt)return e;let t=e.getFilters();if(t.length===1)return _u(t[0]);if(gE(e))return e;let n=t.map(r=>_u(r)),i=[];return n.forEach(r=>{r instanceof rt?i.push(r):r instanceof gt&&(r.op===e.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:gt.create(i,e.op)}var Bm=class{constructor(){this._n=new Ea}addToCollectionParentIndex(t,n){return this._n.add(n),m.resolve()}getCollectionParents(t,n){return m.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return m.resolve()}deleteFieldIndex(t,n){return m.resolve()}deleteAllFieldIndexes(t){return m.resolve()}createTargetIndexes(t,n){return m.resolve()}getDocumentsMatchingTarget(t,n){return m.resolve(null)}getIndexType(t,n){return m.resolve(0)}getFieldIndexes(t,n){return m.resolve([])}getNextCollectionGroupToUpdate(t){return m.resolve(null)}getMinOffset(t,n){return m.resolve(Le.min())}getMinOffsetFromCollectionGroup(t,n){return m.resolve(Le.min())}updateCollectionGroup(t,n,i){return m.resolve()}updateIndexEntries(t,n){return m.resolve()}},Ea=class{constructor(){this.index={}}add(t){let n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new _t(lt.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(t){let n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new _t(lt.comparator)).toArray()}};var $l=new Uint8Array(0),Um=class{constructor(t,n){this.databaseId=n,this.an=new Ea,this.un=new An(i=>cr(i),(i,r)=>Pa(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();t.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:i,parent:_e(r)};return Ow(t).put(o)}return m.resolve()}getCollectionParents(t,n){let i=[],r=IDBKeyRange.bound([n,""],[nE(n),""],!1,!0);return Ow(t).W(r).next(o=>{for(let s of o){if(s.collectionId!==n)break;i.push(yn(s.parent))}return i})}addFieldIndex(t,n){let i=Js(t),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let s=eo(t);return o.next(a=>{s.put(Sw(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(t,n){let i=Js(t),r=eo(t),o=to(t);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){let n=Js(t),i=to(t),r=eo(t);return n.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(t,n){return m.forEach(this.cn(n),i=>this.getIndexType(t,i).next(r=>{if(r===0||r===1){let o=new bu(i).on();if(o!=null)return this.addFieldIndex(t,o)}}))}getDocumentsMatchingTarget(t,n){let i=to(t),r=!0,o=new Map;return m.forEach(this.cn(n),s=>this.ln(t,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=Q(),a=[];return m.forEach(o,(c,l)=>{I("IndexedDbIndexManager",`Using index ${function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(X=>`${X.fieldPath}:${X.kind}`).join(",")}`}(c)} to execute ${cr(n)}`);let u=function(O,X){let tt=rm(X);if(tt===void 0)return null;for(let dt of lu(O,tt.fieldPath))switch(dt.op){case"array-contains-any":return dt.value.arrayValue.values||[];case"array-contains":return[dt.value]}return null}(l,c),d=function(O,X){let tt=new Map;for(let dt of Zi(X))for(let Bt of lu(O,dt.fieldPath))switch(Bt.op){case"==":case"in":tt.set(dt.fieldPath.canonicalString(),Bt.value);break;case"not-in":case"!=":return tt.set(dt.fieldPath.canonicalString(),Bt.value),Array.from(tt.values())}return null}(l,c),h=function(O,X){let tt=[],dt=!0;for(let Bt of Zi(X)){let cn=Bt.kind===0?fw(O,Bt.fieldPath,O.startAt):mw(O,Bt.fieldPath,O.startAt);tt.push(cn.value),dt&&(dt=cn.inclusive)}return new Tn(tt,dt)}(l,c),f=function(O,X){let tt=[],dt=!0;for(let Bt of Zi(X)){let cn=Bt.kind===0?mw(O,Bt.fieldPath,O.endAt):fw(O,Bt.fieldPath,O.endAt);tt.push(cn.value),dt&&(dt=cn.inclusive)}return new Tn(tt,dt)}(l,c),E=this.hn(c,l,h),v=this.hn(c,l,f),x=this.Pn(c,l,d),V=this.In(c.indexId,u,E,h.inclusive,v,f.inclusive,x);return m.forEach(V,$=>i.j($,n.limit).next(O=>{O.forEach(X=>{let tt=A.fromSegments(X.documentKey);s.has(tt)||(s=s.add(tt),a.push(tt))})}))}).next(()=>a)}return m.resolve(null)})}cn(t){let n=this.un.get(t);return n||(t.filters.length===0?n=[t]:n=ZD(gt.create(t.filters,"and")).map(i=>wm(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,n),n)}In(t,n,i,r,o,s,a){let c=(n!=null?n.length:1)*Math.max(i.length,o.length),l=c/(n!=null?n.length:1),u=[];for(let d=0;d<c;++d){let h=n?this.Tn(n[d/l]):$l,f=this.En(t,h,i[d%l],r),E=this.dn(t,h,o[d%l],s),v=a.map(x=>this.En(t,h,x,!0));u.push(...this.createRange(f,E,v))}return u}En(t,n,i,r){let o=new nr(t,A.empty(),n,i);return r?o:o.Jt()}dn(t,n,i,r){let o=new nr(t,A.empty(),n,i);return r?o.Jt():o}ln(t,n){let i=new bu(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(t,r).next(o=>{let s=null;for(let a of o)i.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(t,n){let i=2,r=this.cn(n);return m.forEach(r,o=>this.ln(t,o).next(s=>{s?i!==0&&s.fields.length<function(c){let l=new _t(Vt.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(t,n){let i=new er;for(let r of Zi(t)){let o=n.data.field(r.fieldPath);if(o==null)return null;let s=i.Ht(r.kind);qn.bt.Pt(o,s)}return i.Wt()}Tn(t){let n=new er;return qn.bt.Pt(t,n.Ht(0)),n.Wt()}Rn(t,n){let i=new er;return qn.bt.Pt(sr(this.databaseId,n),i.Ht(function(o){let s=Zi(o);return s.length===0?0:s[s.length-1].kind}(t))),i.Wt()}Pn(t,n,i){if(i===null)return[];let r=[];r.push(new er);let o=0;for(let s of Zi(t)){let a=i[o++];for(let c of r)if(this.Vn(n,s.fieldPath)&&ma(a))r=this.mn(r,s,a);else{let l=c.Ht(s.kind);qn.bt.Pt(a,l)}}return this.fn(r)}hn(t,n,i){return this.Pn(t,n,i.position)}fn(t){let n=[];for(let i=0;i<t.length;++i)n[i]=t[i].Wt();return n}mn(t,n,i){let r=[...t],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let c=new er;c.seed(a.Wt()),qn.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(t,n){return!!t.filters.find(i=>i instanceof rt&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(t,n){let i=Js(t),r=eo(t);return(n?i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.W()).next(o=>{let s=[];return m.forEach(o,a=>r.get([a.indexId,this.uid]).next(c=>{s.push(function(u,d){let h=d?new la(d.sequenceNumber,new Le(dr(d.readTime),new A(yn(d.documentKey)),d.largestBatchId)):la.empty(),f=u.fields.map(([E,v])=>new lo(Vt.fromServerFormat(E),v));return new mo(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:G(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(t,n,i){let r=Js(t),o=eo(t);return this.gn(t).next(s=>r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>m.forEach(a,c=>o.put(Sw(c.indexId,this.uid,s,i)))))}updateIndexEntries(t,n){let i=new Map;return m.forEach(n,(r,o)=>{let s=i.get(r.collectionGroup);return(s?m.resolve(s):this.getFieldIndexes(t,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),m.forEach(a,c=>this.pn(t,r,c).next(l=>{let u=this.yn(o,c);return l.isEqual(u)?m.resolve():this.wn(t,o,c,l,u)}))))})}Sn(t,n,i,r){return to(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(t,n,i,r){return to(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(t,n,i){let r=to(t),o=new _t(li);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(s,a)=>{o=o.add(new nr(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(t,n){let i=new _t(li),r=this.An(n,t);if(r==null)return i;let o=rm(n);if(o!=null){let s=t.data.field(o.fieldPath);if(ma(s))for(let a of s.arrayValue.values||[])i=i.add(new nr(n.indexId,t.key,this.Tn(a),r))}else i=i.add(new nr(n.indexId,t.key,$l,r));return i}wn(t,n,i,r,o){I("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,l,u,d,h){let f=c.getIterator(),E=l.getIterator(),v=Jr(f),x=Jr(E);for(;v||x;){let V=!1,$=!1;if(v&&x){let O=u(v,x);O<0?$=!0:O>0&&(V=!0)}else v!=null?$=!0:V=!0;V?(d(x),x=Jr(E)):$?(h(v),v=Jr(f)):(v=Jr(f),x=Jr(E))}}(r,o,li,a=>{s.push(this.Sn(t,n,i,a))},a=>{s.push(this.bn(t,n,i,a))}),m.waitFor(s)}gn(t){let n=1;return eo(t).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(t,n,i){i=i.sort((s,a)=>li(s,a)).filter((s,a,c)=>!a||li(s,c[a-1])!==0);let r=[];r.push(t);for(let s of i){let a=li(s,t),c=li(s,n);if(a===0)r[0]=t.Jt();else if(a>0&&c<0)r.push(s),r.push(s.Jt());else if(c>0)break}r.push(n);let o=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,$l,[]],c=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,$l,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(t,n){return li(t,n)>0}getMinOffsetFromCollectionGroup(t,n){return this.getFieldIndexes(t,n).next(Nw)}getMinOffset(t,n){return m.mapArray(this.cn(n),i=>this.ln(t,i).next(r=>r||P())).next(Nw)}};function Ow(e){return Jt(e,"collectionParents")}function to(e){return Jt(e,"indexEntries")}function Js(e){return Jt(e,"indexConfiguration")}function eo(e){return Jt(e,"indexState")}function Nw(e){j(e.length!==0);let t=e[0].indexState.offset,n=t.largestBatchId;for(let i=1;i<e.length;i++){let r=e[i].indexState.offset;Xp(r,t)<0&&(t=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Le(t.readTime,t.documentKey,n)}var Fw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fe=class e{constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function eI(e,t,n){let i=e.store("mutations"),r=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=i.Y({range:s},(u,d,h)=>(a++,h.delete()));o.push(c.next(()=>{j(a===1)}));let l=[];for(let u of n.mutations){let d=aE(t,u.key.path,n.batchId);o.push(r.delete(d)),l.push(u.key)}return m.waitFor(o).next(()=>l)}function vu(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw P();t=e.noDocument}return JSON.stringify(t).length}Fe.DEFAULT_COLLECTION_PERCENTILE=10,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fe.DEFAULT=new Fe(41943040,Fe.DEFAULT_COLLECTION_PERCENTILE,Fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fe.DISABLED=new Fe(-1,0,0);var yu=class e{constructor(t,n,i,r){this.userId=t,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(t,n,i,r){j(t.uid!=="");let o=t.isAuthenticated()?t.uid:"";return new e(o,n,i,r)}checkEmpty(t){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ui(t).Y({index:"userMutationsIndex",range:i},(r,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(t,n,i,r){let o=ao(t),s=ui(t);return s.add({}).next(a=>{j(typeof a=="number");let c=new ga(a,n,i,r),l=function(f,E,v){let x=v.baseMutations.map($=>wa(f.ct,$)),V=v.mutations.map($=>wa(f.ct,$));return{userId:E,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:x,mutations:V}}(this.serializer,this.userId,c),u=[],d=new _t((h,f)=>G(h.canonicalString(),f.canonicalString()));for(let h of r){let f=aE(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(s.put(l)),u.push(o.put(f,oD))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(t,h))}),t.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),m.waitFor(u).next(()=>c)})}lookupMutationBatch(t,n){return ui(t).get(n).next(i=>i?(j(i.userId===this.userId),tr(this.serializer,i)):null)}vn(t,n){return this.Cn[n]?m.resolve(this.Cn[n]):this.lookupMutationBatch(t,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(t,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return ui(t).Y({index:"userMutationsIndex",range:r},(s,a,c)=>{a.userId===this.userId&&(j(a.batchId>=i),o=tr(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return ui(t).Y({index:"userMutationsIndex",range:n,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(t){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ui(t).W("userMutationsIndex",n).next(i=>i.map(r=>tr(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,n){let i=Hl(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return ao(t).Y({range:r},(s,a,c)=>{let[l,u,d]=s,h=yn(u);if(l===this.userId&&n.path.isEqual(h))return ui(t).get(d).next(f=>{if(!f)throw P();j(f.userId===this.userId),o.push(tr(this.serializer,f))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new _t(G),r=[];return n.forEach(o=>{let s=Hl(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=ao(t).Y({range:a},(l,u,d)=>{let[h,f,E]=l,v=yn(f);h===this.userId&&o.path.isEqual(v)?i=i.add(E):d.done()});r.push(c)}),m.waitFor(r).next(()=>this.Fn(t,i))}getAllMutationBatchesAffectingQuery(t,n){let i=n.path,r=i.length+1,o=Hl(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new _t(G);return ao(t).Y({range:s},(c,l,u)=>{let[d,h,f]=c,E=yn(h);d===this.userId&&i.isPrefixOf(E)?E.length===r&&(a=a.add(f)):u.done()}).next(()=>this.Fn(t,a))}Fn(t,n){let i=[],r=[];return n.forEach(o=>{r.push(ui(t).get(o).next(s=>{if(s===null)throw P();j(s.userId===this.userId),i.push(tr(this.serializer,s))}))}),m.waitFor(r).next(()=>i)}removeMutationBatch(t,n){return eI(t.ae,this.userId,n).next(i=>(t.addOnCommittedListener(()=>{this.Mn(n.batchId)}),m.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Mn(t){delete this.Cn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(n=>{if(!n)return m.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return ao(t).Y({range:i},(o,s,a)=>{if(o[0]===this.userId){let c=yn(o[1]);r.push(c)}else a.done()}).next(()=>{j(r.length===0)})})}containsKey(t,n){return nI(t,this.userId,n)}xn(t){return iI(t).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function nI(e,t,n){let i=Hl(t,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return ao(e).Y({range:o,J:!0},(a,c,l)=>{let[u,d,h]=a;u===t&&d===r&&(s=!0),l.done()}).next(()=>s)}function ui(e){return Jt(e,"mutations")}function ao(e){return Jt(e,"documentMutations")}function iI(e){return Jt(e,"mutationQueues")}var wo=class e{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new e(0)}static Ln(){return new e(-1)}};var zm=class{constructor(t,n){this.referenceDelegate=t,this.serializer=n}allocateTargetId(t){return this.Bn(t).next(n=>{let i=new wo(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(t,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Bn(t).next(n=>B.fromTimestamp(new Dt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Bn(t).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(t,n,i){return this.Bn(t).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(t,r)))}addTargetData(t,n){return this.qn(t,n).next(()=>this.Bn(t).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(t,i))))}updateTargetData(t,n){return this.qn(t,n)}removeTargetData(t,n){return this.removeMatchingKeysForTargetId(t,n.targetId).next(()=>no(t).delete(n.targetId)).next(()=>this.Bn(t)).next(i=>(j(i.targetCount>0),i.targetCount-=1,this.kn(t,i)))}removeTargets(t,n,i){let r=0,o=[];return no(t).Y((s,a)=>{let c=ia(a);c.sequenceNumber<=n&&i.get(c.targetId)===null&&(r++,o.push(this.removeTargetData(t,c)))}).next(()=>m.waitFor(o)).next(()=>r)}forEachTarget(t,n){return no(t).Y((i,r)=>{let o=ia(r);n(o)})}Bn(t){return Vw(t).get("targetGlobalKey").next(n=>(j(n!==null),n))}kn(t,n){return Vw(t).put("targetGlobalKey",n)}qn(t,n){return no(t).put(ZE(this.serializer,n))}Qn(t,n){let i=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,i=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Bn(t).next(n=>n.targetCount)}getTargetData(t,n){let i=cr(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return no(t).Y({range:r,index:"queryTargetsIndex"},(s,a,c)=>{let l=ia(a);Pa(n,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(t,n,i){let r=[],o=di(t);return n.forEach(s=>{let a=_e(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(t,i,s))}),m.waitFor(r)}removeMatchingKeys(t,n,i){let r=di(t);return m.forEach(n,o=>{let s=_e(o.path);return m.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(t,i,o)])})}removeMatchingKeysForTargetId(t,n){let i=di(t),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=di(t),o=Q();return r.Y({range:i,J:!0},(s,a,c)=>{let l=yn(s[1]),u=new A(l);o=o.add(u)}).next(()=>o)}containsKey(t,n){let i=_e(n.path),r=IDBKeyRange.bound([i],[nE(i)],!1,!0),o=0;return di(t).Y({index:"documentTargetsIndex",J:!0,range:r},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}_t(t,n){return no(t).get(n).next(i=>i?ia(i):null)}};function no(e){return Jt(e,"targets")}function Vw(e){return Jt(e,"targetGlobal")}function di(e){return Jt(e,"targetDocuments")}function Lw([e,t],[n,i]){let r=G(e,n);return r===0?G(t,i):r}var $m=class{constructor(t){this.Kn=t,this.buffer=new _t(Lw),this.$n=0}Un(){return++this.$n}Wn(t){let n=[t,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();Lw(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},qm=class{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(t){I("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>p(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ci(n)?I("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield xi(n)}yield this.zn(3e5)}))}},Gm=class{constructor(t,n){this.jn=t,this.params=n}calculateTargetCount(t,n){return this.jn.Hn(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return m.resolve(Ae._e);let i=new $m(n);return this.jn.forEachTarget(t,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(t,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.jn.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.jn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(I("LruGarbageCollector","Garbage collection skipped; disabled"),m.resolve(Fw)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fw):this.Yn(t,n))}getCacheSize(t){return this.jn.getCacheSize(t)}Yn(t,n){let i,r,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(I("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,s=Date.now(),this.nthSequenceNumber(t,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,n))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(l=Date.now(),io()<=mn.DEBUG&&I("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),m.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:d})))}};function JD(e,t){return new Gm(e,t)}var Wm=class{constructor(t,n){this.db=t,this.garbageCollector=JD(this,n)}Hn(t){let n=this.Zn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}Zn(t){let n=0;return this.Jn(t,i=>{n++}).next(()=>n)}forEachTarget(t,n){return this.db.getTargetCache().forEachTarget(t,n)}Jn(t,n){return this.Xn(t,(i,r)=>n(r))}addReference(t,n,i){return ql(t,i)}removeReference(t,n,i){return ql(t,i)}removeTargets(t,n,i){return this.db.getTargetCache().removeTargets(t,n,i)}markPotentiallyOrphaned(t,n){return ql(t,n)}er(t,n){return function(r,o){let s=!1;return iI(r).Z(a=>nI(r,a,o).next(c=>(c&&(s=!0),m.resolve(!c)))).next(()=>s)}(t,n)}removeOrphanedDocuments(t,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(t,(s,a)=>{if(a<=n){let c=this.er(t,s).next(l=>{if(!l)return o++,i.getEntry(t,s).next(()=>(i.removeEntry(s,B.min()),di(t).delete(function(d){return[0,_e(d.path)]}(s))))});r.push(c)}}).next(()=>m.waitFor(r)).next(()=>i.apply(t)).next(()=>o)}removeTarget(t,n){let i=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,n){return ql(t,n)}Xn(t,n){let i=di(t),r,o=Ae._e;return i.Y({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Ae._e&&n(new A(yn(r)),o),o=l,r=c):o=Ae._e}).next(()=>{o!==Ae._e&&n(new A(yn(r)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}};function ql(e,t){return di(e).put(function(i,r){return{targetId:0,path:_e(i.path),sequenceNumber:r}}(t,e.currentSequenceNumber))}var wu=class{constructor(){this.changes=new An(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Wt.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?m.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var Hm=class{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,n,i){return Xi(t).put(i)}removeEntry(t,n,i){return Xi(t).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],pu(s),a[a.length-1]]}(n,i))}updateMetadata(t,n){return this.getMetadata(t).next(i=>(i.byteSize+=n,this.tr(t,i)))}getEntry(t,n){let i=Wt.newInvalidDocument(n);return Xi(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(ta(n))},(r,o)=>{i=this.nr(n,o)}).next(()=>i)}rr(t,n){let i={size:0,document:Wt.newInvalidDocument(n)};return Xi(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(ta(n))},(r,o)=>{i={document:this.nr(n,o),size:vu(o)}}).next(()=>i)}getEntries(t,n){let i=Ie();return this.ir(t,n,(r,o)=>{let s=this.nr(r,o);i=i.insert(r,s)}).next(()=>i)}sr(t,n){let i=Ie(),r=new It(A.comparator);return this.ir(t,n,(o,s)=>{let a=this.nr(o,s);i=i.insert(o,a),r=r.insert(o,vu(s))}).next(()=>({documents:i,_r:r}))}ir(t,n,i){if(n.isEmpty())return m.resolve();let r=new _t(Uw);n.forEach(c=>r=r.add(c));let o=IDBKeyRange.bound(ta(r.first()),ta(r.last())),s=r.getIterator(),a=s.getNext();return Xi(t).Y({index:"documentKeyIndex",range:o},(c,l,u)=>{let d=A.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Uw(a,d)<0;)i(a,null),a=s.getNext();a&&a.isEqual(d)&&(i(a,l),a=s.hasNext()?s.getNext():null),a?u.U(ta(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(t,n,i,r,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),pu(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xi(t).W(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let u=Ie();for(let d of l){let h=this.nr(A.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Oa(n,h)||r.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(t,n,i,r){let o=Ie(),s=Bw(n,i),a=Bw(n,Le.max());return Xi(t).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,u)=>{let d=this.nr(A.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(d.key,d),o.size===r&&u.done()}).next(()=>o)}newChangeBuffer(t){return new Km(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(n=>n.byteSize)}getMetadata(t){return jw(t).get("remoteDocumentGlobalKey").next(n=>(j(!!n),n))}tr(t,n){return jw(t).put("remoteDocumentGlobalKey",n)}nr(t,n){if(n){let i=YD(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(B.min())))return i}return Wt.newInvalidDocument(t)}};function rI(e){return new Hm(e)}var Km=class extends wu{constructor(t,n){super(),this.ar=t,this.trackRemovals=n,this.ur=new An(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){let n=[],i=0,r=new _t((o,s)=>G(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(t,o,a.readTime)),s.isValidDocument()){let c=Tw(this.ar.serializer,s);r=r.add(o.path.popLast());let l=vu(c);i+=l-a.size,n.push(this.ar.addEntry(t,o,c))}else if(i-=a.size,this.trackRemovals){let c=Tw(this.ar.serializer,s.convertToNoDocument(B.min()));n.push(this.ar.addEntry(t,o,c))}}),r.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(t,o))}),n.push(this.ar.updateMetadata(t,i)),m.waitFor(n)}getFromCache(t,n){return this.ar.rr(t,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,n){return this.ar.sr(t,n).next(({documents:i,_r:r})=>(r.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function jw(e){return Jt(e,"remoteDocumentGlobal")}function Xi(e){return Jt(e,"remoteDocumentsV14")}function ta(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Bw(e,t){let n=t.documentKey.path.toArray();return[e,pu(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Uw(e,t){let n=e.path.toArray(),i=t.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=G(n[o],i[o]),r)return r;return r=G(n.length,i.length),r||(r=G(n[n.length-2],i[i.length-2]),r||G(n[n.length-1],i[i.length-1]))}var Qm=class{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}};var Eu=class{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&sa(i.mutation,r,Se.empty(),Dt.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,Q()).next(()=>i))}getLocalViewOfDocuments(t,n,i=Q()){let r=wn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(o=>{let s=na();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(t,n){let i=wn();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,Q()))}populateOverlays(t,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(t,n,i,r){let o=Ie(),s=oa(),a=function(){return oa()}();return n.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof nn)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),sa(u.mutation,l,u.mutation.getFieldMask(),Dt.now())):s.set(l.key,Se.empty())}),this.recalculateAndSaveOverlays(t,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new Qm(u,(d=s.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){let i=oa(),r=new It((s,a)=>s-a),o=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=i.get(c)||Se.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||Q()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=AE();u.forEach(h=>{if(!o.has(h)){let f=NE(n.get(h),i.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(t,l,d))}return m.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(s){return A.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):eg(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-o.size):m.resolve(wn()),a=-1,c=o;return s.next(l=>m.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?m.resolve():this.remoteDocumentCache.getEntry(t,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(t,l,o)).next(()=>this.computeViews(t,c,l,Q())).next(u=>({batchId:a,changes:TE(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new A(n)).next(i=>{let r=na();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){let o=n.collectionGroup,s=na();return this.indexManager.getCollectionParents(t,o).next(a=>m.forEach(a,c=>{let l=function(d,h){return new en(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(t,l,i,r).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,o,r))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,Wt.newInvalidDocument(u)))});let a=na();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&sa(u.mutation,l,Se.empty(),Dt.now()),Oa(n,l)&&(a=a.insert(c,l))}),a})}};var Ym=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return m.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Lt(r.createTime)}}(n)),m.resolve()}getNamedQuery(t,n){return m.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(r){return{name:r.name,query:rg(r.bundledQuery),readTime:Lt(r.readTime)}}(n)),m.resolve()}};var Xm=class{constructor(){this.overlays=new It(A.comparator),this.hr=new Map}getOverlay(t,n){return m.resolve(this.overlays.get(n))}getOverlays(t,n){let i=wn();return m.forEach(n,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,o)=>{this.ht(t,n,o)}),m.resolve()}removeOverlaysForBatchId(t,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),m.resolve()}getOverlaysForCollection(t,n,i){let r=wn(),o=n.length+1,s=new A(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return m.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let o=new It((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>i){let u=o.get(l.largestBatchId);u===null&&(u=wn(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=wn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return m.resolve(a)}ht(t,n,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new ba(n,i));let o=this.hr.get(n);o===void 0&&(o=Q(),this.hr.set(n,o)),this.hr.set(n,o.add(i.key))}};var Ia=class{constructor(){this.Pr=new _t($t.Ir),this.Tr=new _t($t.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){let i=new $t(t,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Ar(new $t(t,n))}Rr(t,n){t.forEach(i=>this.removeReference(i,n))}Vr(t){let n=new A(new lt([])),i=new $t(n,t),r=new $t(n,t+1),o=[];return this.Tr.forEachInRange([i,r],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let n=new A(new lt([])),i=new $t(n,t),r=new $t(n,t+1),o=Q();return this.Tr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(t){let n=new $t(t,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}},$t=class{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return A.comparator(t.key,n.key)||G(t.pr,n.pr)}static Er(t,n){return G(t.pr,n.pr)||A.comparator(t.key,n.key)}};var Zm=class{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new _t($t.Ir)}checkEmpty(t){return m.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ga(o,n,i,r);this.mutationQueue.push(s);for(let a of r)this.wr=this.wr.add(new $t(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return m.resolve(s)}lookupMutationBatch(t,n){return m.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){let i=n+1,r=this.br(i),o=r<0?0:r;return m.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return m.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return m.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){let i=new $t(n,0),r=new $t(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],s=>{let a=this.Sr(s.pr);o.push(a)}),m.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new _t(G);return n.forEach(r=>{let o=new $t(r,0),s=new $t(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{i=i.add(a.pr)})}),m.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(t,n){let i=n.path,r=i.length+1,o=i;A.isDocumentKey(o)||(o=o.child(""));let s=new $t(new A(o),0),a=new _t(G);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.pr)),!0)},s),m.resolve(this.Dr(a))}Dr(t){let n=[];return t.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){j(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return m.forEach(n.mutations,r=>{let o=new $t(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=i})}Mn(t){}containsKey(t,n){let i=new $t(n,0),r=this.wr.firstAfterOrEqual(i);return m.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,m.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Jm=class{constructor(t){this.vr=t,this.docs=function(){return new It(A.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){let i=this.docs.get(n);return m.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(t,n){let i=Ie();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Wt.newInvalidDocument(r))}),m.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let o=Ie(),s=n.path,a=new A(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Xp(rE(u),i)<=0||(r.has(u.key)||Oa(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return m.resolve(o)}getAllFromCollectionGroup(t,n,i,r){P()}Fr(t,n){return m.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new tp(this)}getSize(t){return m.resolve(this.size)}},tp=class extends wu{constructor(t){super(),this.ar=t}applyChanges(t){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(t,r)):this.ar.removeEntry(i)}),m.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}};var ep=class{constructor(t){this.persistence=t,this.Mr=new An(n=>cr(n),Pa),this.lastRemoteSnapshotVersion=B.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Ia,this.targetCount=0,this.Lr=wo.Nn()}forEachTarget(t,n){return this.Mr.forEach((i,r)=>n(r)),m.resolve()}getLastRemoteSnapshotVersion(t){return m.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return m.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),m.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),m.resolve()}qn(t){this.Mr.set(t.target,t);let n=t.targetId;n>this.highestTargetId&&(this.Lr=new wo(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,m.resolve()}updateTargetData(t,n){return this.qn(n),m.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,m.resolve()}removeTargets(t,n,i){let r=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),m.waitFor(o).next(()=>r)}getTargetCount(t){return m.resolve(this.targetCount)}getTargetData(t,n){let i=this.Mr.get(n)||null;return m.resolve(i)}addMatchingKeys(t,n,i){return this.Nr.dr(n,i),m.resolve()}removeMatchingKeys(t,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(t,s))}),m.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),m.resolve()}getMatchingKeysForTargetId(t,n){let i=this.Nr.gr(n);return m.resolve(i)}containsKey(t,n){return m.resolve(this.Nr.containsKey(n))}};var Iu=class{constructor(t,n){this.Br={},this.overlays={},this.kr=new Ae(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new ep(this),this.indexManager=new Bm,this.remoteDocumentCache=function(r){return new Jm(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new mu(n),this.$r=new Ym(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Xm,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Br[t.toKey()];return i||(i=new Zm(n,this.referenceDelegate),this.Br[t.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,i){I("MemoryPersistence","Starting transaction:",t);let r=new np(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(t,n){return m.or(Object.values(this.Br).map(i=>()=>i.containsKey(t,n)))}},np=class extends nu{constructor(t){super(),this.currentSequenceNumber=t}},xu=class e{constructor(t){this.persistence=t,this.zr=new Ia,this.jr=null}static Hr(t){return new e(t)}get Jr(){if(this.jr)return this.jr;throw P()}addReference(t,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),m.resolve()}removeReference(t,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),m.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),m.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return m.forEach(this.Jr,i=>{let r=A.fromPath(i);return this.Yr(t,r).next(o=>{o||n.removeEntry(r,B.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return m.or([()=>m.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}};var ip=class{constructor(t){this.serializer=t}N(t,n,i,r){let o=new iu("createOrUpgrade",n);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(t),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rw,{unique:!0}),c.createObjectStore("documentMutations")}(t),zw(t),function(c){c.createObjectStore("remoteDocuments")}(t));let s=m.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(t),zw(t)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:B.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rw,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return m.waitFor(h)})}(t,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),i<5&&r>=5&&(s=s.next(()=>this.Xr(o))),i<6&&r>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(t),this.ei(o)))),i<7&&r>=7&&(s=s.next(()=>this.ti(o))),i<8&&r>=8&&(s=s.next(()=>this.ni(t,o))),i<9&&r>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(t)})),i<10&&r>=10&&(s=s.next(()=>this.ri(o))),i<11&&r>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:bD});l.createIndex("collectionPathOverlayIndex",_D,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",vD,{unique:!1})})(t)})),i<13&&r>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:sD});l.createIndex("documentKeyIndex",aD),l.createIndex("collectionGroupIndex",cD)}(t)).next(()=>this.ii(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.si(t,o))),i<15&&r>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:fD}).createIndex("sequenceNumberIndex",mD,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:pD}).createIndex("documentKeyIndex",gD,{unique:!1})}(t))),i<16&&r>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}ei(t){let n=0;return t.store("remoteDocuments").Y((i,r)=>{n+=vu(r)}).next(()=>{let i={byteSize:n};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(t){let n=t.store("mutationQueues"),i=t.store("mutations");return n.W().next(r=>m.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",s).next(a=>m.forEach(a,c=>{j(c.userId===o.userId);let l=tr(this.serializer,c);return eI(t,o.userId,l).next(()=>{})}))}))}ti(t){let n=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.Y((s,a)=>{let c=new lt(s),l=function(d){return[0,_e(d)]}(c);o.push(n.get(l).next(u=>u?m.resolve():(d=>n.put({targetId:0,path:_e(d),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>m.waitFor(o))})}ni(t,n){t.createObjectStore("collectionParents",{keyPath:hD});let i=n.store("collectionParents"),r=new Ea,o=s=>{if(r.add(s)){let a=s.lastSegment(),c=s.popLast();return i.put({collectionId:a,parent:_e(c)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let c=new lt(s);return o(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,c],l)=>{let u=yn(a);return o(u.popLast())}))}ri(t){let n=t.store("targets");return n.Y((i,r)=>{let o=ia(r),s=ZE(this.serializer,o);return n.put(s)})}ii(t,n){let i=n.store("remoteDocuments"),r=[];return i.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new A(lt.fromString(d.document.name).popFirst(5)):d.noDocument?A.fromSegments(d.noDocument.path):d.unknownDocument?A.fromSegments(d.unknownDocument.path):P()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(l))}).next(()=>m.waitFor(r))}si(t,n){let i=n.store("mutations"),r=rI(this.serializer),o=new Iu(xu.Hr,this.serializer.ct);return i.W().next(s=>{let a=new Map;return s.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:Q();tr(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),m.forEach(a,(c,l)=>{let u=new qt(l),d=gu.lt(this.serializer,u),h=o.getIndexManager(u),f=yu.lt(u,this.serializer,h,o.referenceDelegate);return new Eu(r,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new da(n,Ae._e),c).next()})})}};function zw(e){e.createObjectStore("targetDocuments",{keyPath:uD}).createIndex("documentTargetsIndex",dD,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lD,{unique:!0}),e.createObjectStore("targetGlobal")}var Kf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rp=class e{constructor(t,n,i,r,o,s,a,c,l,u,d=16){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=i,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=u,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!e.D())throw new w(b.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wm(this,r),this.Ti=n+"main",this.serializer=new mu(c),this.Ei=new Wn(this.Ti,this.ui,new ip(this.serializer)),this.Qr=new zm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rI(this.serializer),this.$r=new Mm,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,u===!1&&Ft("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new w(b.FAILED_PRECONDITION,Kf);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Qr.getHighestSequenceNumber(t))}).then(t=>{this.kr=new Ae(t,this._i)}).then(()=>{this.qr=!0}).catch(t=>(this.Ei&&this.Ei.close(),Promise.reject(t)))}fi(t){return this.Ii=n=>p(this,null,function*(){if(this.started)return t(n)}),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ei.B(n=>p(this,null,function*(){n.newVersion===null&&(yield t())}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.oi.enqueueAndForget(()=>p(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Gl(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(t).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(t)).next(n=>this.isPrimary&&!n?this.yi(t).next(()=>!1):!!n&&this.wi(t).next(()=>!0))).catch(t=>{if(Ci(t))return I("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return I("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.oi.enqueueRetryable(()=>this.Ii(t)),this.isPrimary=t})}gi(t){return ea(t).get("owner").next(n=>m.resolve(this.Si(n)))}bi(t){return Gl(t).delete(this.clientId)}Di(){return p(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let t=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=Jt(n,"clientMetadata");return i.W().next(r=>{let o=this.vi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return m.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of t)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(t){return!!t&&t.ownerId===this.clientId}pi(t){return this.ai?m.resolve(!0):ea(t).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new w(b.FAILED_PRECONDITION,Kf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Gl(t).W().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&I("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return p(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{let n=new da(t,Ae._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(t,n){return t.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",t=>Gl(t).W().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(t,n){return yu.lt(t,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Um(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return gu.lt(this.serializer,t)}getBundleCache(){return this.$r}runTransaction(t,n,i){I("IndexedDbPersistence","Starting transaction:",t);let r=n==="readonly"?"readonly":"readwrite",o=function(c){return c===16?wD:c===15?dE:c===14?uE:c===13?lE:c===12?yD:c===11?cE:void P()}(this.ui),s;return this.Ei.runTransaction(t,r,o,a=>(s=new da(a,this.kr?this.kr.next():Ae._e),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw Ft(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new w(b.FAILED_PRECONDITION,oE);return i(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(t){return ea(t).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new w(b.FAILED_PRECONDITION,Kf)})}wi(t){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ea(t).put("owner",n)}static D(){return Wn.D()}yi(t){let n=ea(t);return n.get("owner").next(i=>this.Si(i)?(I("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):m.resolve())}Ci(t,n){let i=Date.now();return!(t<i-n)&&(!(t>i)||(Ft(`Detected an update time that is in the future: ${t} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;_h()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(t){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(t)))!==null;return I("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ft("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(t){Ft("Failed to set zombie client id.",t)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}};function ea(e){return Jt(e,"owner")}function Gl(e){return Jt(e,"clientMetadata")}function sg(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var op=class e{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(t,n){let i=Q(),r=Q();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new e(t,n.fromCache,i,r)}};var sp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var Cu=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return _h()?8:Wn.v(ms())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,i,r){let o={result:null};return this.ji(t,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(t,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new sp;return this.Ji(t,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(t,n,s,a.size)})}).next(()=>o.result)}Yi(t,n,i,r){return i.documentReadCount<this.Wi?(io()<=mn.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",ro(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),m.resolve()):(io()<=mn.DEBUG&&I("QueryEngine","Query:",ro(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(io()<=mn.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",ro(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ve(n))):m.resolve())}ji(t,n){if(pw(n))return m.resolve(null);let i=ve(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=uu(n,null,"F"),i=ve(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{let s=Q(...o);return this.zi.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,i).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,s,c.readTime)?this.ji(t,uu(n,null,"F")):this.es(t,l,n,c)}))})))}Hi(t,n,i,r){return pw(n)||r.isEqual(B.min())?m.resolve(null):this.zi.getDocuments(t,i).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,i,r)?m.resolve(null):(io()<=mn.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ro(n)),this.es(t,s,n,iE(r,-1)).next(a=>a))})}Zi(t,n){let i=new _t(xE(t));return n.forEach((r,o)=>{Oa(t,o)&&(i=i.add(o))}),i}Xi(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;let o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(t,n,i){return io()<=mn.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",ro(n)),this.zi.getDocumentsMatchingQuery(t,n,Le.min(),i)}es(t,n,i,r){return this.zi.getDocumentsMatchingQuery(t,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ap=class{constructor(t,n,i,r){this.persistence=t,this.ts=n,this.serializer=r,this.ns=new It(G),this.rs=new An(o=>cr(o),Pa),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(i)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Eu(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}};function oI(e,t,n,i){return new ap(e,t,n,i)}function sI(e,t){return p(this,null,function*(){let n=D(e);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n._s(t),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],c=Q();for(let l of r){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(i,c).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function tR(e,t){let n=D(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=m.resolve();return h.forEach(E=>{f=f.next(()=>u.getEntry(c,E)).next(v=>{let x=l.docVersions.get(E);j(x!==null),v.version.compareTo(x)<0&&(d.applyToRemoteDocument(v,l),v.isValidDocument()&&(v.setReadTime(l.commitVersion),u.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,i,t,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=Q();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function aI(e){let t=D(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function eR(e,t){let n=D(e),i=t.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let a=[];t.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,u.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,u.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(d)!==null?f=f.withResumeToken(Zt.EMPTY_BYTE_STRING,B.min()).withLastLimboFreeSnapshotVersion(B.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),function(v,x,V){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(h,f,u)&&a.push(n.Qr.updateTargetData(o,f))});let c=Ie(),l=Q();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(cI(o,s,t.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!i.isEqual(B.min())){let u=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(u)}return m.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.ns=r,o))}function cI(e,t,n){let i=Q(),r=Q();return n.forEach(o=>i=i.add(o)),t.getEntries(e,i).next(o=>{let s=Ie();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(B.min())?(t.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c),s=s.insert(a,c)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:s,ls:r}})}function nR(e,t){let n=D(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Eo(e,t){let n=D(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,t).next(o=>o?(r=o,m.resolve(r)):n.Qr.allocateTargetId(i).next(s=>(r=new yo(t,s,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(t,i.targetId)),i})}function Io(e,t,n){return p(this,null,function*(){let i=D(e),r=i.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Ci(s))throw s;I("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}i.ns=i.ns.remove(t),i.rs.delete(r.target)})}function Tu(e,t,n){let i=D(e),r=B.min(),o=Q();return i.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,u){let d=D(c),h=d.rs.get(u);return h!==void 0?m.resolve(d.ns.get(h)):d.Qr.getTargetData(l,u)}(i,s,ve(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>i.ts.getDocumentsMatchingQuery(s,t,n?r:B.min(),n?o:Q())).next(a=>(dI(i,IE(t),a),{documents:a,hs:o})))}function lI(e,t){let n=D(e),i=D(n.Qr),r=n.ns.get(t);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i._t(o,t).next(s=>s?s.target:null))}function uI(e,t){let n=D(e),i=n.ss.get(t)||B.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,t,iE(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(dI(n,t,r),r))}function dI(e,t,n){let i=e.ss.get(t)||B.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),e.ss.set(t,i)}function iR(e,t,n,i){return p(this,null,function*(){let r=D(e),o=Q(),s=Ie();for(let l of n){let u=t.Ps(l.metadata.name);l.document&&(o=o.add(u));let d=t.Is(l);d.setReadTime(t.Ts(l.metadata.readTime)),s=s.insert(u,d)}let a=r.os.newChangeBuffer({trackRemovals:!0}),c=yield Eo(r,function(u){return ve(ko(lt.fromString(`__bundle__/docs/${u}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",l=>cI(l,a,s).next(u=>(a.apply(l),u)).next(u=>r.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>r.Qr.addMatchingKeys(l,o,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,u.cs,u.ls)).next(()=>u.cs)))})}function rR(i,r){return p(this,arguments,function*(e,t,n=Q()){let o=yield Eo(e,ve(rg(t.bundledQuery))),s=D(e);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Lt(t.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,t);let l=o.withResumeToken(Zt.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(l.targetId,l),s.Qr.updateTargetData(a,l).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,t))})})}function $w(e,t){return`firestore_clients_${e}_${t}`}function qw(e,t,n){let i=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function Qf(e,t){return`firestore_targets_${e}_${t}`}var Au=class e{constructor(t,n,i,r){this.user=t,this.batchId=n,this.state=i,this.error=r}static Es(t,n,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new w(r.error.code,r.error.message))),s?new e(t,n,r.state,o):(Ft("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},aa=class e{constructor(t,n,i){this.targetId=t,this.state=n,this.error=i}static Es(t,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new w(i.error.code,i.error.message))),o?new e(t,i.state,r):(Ft("SharedClientState",`Failed to parse target state for ID '${t}': ${n}`),null)}ds(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},Su=class e{constructor(t,n){this.clientId=t,this.activeTargetIds=n}static Es(t,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=ng();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=sE(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new e(t,o):(Ft("SharedClientState",`Failed to parse client data for instance '${t}': ${n}`),null)}},cp=class e{constructor(t,n){this.clientId=t,this.onlineState=n}static Es(t){let n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(Ft("SharedClientState",`Failed to parse online state: ${t}`),null)}},xa=class{constructor(){this.activeTargetIds=ng()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},ca=class{constructor(t,n,i,r,o){this.window=t,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new It(G),this.started=!1,this.ys=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=$w(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new xa),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(t){return!(!t||!t.localStorage)}start(){return p(this,null,function*(){let t=yield this.syncEngine.Bi();for(let i of t){if(i===this.Vs)continue;let r=this.getItem($w(this.persistenceKey,i));if(r){let o=Su.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(t){this.setItem(this.Ss,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(t){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(t)&&(n=!0)}),n}addPendingMutation(t){this.Ls(t,"pending")}updateMutationState(t,n,i){this.Ls(t,n,i),this.Bs(t)}addLocalQueryTarget(t){let n="not-current";if(this.isActiveQueryTarget(t)){let i=this.storage.getItem(Qf(this.persistenceKey,t));if(i){let r=aa.Es(t,i);r&&(n=r.state)}}return this.ks.As(t),this.Ms(),n}removeLocalQueryTarget(t){this.ks.Rs(t),this.Ms()}isLocalQueryTarget(t){return this.ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Qf(this.persistenceKey,t))}updateQueryState(t,n,i){this.qs(t,n,i)}handleUserChange(t,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Qs(t)}notifyBundleLoaded(t){this.Ks(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(t){let n=this.storage.getItem(t);return I("SharedClientState","READ",t,n),n}setItem(t,n){I("SharedClientState","SET",t,n),this.storage.setItem(t,n)}removeItem(t){I("SharedClientState","REMOVE",t),this.storage.removeItem(t)}gs(t){let n=t;if(n.storageArea===this.storage){if(I("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ft("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>p(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(o){let s=Ae._e;if(o!=null)try{let a=JSON.parse(o);j(typeof a=="number"),s=a}catch(a){Ft("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);i!==Ae._e&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(t,n,i){let r=new Au(this.currentUser,t,n,i),o=qw(this.persistenceKey,this.currentUser,t);this.setItem(o,r.ds())}Bs(t){let n=qw(this.persistenceKey,this.currentUser,t);this.removeItem(n)}Qs(t){let n={clientId:this.Vs,onlineState:t};this.storage.setItem(this.vs,JSON.stringify(n))}qs(t,n,i){let r=Qf(this.persistenceKey,t),o=new aa(t,n,i);this.setItem(r,o.ds())}Ks(t){let n=JSON.stringify(Array.from(t));this.setItem(this.Fs,n)}$s(t){let n=this.bs.exec(t);return n?n[1]:null}Ws(t,n){let i=this.$s(t);return Su.Es(i,n)}Gs(t,n){let i=this.Ds.exec(t),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Au.Es(new qt(o),r,n)}js(t,n){let i=this.Cs.exec(t),r=Number(i[1]);return aa.Es(r,n)}xs(t){return cp.Es(t)}Js(t){return JSON.parse(t)}zs(t){return p(this,null,function*(){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Zs(t.batchId,t.state,t.error);I("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})}Hs(t){return this.syncEngine.Xs(t.targetId,t.state,t.error)}Us(t,n){let i=n?this.ps.insert(t,n):this.ps.remove(t),r=this.Ns(this.ps),o=this.Ns(i),s=[],a=[];return o.forEach(c=>{r.has(c)||s.push(c)}),r.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=i})}Os(t){this.ps.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ns(t){let n=ng();return t.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},Du=class{constructor(){this.no=new xa,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,i){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new xa,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var lp=class{io(t){}shutdown(){}};var Ru=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Wl=null;function Yf(){return Wl===null?Wl=function(){return 268435456+Math.round(2147483648*Math.random())}():Wl++,"0x"+Wl.toString(16)}var oR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var up=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}};var de="WebChannelConnection",dp=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=i+"://"+n.host,this.po=`projects/${r}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get wo(){return!1}So(n,i,r,o,s){let a=Yf(),c=this.bo(n,i.toUriEncodedString());I("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,o,s),this.Co(n,c,l,r).then(u=>(I("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Ve("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",r),u})}vo(n,i,r,o,s,a){return this.So(n,i,r,o,s)}Do(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}bo(n,i){let r=oR[n];return`${this.fo}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,i,r){let o=Yf();return new Promise((s,a)=>{let c=new J0;c.setWithCredentials(!0),c.listenOnce(X0.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zl.NO_ERROR:let u=c.getResponseJson();I(de,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(u)),s(u);break;case zl.TIMEOUT:I(de,`RPC '${t}' ${o} timed out`),a(new w(b.DEADLINE_EXCEEDED,"Request time out"));break;case zl.HTTP_ERROR:let d=c.getStatus();if(I(de,`RPC '${t}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let E=function(x){let V=x.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(V)>=0?V:b.UNKNOWN}(f.status);a(new w(E,f.message))}else a(new w(b.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new w(b.UNAVAILABLE,"Connection failed."));break;default:P()}}finally{I(de,`RPC '${t}' ${o} completed.`)}});let l=JSON.stringify(r);I(de,`RPC '${t}' ${o} sending request:`,r),c.send(n,"POST",l,i,15)})}Fo(t,n,i){let r=Yf(),o=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Q0(),a=Y0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let u=o.join("");I(de,`Creating RPC '${t}' stream ${r}: ${u}`,c);let d=s.createWebChannel(u,c),h=!1,f=!1,E=new up({lo:x=>{f?I(de,`Not sending because RPC '${t}' stream ${r} is closed:`,x):(h||(I(de,`Opening RPC '${t}' stream ${r} transport.`),d.open(),h=!0),I(de,`RPC '${t}' stream ${r} sending:`,x),d.send(x))},ho:()=>d.close()}),v=(x,V,$)=>{x.listen(V,O=>{try{$(O)}catch(X){setTimeout(()=>{throw X},0)}})};return v(d,Xs.EventType.OPEN,()=>{f||I(de,`RPC '${t}' stream ${r} transport opened.`)}),v(d,Xs.EventType.CLOSE,()=>{f||(f=!0,I(de,`RPC '${t}' stream ${r} transport closed`),E.Vo())}),v(d,Xs.EventType.ERROR,x=>{f||(f=!0,Ve(de,`RPC '${t}' stream ${r} transport errored:`,x),E.Vo(new w(b.UNAVAILABLE,"The operation could not be completed")))}),v(d,Xs.EventType.MESSAGE,x=>{var V;if(!f){let $=x.data[0];j(!!$);let O=$,X=O.error||((V=O[0])===null||V===void 0?void 0:V.error);if(X){I(de,`RPC '${t}' stream ${r} received error:`,X);let tt=X.status,dt=function(cT){let T_=zt[cT];if(T_!==void 0)return LE(T_)}(tt),Bt=X.message;dt===void 0&&(dt=b.INTERNAL,Bt="Unknown error status: "+tt+" with message "+X.message),f=!0,E.Vo(new w(dt,Bt)),d.close()}else I(de,`RPC '${t}' stream ${r} received:`,$),E.mo($)}}),v(a,Z0.STAT_EVENT,x=>{x.stat===Wf.PROXY?I(de,`RPC '${t}' stream ${r} detected buffering proxy`):x.stat===Wf.NOPROXY&&I(de,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.Ro()},0),E}};function hI(){return typeof window<"u"?window:null}function Xl(){return typeof document<"u"?document:null}function Na(e){return new Sm(e,!0)}var Ca=class{constructor(t,n,i=1e3,r=1.5,o=6e4){this.oi=t,this.timerId=n,this.Mo=i,this.xo=r,this.Oo=o,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();let n=Math.floor(this.No+this.Qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,n-i);r>0&&I("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var ku=class{constructor(t,n,i,r,o,s,a,c){this.oi=t,this.$o=i,this.Uo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Ca(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return p(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}e_(){return p(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(t,n){return p(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(Ft(n.toString()),Ft("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Wo===n&&this.o_(i,r)},i=>{t(()=>{let r=new w(b.UNKNOWN,"Fetching auth token failed: "+i.message);return this.__(r)})})}o_(t,n){let i=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{i(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{i(()=>this.__(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(()=>p(this,null,function*(){this.state=0,this.start()}))}__(t){return I("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},hp=class extends ku{constructor(t,n,i,r,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();let n=$D(this.serializer,t),i=function(o){if(!("targetChange"in o))return B.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?B.min():s.readTime?Lt(s.readTime):B.min()}(t);return this.listener.u_(n,i)}c_(t){let n={};n.database=km(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=cu(c)?{documents:WE(o,c)}:{query:HE(o,c).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=BE(o,s.resumeToken);let l=Dm(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(B.min())>0){a.readTime=vo(o,s.snapshotVersion.toTimestamp());let l=Dm(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);let i=GD(this.serializer,t);i&&(n.labels=i),this.t_(n)}l_(t){let n={};n.database=km(this.serializer),n.removeTarget=t,this.t_(n)}},fp=class extends ku{constructor(t,n,i,r,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,n){return this.connection.Fo("Write",t,n)}onMessage(t){if(j(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();let n=qD(t.writeResults,t.commitTime),i=Lt(t.commitTime);return this.listener.T_(i,n)}return j(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let t={};t.database=km(this.serializer),this.t_(t)}I_(t){let n={streamToken:this.lastStreamToken,writes:t.map(i=>wa(this.serializer,i))};this.t_(n)}};var mp=class extends class{}{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new w(b.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(t,Rm(n,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(b.UNKNOWN,o.toString())})}vo(t,n,i,r,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(t,Rm(n,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new w(b.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var pp=class{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){let n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Ft(n),this.g_=!1):I("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var gp=class{constructor(t,n,i,r,o){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{i.enqueueAndForget(()=>p(this,null,function*(){Ti(this)&&(I("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let l=D(c);l.v_.add(4),yield Po(l),l.x_.set("Unknown"),l.v_.delete(4),yield Fa(l)})}(this))}))}),this.x_=new pp(i,r)}};function Fa(e){return p(this,null,function*(){if(Ti(e))for(let t of e.F_)yield t(!0)})}function Po(e){return p(this,null,function*(){for(let t of e.F_)yield t(!1)})}function Yu(e,t){let n=D(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),lg(n)?cg(n):Oo(n).Jo()&&ag(n,t))}function xo(e,t){let n=D(e),i=Oo(n);n.C_.delete(t),i.Jo()&&fI(n,t),n.C_.size===0&&(i.Jo()?i.Xo():Ti(n)&&n.x_.set("Unknown"))}function ag(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(B.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Oo(e).c_(t)}function fI(e,t){e.O_.Oe(t),Oo(e).l_(t)}function cg(e){e.O_=new Am({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Oo(e).start(),e.x_.p_()}function lg(e){return Ti(e)&&!Oo(e).Ho()&&e.C_.size>0}function Ti(e){return D(e).v_.size===0}function mI(e){e.O_=void 0}function sR(e){return p(this,null,function*(){e.C_.forEach((t,n)=>{ag(e,t)})})}function aR(e,t){return p(this,null,function*(){mI(e),lg(e)?(e.x_.S_(t),cg(e)):e.x_.set("Unknown")})}function cR(e,t,n){return p(this,null,function*(){if(e.x_.set("Online"),t instanceof hu&&t.state===2&&t.cause)try{yield function(r,o){return p(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.C_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.C_.delete(a),r.O_.removeTarget(a))})}(e,t)}catch(i){I("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Pu(e,i)}else if(t instanceof ho?e.O_.$e(t):t instanceof du?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(B.min()))try{let i=yield aI(e.localStore);n.compareTo(i)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.C_.get(l);u&&o.C_.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.C_.get(c);if(!u)return;o.C_.set(c,u.withResumeToken(Zt.EMPTY_BYTE_STRING,u.snapshotVersion)),fI(o,c);let d=new yo(u.target,c,l,u.sequenceNumber);ag(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(e,n))}catch(i){I("RemoteStore","Failed to raise snapshot:",i),yield Pu(e,i)}})}function Pu(e,t,n){return p(this,null,function*(){if(!Ci(t))throw t;e.v_.add(1),yield Po(e),e.x_.set("Offline"),n||(n=()=>aI(e.localStore)),e.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){I("RemoteStore","Retrying IndexedDB access"),yield n(),e.v_.delete(1),yield Fa(e)}))})}function pI(e,t){return t().catch(n=>Pu(e,n,t))}function Mo(e){return p(this,null,function*(){let t=D(e),n=Ii(t),i=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;lR(t);)try{let r=yield nR(t.localStore,i);if(r===null){t.D_.length===0&&n.Xo();break}i=r.batchId,uR(t,r)}catch(r){yield Pu(t,r)}gI(t)&&bI(t)})}function lR(e){return Ti(e)&&e.D_.length<10}function uR(e,t){e.D_.push(t);let n=Ii(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function gI(e){return Ti(e)&&!Ii(e).Ho()&&e.D_.length>0}function bI(e){Ii(e).start()}function dR(e){return p(this,null,function*(){Ii(e).d_()})}function hR(e){return p(this,null,function*(){let t=Ii(e);for(let n of e.D_)t.I_(n.mutations)})}function fR(e,t,n){return p(this,null,function*(){let i=e.D_.shift(),r=xm.from(i,t,n);yield pI(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),yield Mo(e)})}function mR(e,t){return p(this,null,function*(){t&&Ii(e).P_&&(yield function(i,r){return p(this,null,function*(){if(function(s){return VE(s)&&s!==b.ABORTED}(r.code)){let o=i.D_.shift();Ii(i).Zo(),yield pI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Mo(i)}})}(e,t)),gI(e)&&bI(e)})}function Gw(e,t){return p(this,null,function*(){let n=D(e);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");let i=Ti(n);n.v_.add(3),yield Po(n),i&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),yield Fa(n)})}function bp(e,t){return p(this,null,function*(){let n=D(e);t?(n.v_.delete(2),yield Fa(n)):t||(n.v_.add(2),yield Po(n),n.x_.set("Unknown"))})}function Oo(e){return e.N_||(e.N_=function(n,i,r){let o=D(n);return o.R_(),new hp(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(e.datastore,e.asyncQueue,{Po:sR.bind(null,e),To:aR.bind(null,e),u_:cR.bind(null,e)}),e.F_.push(t=>p(this,null,function*(){t?(e.N_.Zo(),lg(e)?cg(e):e.x_.set("Unknown")):(yield e.N_.stop(),mI(e))}))),e.N_}function Ii(e){return e.L_||(e.L_=function(n,i,r){let o=D(n);return o.R_(),new fp(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(e.datastore,e.asyncQueue,{Po:dR.bind(null,e),To:mR.bind(null,e),E_:hR.bind(null,e),T_:fR.bind(null,e)}),e.F_.push(t=>p(this,null,function*(){t?(e.L_.Zo(),yield Mo(e)):(yield e.L_.stop(),e.D_.length>0&&(I("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))}))),e.L_}var _p=class e{constructor(t,n,i,r,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,o){let s=Date.now()+i,a=new e(t,n,s,r,o);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(b.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function No(e,t){if(Ft("AsyncQueue",`${t}: ${e}`),Ci(e))return new w(b.UNAVAILABLE,`${t}: ${e}`);throw e}var Mu=class e{constructor(t){this.comparator=t?(n,i)=>t(n,i)||A.comparator(n.key,i.key):(n,i)=>A.comparator(n.key,i.key),this.keyedMap=na(),this.sortedSet=new It(this.comparator)}static emptySet(t){return new e(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){let n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){let n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){let i=new e;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}};var Ou=class{constructor(){this.B_=new It(A.comparator)}track(t){let n=t.doc.key,i=this.B_.get(n);i?t.type!==0&&i.type===3?this.B_=this.B_.insert(n,t):t.type===3&&i.type!==1?this.B_=this.B_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.B_=this.B_.remove(n):t.type===1&&i.type===2?this.B_=this.B_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):P():this.B_=this.B_.insert(n,t)}k_(){let t=[];return this.B_.inorderTraversal((n,i)=>{t.push(i)}),t}},Co=class e{constructor(t,n,i,r,o,s,a,c,l){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(t,n,i,r,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new e(t,n,Mu.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ma(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var vp=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(t=>t.U_())}},yp=class{constructor(){this.queries=new An(t=>EE(t),Ma),this.onlineState="Unknown",this.W_=new Set}};function ug(e,t){return p(this,null,function*(){let n=D(e),i=3,r=t.query,o=n.queries.get(r);o?!o.K_()&&t.U_()&&(i=2):(o=new vp,i=t.U_()?0:1);try{switch(i){case 0:o.q_=yield n.onListen(r,!0);break;case 1:o.q_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(s){let a=No(s,`Initialization of query '${ro(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,o),o.Q_.push(t),t.G_(n.onlineState),o.q_&&t.z_(o.q_)&&hg(n)})}function dg(e,t){return p(this,null,function*(){let n=D(e),i=t.query,r=3,o=n.queries.get(i);if(o){let s=o.Q_.indexOf(t);s>=0&&(o.Q_.splice(s,1),o.Q_.length===0?r=t.U_()?0:1:!o.K_()&&t.U_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function pR(e,t){let n=D(e),i=!1;for(let r of t){let o=r.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.z_(r)&&(i=!0);s.q_=r}}i&&hg(n)}function gR(e,t,n){let i=D(e),r=i.queries.get(t);if(r)for(let o of r.Q_)o.onError(n);i.queries.delete(t)}function hg(e){e.W_.forEach(t=>{t.next()})}var wp,Ww;(Ww=wp||(wp={})).j_="default",Ww.Cache="cache";var Ta=class{constructor(t,n,i){this.query=t,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=i||{}}z_(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new Co(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.J_?this.Z_(t)&&(this.H_.next(t),n=!0):this.X_(t,this.onlineState)&&(this.ea(t),n=!0),this.Y_=t,n}onError(t){this.H_.error(t)}G_(t){this.onlineState=t;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,t)&&(this.ea(this.Y_),n=!0),n}X_(t,n){if(!t.fromCache||!this.U_())return!0;let i=n!=="Offline";return(!this.options.ta||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Z_(t){if(t.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(t){t=Co.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.J_=!0,this.H_.next(t)}U_(){return this.options.source!==wp.Cache}};var Ep=class{constructor(t,n){this.na=t,this.byteLength=n}ra(){return"metadata"in this.na}};var Nu=class{constructor(t){this.serializer=t}Ps(t){return In(this.serializer,t)}Is(t){return t.metadata.exists?GE(this.serializer,t.document,!1):Wt.newNoDocument(this.Ps(t.metadata.name),this.Ts(t.metadata.readTime))}Ts(t){return Lt(t)}},Ip=class{constructor(t,n,i){this.ia=t,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_I(t)}sa(t){this.progress.bytesLoaded+=t.byteLength;let n=this.progress.documentsLoaded;if(t.na.namedQuery)this.queries.push(t.na.namedQuery);else if(t.na.documentMetadata){this.documents.push({metadata:t.na.documentMetadata}),t.na.documentMetadata.exists||++n;let i=lt.fromString(t.na.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.na.document&&(this.documents[this.documents.length-1].document=t.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(t){let n=new Map,i=new Nu(this.serializer);for(let r of t)if(r.metadata.queries){let o=i.Ps(r.metadata.name);for(let s of r.metadata.queries){let a=(n.get(s)||Q()).add(o);n.set(s,a)}}return n}complete(){return p(this,null,function*(){let t=yield iR(this.localStore,new Nu(this.serializer),this.documents,this.ia.id),n=this.oa(this.documents);for(let i of this.queries)yield rR(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:t}})}};function _I(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Fu=class{constructor(t){this.key=t}},Vu=class{constructor(t){this.key=t}},Lu=class{constructor(t,n){this.query=t,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Q(),this.mutatedKeys=Q(),this.ha=xE(t),this.Pa=new Mu(this.ha)}get Ia(){return this.ua}Ta(t,n){let i=n?n.Ea:new Ou,r=n?n.Pa:this.Pa,o=n?n.mutatedKeys:this.mutatedKeys,s=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,d)=>{let h=r.get(u),f=Oa(this.query,d)?d:null,E=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),x=!1;h&&f?h.data.isEqual(f.data)?E!==v&&(i.track({type:3,doc:f}),x=!0):this.da(h,f)||(i.track({type:2,doc:f}),x=!0,(c&&this.ha(f,c)>0||l&&this.ha(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),x=!0):h&&!f&&(i.track({type:1,doc:h}),x=!0,(c||l)&&(a=!0)),x&&(f?(s=s.add(f),o=v?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),i.track({type:1,doc:u})}return{Pa:s,Ea:i,Xi:a,mutatedKeys:o}}da(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){let o=this.Pa;this.Pa=t.Pa,this.mutatedKeys=t.mutatedKeys;let s=t.Ea.k_();s.sort((u,d)=>function(f,E){let v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P()}};return v(f)-v(E)}(u.type,d.type)||this.ha(u.doc,d.doc)),this.Aa(i),r=r!=null&&r;let a=n&&!r?this.Ra():[],c=this.la.size===0&&this.current&&!r?1:0,l=c!==this.ca;return this.ca=c,s.length!==0||l?{snapshot:new Co(this.query,t.Pa,o,s,t.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Ou,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(t){return!this.ua.has(t)&&!!this.Pa.has(t)&&!this.Pa.get(t).hasLocalMutations}Aa(t){t&&(t.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=t.current)}Ra(){if(!this.current)return[];let t=this.la;this.la=Q(),this.Pa.forEach(i=>{this.ma(i.key)&&(this.la=this.la.add(i.key))});let n=[];return t.forEach(i=>{this.la.has(i)||n.push(new Vu(i))}),this.la.forEach(i=>{t.has(i)||n.push(new Fu(i))}),n}fa(t){this.ua=t.hs,this.la=Q();let n=this.Ta(t.documents);return this.applyChanges(n,!0)}ga(){return Co.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},xp=class{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}},Cp=class{constructor(t){this.key=t,this.pa=!1}},Tp=class{constructor(t,n,i,r,o,s){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new An(a=>EE(a),Ma),this.Sa=new Map,this.ba=new Set,this.Da=new It(A.comparator),this.Ca=new Map,this.va=new Ia,this.Fa={},this.Ma=new Map,this.xa=wo.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function bR(e,t,n=!0){return p(this,null,function*(){let i=Xu(e),r,o=i.wa.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ga()):r=yield vI(i,t,n,!0),r})}function _R(e,t){return p(this,null,function*(){let n=Xu(e);yield vI(n,t,!0,!1)})}function vI(e,t,n,i){return p(this,null,function*(){let r=yield Eo(e.localStore,ve(t)),o=r.targetId,s=n?e.sharedClientState.addLocalQueryTarget(o):"not-current",a;return i&&(a=yield fg(e,t,o,s==="current",r.resumeToken)),e.isPrimaryClient&&n&&Yu(e.remoteStore,r),a})}function fg(e,t,n,i,r){return p(this,null,function*(){e.Na=(d,h,f)=>function(v,x,V,$){return p(this,null,function*(){let O=x.view.Ta(V);O.Xi&&(O=yield Tu(v.localStore,x.query,!1).then(({documents:Bt})=>x.view.Ta(Bt,O)));let X=$&&$.targetChanges.get(x.targetId),tt=$&&$.targetMismatches.get(x.targetId)!=null,dt=x.view.applyChanges(O,v.isPrimaryClient,X,tt);return Ap(v,x.targetId,dt.Va),dt.snapshot})}(e,d,h,f);let o=yield Tu(e.localStore,t,!0),s=new Lu(t,o.hs),a=s.Ta(o.documents),c=va.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),l=s.applyChanges(a,e.isPrimaryClient,c);Ap(e,n,l.Va);let u=new xp(t,n,s);return e.wa.set(t,u),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),l.snapshot})}function vR(e,t,n){return p(this,null,function*(){let i=D(e),r=i.wa.get(t),o=i.Sa.get(r.targetId);if(o.length>1)return i.Sa.set(r.targetId,o.filter(s=>!Ma(s,t))),void i.wa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Io(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&xo(i.remoteStore,r.targetId),To(i,r.targetId)}).catch(xi))):(To(i,r.targetId),yield Io(i.localStore,r.targetId,!0))})}function yR(e,t){return p(this,null,function*(){let n=D(e),i=n.wa.get(t),r=n.Sa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),xo(n.remoteStore,i.targetId))})}function wR(e,t,n){return p(this,null,function*(){let i=bg(e);try{let r=yield function(s,a){let c=D(s),l=Dt.now(),u=a.reduce((f,E)=>f.add(E.key),Q()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let E=Ie(),v=Q();return c.os.getEntries(f,u).next(x=>{E=x,E.forEach((V,$)=>{$.isValidDocument()||(v=v.add(V))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,E)).next(x=>{d=x;let V=[];for(let $ of a){let O=FD($,d.get($.key).overlayedDocument);O!=null&&V.push(new nn($.key,O,pE(O.value.mapValue),Pt.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,V,a)}).next(x=>{h=x;let V=x.applyToLocalDocumentSet(d,v);return c.documentOverlayCache.saveOverlays(f,x.batchId,V)})}).then(()=>({batchId:h.batchId,changes:TE(d)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,c){let l=s.Fa[s.currentUser.toKey()];l||(l=new It(G)),l=l.insert(a,c),s.Fa[s.currentUser.toKey()]=l}(i,r.batchId,n),yield Zn(i,r.changes),yield Mo(i.remoteStore)}catch(r){let o=No(r,"Failed to persist write");n.reject(o)}})}function yI(e,t){return p(this,null,function*(){let n=D(e);try{let i=yield eR(n.localStore,t);t.targetChanges.forEach((r,o)=>{let s=n.Ca.get(o);s&&(j(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.pa=!0:r.modifiedDocuments.size>0?j(s.pa):r.removedDocuments.size>0&&(j(s.pa),s.pa=!1))}),yield Zn(n,i,t)}catch(i){yield xi(i)}})}function Hw(e,t,n){let i=D(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.wa.forEach((o,s)=>{let a=s.view.G_(t);a.snapshot&&r.push(a.snapshot)}),function(s,a){let c=D(s);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Q_)h.G_(a)&&(l=!0)}),l&&hg(c)}(i.eventManager,t),r.length&&i.ya.u_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function ER(e,t,n){return p(this,null,function*(){let i=D(e);i.sharedClientState.updateQueryState(t,"rejected",n);let r=i.Ca.get(t),o=r&&r.key;if(o){let s=new It(A.comparator);s=s.insert(o,Wt.newNoDocument(o,B.min()));let a=Q().add(o),c=new _a(B.min(),new Map,new It(G),s,a);yield yI(i,c),i.Da=i.Da.remove(o),i.Ca.delete(t),gg(i)}else yield Io(i.localStore,t,!1).then(()=>To(i,t,n)).catch(xi)})}function IR(e,t){return p(this,null,function*(){let n=D(e),i=t.batch.batchId;try{let r=yield tR(n.localStore,t);pg(n,i,null),mg(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Zn(n,r)}catch(r){yield xi(r)}})}function xR(e,t,n){return p(this,null,function*(){let i=D(e);try{let r=yield function(s,a){let c=D(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(j(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(i.localStore,t);pg(i,t,n),mg(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),yield Zn(i,r)}catch(r){yield xi(r)}})}function CR(e,t){return p(this,null,function*(){let n=D(e);Ti(n.remoteStore)||I("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=D(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(i===-1)return void t.resolve();let r=n.Ma.get(i)||[];r.push(t),n.Ma.set(i,r)}catch(i){let r=No(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})}function mg(e,t){(e.Ma.get(t)||[]).forEach(n=>{n.resolve()}),e.Ma.delete(t)}function pg(e,t,n){let i=D(e),r=i.Fa[i.currentUser.toKey()];if(r){let o=r.get(t);o&&(n?o.reject(n):o.resolve(),r=r.remove(t)),i.Fa[i.currentUser.toKey()]=r}}function To(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let i of e.Sa.get(t))e.wa.delete(i),n&&e.ya.La(i,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach(i=>{e.va.containsKey(i)||wI(e,i)})}function wI(e,t){e.ba.delete(t.path.canonicalString());let n=e.Da.get(t);n!==null&&(xo(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),gg(e))}function Ap(e,t,n){for(let i of n)i instanceof Fu?(e.va.addReference(i.key,t),TR(e,i)):i instanceof Vu?(I("SyncEngine","Document no longer in limbo: "+i.key),e.va.removeReference(i.key,t),e.va.containsKey(i.key)||wI(e,i.key)):P()}function TR(e,t){let n=t.key,i=n.path.canonicalString();e.Da.get(n)||e.ba.has(i)||(I("SyncEngine","New document in limbo: "+n),e.ba.add(i),gg(e))}function gg(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){let t=e.ba.values().next().value;e.ba.delete(t);let n=new A(lt.fromString(t)),i=e.xa.next();e.Ca.set(i,new Cp(n)),e.Da=e.Da.insert(n,i),Yu(e.remoteStore,new yo(ve(ko(n.path)),i,"TargetPurposeLimboResolution",Ae._e))}}function Zn(e,t,n){return p(this,null,function*(){let i=D(e),r=[],o=[],s=[];i.wa.isEmpty()||(i.wa.forEach((a,c)=>{s.push(i.Na(c,t,n).then(l=>{if((l||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let u=op.Ki(c.targetId,l);o.push(u)}}))}),yield Promise.all(s),i.ya.u_(r),yield function(c,l){return p(this,null,function*(){let u=D(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>m.forEach(l,h=>m.forEach(h.qi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>m.forEach(h.Qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Ci(d))throw d;I("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ns.get(h),E=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(E);u.ns=u.ns.insert(h,v)}}})}(i.localStore,o))})}function AR(e,t){return p(this,null,function*(){let n=D(e);if(!n.currentUser.isEqual(t)){I("SyncEngine","User change. New user:",t.toKey());let i=yield sI(n.localStore,t);n.currentUser=t,function(o,s){o.Ma.forEach(a=>{a.forEach(c=>{c.reject(new w(b.CANCELLED,s))})}),o.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Zn(n,i.us)}})}function SR(e,t){let n=D(e),i=n.Ca.get(t);if(i&&i.pa)return Q().add(i.key);{let r=Q(),o=n.Sa.get(t);if(!o)return r;for(let s of o){let a=n.wa.get(s);r=r.unionWith(a.view.Ia)}return r}}function DR(e,t){return p(this,null,function*(){let n=D(e),i=yield Tu(n.localStore,t.query,!0),r=t.view.fa(i);return n.isPrimaryClient&&Ap(n,t.targetId,r.Va),r})}function RR(e,t){return p(this,null,function*(){let n=D(e);return uI(n.localStore,t).then(i=>Zn(n,i))})}function kR(e,t,n,i){return p(this,null,function*(){let r=D(e),o=yield function(a,c){let l=D(a),u=D(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.vn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):m.resolve(null)))}(r.localStore,t);o!==null?(n==="pending"?yield Mo(r.remoteStore):n==="acknowledged"||n==="rejected"?(pg(r,t,i||null),mg(r,t),function(a,c){D(D(a).mutationQueue).Mn(c)}(r.localStore,t)):P(),yield Zn(r,o)):I("SyncEngine","Cannot apply mutation batch with id: "+t)})}function PR(e,t){return p(this,null,function*(){let n=D(e);if(Xu(n),bg(n),t===!0&&n.Oa!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield Kw(n,i.toArray());n.Oa=!0,yield bp(n.remoteStore,!0);for(let o of r)Yu(n.remoteStore,o)}else if(t===!1&&n.Oa!==!1){let i=[],r=Promise.resolve();n.Sa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(To(n,s),Io(n.localStore,s,!0))),xo(n.remoteStore,s)}),yield r,yield Kw(n,i),function(s){let a=D(s);a.Ca.forEach((c,l)=>{xo(a.remoteStore,l)}),a.va.mr(),a.Ca=new Map,a.Da=new It(A.comparator)}(n),n.Oa=!1,yield bp(n.remoteStore,!1)}})}function Kw(e,t,n){return p(this,null,function*(){let i=D(e),r=[],o=[];for(let s of t){let a,c=i.Sa.get(s);if(c&&c.length!==0){a=yield Eo(i.localStore,ve(c[0]));for(let l of c){let u=i.wa.get(l),d=yield DR(i,u);d.snapshot&&o.push(d.snapshot)}}else{let l=yield lI(i.localStore,s);a=yield Eo(i.localStore,l),yield fg(i,EI(l),s,!1,a.resumeToken)}r.push(a)}return i.ya.u_(o),r})}function EI(e){return wE(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function MR(e){return function(n){return D(D(n).persistence).Bi()}(D(e).localStore)}function OR(e,t,n,i){return p(this,null,function*(){let r=D(e);if(r.Oa)return void I("SyncEngine","Ignoring unexpected query state notification.");let o=r.Sa.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield uI(r.localStore,IE(o[0])),a=_a.createSynthesizedRemoteEventForCurrentChange(t,n==="current",Zt.EMPTY_BYTE_STRING);yield Zn(r,s,a);break}case"rejected":yield Io(r.localStore,t,!0),To(r,t,i);break;default:P()}})}function NR(e,t,n){return p(this,null,function*(){let i=Xu(e);if(i.Oa){for(let r of t){if(i.Sa.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){I("SyncEngine","Adding an already active target "+r);continue}let o=yield lI(i.localStore,r),s=yield Eo(i.localStore,o);yield fg(i,EI(o),s.targetId,!1,s.resumeToken),Yu(i.remoteStore,s)}for(let r of n)i.Sa.has(r)&&(yield Io(i.localStore,r,!1).then(()=>{xo(i.remoteStore,r),To(i,r)}).catch(xi))}})}function Xu(e){let t=D(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=yI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=SR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ER.bind(null,t),t.ya.u_=pR.bind(null,t.eventManager),t.ya.La=gR.bind(null,t.eventManager),t}function bg(e){let t=D(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=IR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xR.bind(null,t),t}function FR(e,t,n){let i=D(e);(function(o,s,a){return p(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(f,E){let v=D(f),x=Lt(E.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",V=>v.$r.getBundleMetadata(V,E.id)).then(V=>!!V&&V.createTime.compareTo(x)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(_I(c));let l=new Ip(c,o.localStore,s.serializer),u=yield s.Ba();for(;u;){let h=yield l.sa(u);h&&a._updateProgress(h),u=yield s.Ba()}let d=yield l.complete();return yield Zn(o,d.aa,void 0),yield function(f,E){let v=D(f);return v.persistence.runTransaction("Save bundle","readwrite",x=>v.$r.saveBundleMetadata(x,E))}(o.localStore,c),a._completeWith(d.progress),Promise.resolve(d._a)}catch(c){return Ve("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(i,t,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Aa=class{constructor(){this.synchronizeTabs=!1}initialize(t){return p(this,null,function*(){this.serializer=Na(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return oI(this.persistence,new Cu,t.initialUser,this.serializer)}createPersistence(t){return new Iu(xu.Hr,this.serializer)}createSharedClientState(t){return new Du}terminate(){return p(this,null,function*(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var ju=class e extends Aa{constructor(t,n,i){super(),this.ka=t,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){return p(this,null,function*(){yield Kd(e.prototype,this,"initialize").call(this,t),yield this.ka.initialize(this,t),yield bg(this.ka.syncEngine),yield Mo(this.ka.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(t){return oI(this.persistence,new Cu,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,n){let i=this.persistence.referenceDelegate.garbageCollector;return new qm(i,t.asyncQueue,n)}createIndexBackfillerScheduler(t,n){let i=new cm(n,this.persistence);return new am(t.asyncQueue,i)}createPersistence(t){let n=sg(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Fe.withCacheSize(this.cacheSizeBytes):Fe.DEFAULT;return new rp(this.synchronizeTabs,n,t.clientId,i,t.asyncQueue,hI(),Xl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new Du}},Sp=class e extends ju{constructor(t,n){super(t,n,!1),this.ka=t,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(t){return p(this,null,function*(){yield Kd(e.prototype,this,"initialize").call(this,t);let n=this.ka.syncEngine;this.sharedClientState instanceof ca&&(this.sharedClientState.syncEngine={Zs:kR.bind(null,n),Xs:OR.bind(null,n),eo:NR.bind(null,n),Bi:MR.bind(null,n),Ys:RR.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>p(this,null,function*(){yield PR(this.ka.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(t){let n=hI();if(!ca.D(n))throw new w(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=sg(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new ca(n,t.asyncQueue,i,t.clientId,t.initialUser)}},Sa=class{initialize(t,n){return p(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Hw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=AR.bind(null,this.syncEngine),yield bp(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new yp}()}createDatastore(t){let n=Na(t.databaseInfo.databaseId),i=function(o){return new dp(o)}(t.databaseInfo);return function(o,s,a,c){return new mp(o,s,a,c)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,r,o,s,a){return new gp(i,r,o,s,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Hw(this.syncEngine,n,0),function(){return Ru.D()?new Ru:new lp}())}createSyncEngine(t,n){return function(r,o,s,a,c,l,u){let d=new Tp(r,o,s,a,c,l);return u&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var t;yield function(i){return p(this,null,function*(){let r=D(i);I("RemoteStore","RemoteStore shutting down."),r.v_.add(5),yield Po(r),r.M_.shutdown(),r.x_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};function Qw(e,t=10240){let n=0;return{read(){return p(this,null,function*(){if(n<e.byteLength){let r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})},cancel(){return p(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ao=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.qa(this.observer.next,t)}error(t){this.observer.error?this.qa(this.observer.error,t):Ft("Uncaught Error in snapshot listener:",t.toString())}Qa(){this.muted=!0}qa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}};var Dp=class{constructor(t,n){this.Ka=t,this.serializer=n,this.metadata=new Gt,this.buffer=new Uint8Array,this.$a=function(){return new TextDecoder("utf-8")}(),this.Ua().then(i=>{i&&i.ra()?this.metadata.resolve(i.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.na)}`))},i=>this.metadata.reject(i))}close(){return this.Ka.cancel()}getMetadata(){return p(this,null,function*(){return this.metadata.promise})}Ba(){return p(this,null,function*(){return yield this.getMetadata(),this.Ua()})}Ua(){return p(this,null,function*(){let t=yield this.Wa();if(t===null)return null;let n=this.$a.decode(t),i=Number(n);isNaN(i)&&this.Ga(`length string (${n}) is not valid number`);let r=yield this.za(i);return new Ep(JSON.parse(r),t.length+i)})}ja(){return this.buffer.findIndex(t=>t===123)}Wa(){return p(this,null,function*(){for(;this.ja()<0&&!(yield this.Ha()););if(this.buffer.length===0)return null;let t=this.ja();t<0&&this.Ga("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),n})}za(t){return p(this,null,function*(){for(;this.buffer.length<t;)(yield this.Ha())&&this.Ga("Reached the end of bundle when more is expected.");let n=this.$a.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),n})}Ga(t){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${t}`)}Ha(){return p(this,null,function*(){let t=yield this.Ka.read();if(!t.done){let n=new Uint8Array(this.buffer.length+t.value.length);n.set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n}return t.done})}};var Rp=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){return p(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new w(b.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return p(this,null,function*(){let s=D(r),a={documents:o.map(d=>ya(s.serializer,d))},c=yield s.vo("BatchGetDocuments",s.serializer.databaseId,lt.emptyPath(),a,o.length),l=new Map;c.forEach(d=>{let h=zD(s.serializer,d);l.set(h.key.toString(),h)});let u=[];return o.forEach(d=>{let h=l.get(d.toString());j(!!h),u.push(h)}),u})}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n})}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Ei(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){return p(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{let r=A.fromPath(i);this.mutations.push(new pa(r,this.precondition(r)))}),yield function(i,r){return p(this,null,function*(){let o=D(i),s={writes:r.map(a=>wa(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,lt.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw P();n=B.min()}let i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new w(b.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){let n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(B.min())?Pt.exists(!1):Pt.updateTime(n):Pt.none()}preconditionForUpdate(t){let n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(B.min()))throw new w(b.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pt.updateTime(n)}return Pt.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};var kp=class{constructor(t,n,i,r,o){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Ja=i.maxAttempts,this.jo=new Ca(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo(()=>p(this,null,function*(){let t=new Rp(this.datastore),n=this.Xa(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.eu(r)}))}).catch(i=>{this.eu(i)})}))}Xa(t){try{let n=this.updateFunction(t);return!ka(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(t){this.Ja>0&&this.tu(t)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(t)}tu(t){if(t.name==="FirebaseError"){let n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!VE(n)}return!1}};var Pp=class{constructor(t,n,i,r){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=qt.UNAUTHENTICATED,this.clientId=tu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>p(this,null,function*(){I("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(I("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){let i=No(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function Zl(e,t){return p(this,null,function*(){e.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");let n=e.configuration;yield t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(r=>p(this,null,function*(){i.isEqual(r)||(yield sI(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t})}function Mp(e,t){return p(this,null,function*(){e.asyncQueue.verifyOperationInProgress();let n=yield _g(e);I("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>Gw(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>Gw(t.remoteStore,r)),e._onlineComponents=t})}function II(e){return e.name==="FirebaseError"?e.code===b.FAILED_PRECONDITION||e.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}function _g(e){return p(this,null,function*(){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Zl(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!II(n))throw n;Ve("Error using user provided cache. Falling back to memory cache: "+n),yield Zl(e,new Aa)}}else I("FirestoreClient","Using default OfflineComponentProvider"),yield Zl(e,new Aa);return e._offlineComponents})}function Zu(e){return p(this,null,function*(){return e._onlineComponents||(e._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),yield Mp(e,e._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),yield Mp(e,new Sa))),e._onlineComponents})}function xI(e){return _g(e).then(t=>t.persistence)}function vg(e){return _g(e).then(t=>t.localStore)}function CI(e){return Zu(e).then(t=>t.remoteStore)}function yg(e){return Zu(e).then(t=>t.syncEngine)}function VR(e){return Zu(e).then(t=>t.datastore)}function So(e){return p(this,null,function*(){let t=yield Zu(e),n=t.eventManager;return n.onListen=bR.bind(null,t.syncEngine),n.onUnlisten=vR.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_R.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=yR.bind(null,t.syncEngine),n})}function LR(e){return e.asyncQueue.enqueue(()=>p(this,null,function*(){let t=yield xI(e),n=yield CI(e);return t.setNetworkEnabled(!0),function(r){let o=D(r);return o.v_.delete(0),Fa(o)}(n)}))}function jR(e){return e.asyncQueue.enqueue(()=>p(this,null,function*(){let t=yield xI(e),n=yield CI(e);return t.setNetworkEnabled(!1),function(r){return p(this,null,function*(){let o=D(r);o.v_.add(0),yield Po(o),o.x_.set("Offline")})}(n)}))}function BR(e,t){let n=new Gt;return e.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(r,o,s){return p(this,null,function*(){try{let a=yield function(l,u){let d=D(l);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new w(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=No(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield vg(e),t,n)})),n.promise}function TI(e,t,n={}){let i=new Gt;return e.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(o,s,a,c,l){let u=new Ao({next:h=>{s.enqueueAndForget(()=>dg(o,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new w(b.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new w(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Ta(ko(a.path),u,{includeMetadataChanges:!0,ta:!0});return ug(o,d)}(yield So(e),e.asyncQueue,t,n,i)})),i.promise}function UR(e,t){let n=new Gt;return e.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(r,o,s){return p(this,null,function*(){try{let a=yield Tu(r,o,!0),c=new Lu(o,a.hs),l=c.Ta(a.documents),u=c.applyChanges(l,!1);s.resolve(u.snapshot)}catch(a){let c=No(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield vg(e),t,n)})),n.promise}function AI(e,t,n={}){let i=new Gt;return e.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(o,s,a,c,l){let u=new Ao({next:h=>{s.enqueueAndForget(()=>dg(o,d)),h.fromCache&&c.source==="server"?l.reject(new w(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Ta(a,u,{includeMetadataChanges:!0,ta:!0});return ug(o,d)}(yield So(e),e.asyncQueue,t,n,i)})),i.promise}function zR(e,t){let n=new Ao(t);return e.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(r,o){D(r).W_.add(o),o.next()}(yield So(e),n)})),()=>{n.Qa(),e.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(r,o){D(r).W_.delete(o)}(yield So(e),n)}))}}function $R(e,t,n,i){let r=function(s,a){let c;return c=typeof s=="string"?jE().encode(s):s,function(u,d){return new Dp(u,d)}(function(u,d){if(u instanceof Uint8Array)return Qw(u,d);if(u instanceof ArrayBuffer)return Qw(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Na(t));e.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){FR(yield yg(e),r,i)}))}function qR(e,t){return e.asyncQueue.enqueue(()=>p(this,null,function*(){return function(i,r){let o=D(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,r))}(yield vg(e),t)}))}function SI(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var Yw=new Map;function wg(e,t,n){if(!n)throw new w(b.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Eg(e,t,n,i){if(t===!0&&i===!0)throw new w(b.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Xw(e){if(!A.isDocumentKey(e))throw new w(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Zw(e){if(A.isDocumentKey(e))throw new w(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ju(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":P()}function ut(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new w(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Ju(e);throw new w(b.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function DI(e,t){if(t<=0)throw new w(b.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}var Bu=class{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new w(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new w(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Eg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SI((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new w(b.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new w(b.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new w(b.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},hr=class{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new w(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bu(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Xf;switch(i.type){case"firstParty":return new em(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new w(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=Yw.get(n);i&&(I("ComponentProvider","Removing Datastore"),Yw.delete(n),i.terminate())}(this),Promise.resolve()}};function td(e,t,n,i={}){var r;let o=(e=ut(e,hr))._getSettings(),s=`${t}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Ve("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=qt.MOCK_USER;else{a=_v(i.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);let l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new w(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new qt(l)}e._authCredentials=new Zf(new Jl(a,c))}}var ae=class e{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new e(this.firestore,t,this._query)}},yt=class e{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},xn=class e extends ae{constructor(t,n,i){super(t,n,ko(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new yt(this.firestore,null,new A(t))}withConverter(t){return new e(this.firestore,t,this._path)}};function Va(e,t,...n){if(e=St(e),wg("collection","path",t),e instanceof hr){let i=lt.fromString(t,...n);return Zw(i),new xn(e,null,i)}{if(!(e instanceof yt||e instanceof xn))throw new w(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(lt.fromString(t,...n));return Zw(i),new xn(e.firestore,null,i)}}function Ig(e,t){if(e=ut(e,hr),wg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new w(b.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ae(e,null,function(i){return new en(lt.emptyPath(),i)}(t))}function br(e,t,...n){if(e=St(e),arguments.length===1&&(t=tu.newId()),wg("doc","path",t),e instanceof hr){let i=lt.fromString(t,...n);return Xw(i),new yt(e,null,new A(i))}{if(!(e instanceof yt||e instanceof xn))throw new w(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(lt.fromString(t,...n));return Xw(i),new yt(e.firestore,e instanceof xn?e.converter:null,new A(i))}}function La(e,t){return e=St(e),t=St(t),(e instanceof yt||e instanceof xn)&&(t instanceof yt||t instanceof xn)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ed(e,t){return e=St(e),t=St(t),e instanceof ae&&t instanceof ae&&e.firestore===t.firestore&&Ma(e._query,t._query)&&e.converter===t.converter}var Op=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Ca(this,"async_queue_retry"),this.cu=()=>{let n=Xl();n&&I("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let t=Xl();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.lu(),this.hu(t)}enterRestrictedMode(t){if(!this.iu){this.iu=!0,this.au=t||!1;let n=Xl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(t){if(this.lu(),this.iu)return new Promise(()=>{});let n=new Gt;return this.hu(()=>this.iu&&this.au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ru.push(t),this.Pu()))}Pu(){return p(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(t){if(!Ci(t))throw t;I("AsyncQueue","Operation failed with retryable error: "+t)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(t){let n=this.nu.then(()=>(this._u=!0,t().catch(i=>{this.ou=i,this._u=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw Ft("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this._u=!1,i))));return this.nu=n,n}enqueueAfterDelay(t,n,i){this.lu(),this.uu.indexOf(t)>-1&&(n=0);let r=_p.createAndSchedule(this,t,n,i,o=>this.Iu(o));return this.su.push(r),r}lu(){this.ou&&P()}verifyOperationInProgress(){}Tu(){return p(this,null,function*(){let t;do t=this.nu,yield t;while(t!==this.nu)})}Eu(t){for(let n of this.su)if(n.timerId===t)return!0;return!1}du(t){return this.Tu().then(()=>{this.su.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.su)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tu()})}Au(t){this.uu.push(t)}Iu(t){let n=this.su.indexOf(t);this.su.splice(n,1)}};function Np(e){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(e,["next","error","complete"])}var Fp=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,n,i){this._progressObserver={next:t,error:n,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,n){return this._taskCompletionResolver.promise.then(t,n)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}};var RI=-1,Tt=class extends hr{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=function(){return new Op}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||PI(this),this._firestoreClient.terminate()}};function kI(e,t){let n=typeof e=="object"?e:gs(),i=typeof e=="string"?e:t||"(default)",r=yh(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=bv("firestore");o&&td(r,...o)}return r}function Qt(e){return e._firestoreClient||PI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function PI(e){var t,n,i;let r=e._freezeSettings(),o=function(a,c,l,u){return new lm(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,SI(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new Pp(e._authCredentials,e._appCheckCredentials,e._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function xg(e,t){OI(e=ut(e,Tt));let n=Qt(e);if(n._uninitializedComponentsProvider)throw new w(b.FAILED_PRECONDITION,"SDK cache is already specified.");Ve("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=e._freezeSettings(),r=new Sa;return MI(n,r,new ju(r,i.cacheSizeBytes,t?.forceOwnership))}function Cg(e){OI(e=ut(e,Tt));let t=Qt(e);if(t._uninitializedComponentsProvider)throw new w(b.FAILED_PRECONDITION,"SDK cache is already specified.");Ve("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=e._freezeSettings(),i=new Sa;return MI(t,i,new Sp(i,n.cacheSizeBytes))}function MI(e,t,n){let i=new Gt;return e.asyncQueue.enqueue(()=>p(this,null,function*(){try{yield Zl(e,n),yield Mp(e,t),i.resolve()}catch(r){let o=r;if(!II(o))throw o;Ve("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function Tg(e){if(e._initialized&&!e._terminated)throw new w(b.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let t=new Gt;return e._queue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{yield function(i){return p(this,null,function*(){if(!Wn.D())return Promise.resolve();let r=i+"main";yield Wn.delete(r)})}(sg(e._databaseId,e._persistenceKey)),t.resolve()}catch(n){t.reject(n)}})),t.promise}function Ag(e){return function(n){let i=new Gt;return n.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return CR(yield yg(n),i)})),i.promise}(Qt(e=ut(e,Tt)))}function Sg(e){return LR(Qt(e=ut(e,Tt)))}function Dg(e){return jR(Qt(e=ut(e,Tt)))}function Rg(e,t){let n=Qt(e=ut(e,Tt)),i=new Fp;return $R(n,e._databaseId,t,i),i}function kg(e,t){return qR(Qt(e=ut(e,Tt)),t).then(n=>n?new ae(e,null,n.query):null)}function OI(e){if(e._initialized||e._terminated)throw new w(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Sn=class e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new e(Zt.fromBase64String(t))}catch(n){throw new w(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new e(Zt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var rn=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new w(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Yn=class{constructor(t){this._methodName=t}};var fr=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new w(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new w(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return G(this._lat,t._lat)||G(this._long,t._long)}};var GR=/^__.*__$/,Vp=class{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new nn(t,this.data,this.fieldMask,n,this.fieldTransforms):new wi(t,this.data,n,this.fieldTransforms)}},Uu=class{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new nn(t,this.data,this.fieldMask,n,this.fieldTransforms)}};function NI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P()}}var zu=class e{constructor(t,n,i,r,o,s){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Ru(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(t){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.mu({path:i,gu:!1});return r.pu(t),r}yu(t){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.mu({path:i,gu:!1});return r.Ru(),r}wu(t){return this.mu({path:void 0,gu:!0})}Su(t){return $u(t,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let t=0;t<this.path.length;t++)this.pu(this.path.get(t))}pu(t){if(t.length===0)throw this.Su("Document fields must not be empty");if(NI(this.Vu)&&GR.test(t))throw this.Su('Document fields cannot begin and end with "__"')}},Lp=class{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Na(t)}Cu(t,n,i,r=!1){return new zu({Vu:t,methodName:n,Du:i,path:Vt.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function _r(e){let t=e._freezeSettings(),n=Na(e._databaseId);return new Lp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function nd(e,t,n,i,r,o={}){let s=e.Cu(o.merge||o.mergeFields?2:0,t,n,r);Og("Data must be an object, but it was:",s,i);let a=LI(i,s),c,l;if(o.merge)c=new Se(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let d of o.mergeFields){let h=$p(t,d,n);if(!s.contains(h))throw new w(b.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);BI(u,h)||u.push(h)}c=new Se(u),l=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=s.fieldTransforms;return new Vp(new he(a),c,l)}var Da=class e extends Yn{_toFieldTransform(t){if(t.Vu!==2)throw t.Vu===1?t.Su(`${this._methodName}() can only appear at the top level of your update data`):t.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof e}};function FI(e,t,n){return new zu({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var jp=class e extends Yn{_toFieldTransform(t){return new lr(t.path,new vi)}isEqual(t){return t instanceof e}},Bp=class e extends Yn{constructor(t,n){super(t),this.vu=n}_toFieldTransform(t){let n=FI(this,t,!0),i=this.vu.map(o=>vr(o,n)),r=new Kn(i);return new lr(t.path,r)}isEqual(t){return t instanceof e&&vh(this.vu,t.vu)}},Up=class e extends Yn{constructor(t,n){super(t),this.vu=n}_toFieldTransform(t){let n=FI(this,t,!0),i=this.vu.map(o=>vr(o,n)),r=new Qn(i);return new lr(t.path,r)}isEqual(t){return t instanceof e&&vh(this.vu,t.vu)}},zp=class e extends Yn{constructor(t,n){super(t),this.Fu=n}_toFieldTransform(t){let n=new yi(t.serializer,RE(t.serializer,this.Fu));return new lr(t.path,n)}isEqual(t){return t instanceof e&&this.Fu===t.Fu}};function Pg(e,t,n,i){let r=e.Cu(1,t,n);Og("Data must be an object, but it was:",r,i);let o=[],s=he.empty();gr(i,(c,l)=>{let u=Ng(t,c,n);l=St(l);let d=r.yu(u);if(l instanceof Da)o.push(u);else{let h=vr(l,d);h!=null&&(o.push(u),s.set(u,h))}});let a=new Se(o);return new Uu(s,a,r.fieldTransforms)}function Mg(e,t,n,i,r,o){let s=e.Cu(1,t,n),a=[$p(t,i,n)],c=[r];if(o.length%2!=0)throw new w(b.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push($p(t,o[h])),c.push(o[h+1]);let l=[],u=he.empty();for(let h=a.length-1;h>=0;--h)if(!BI(l,a[h])){let f=a[h],E=c[h];E=St(E);let v=s.yu(f);if(E instanceof Da)l.push(f);else{let x=vr(E,v);x!=null&&(l.push(f),u.set(f,x))}}let d=new Se(l);return new Uu(u,d,s.fieldTransforms)}function VI(e,t,n,i=!1){return vr(n,e.Cu(i?4:3,t))}function vr(e,t){if(jI(e=St(e)))return Og("Unsupported field value:",t,e),LI(e,t);if(e instanceof Yn)return function(i,r){if(!NI(r.Vu))throw r.Su(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Su(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&t.Vu!==4)throw t.Su("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let c=vr(a,r.wu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(e,t)}return function(i,r){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return RE(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Dt.fromDate(i);return{timestampValue:vo(r.serializer,o)}}if(i instanceof Dt){let o=new Dt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vo(r.serializer,o)}}if(i instanceof fr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Sn)return{bytesValue:BE(r.serializer,i._byteString)};if(i instanceof yt){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Su(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ig(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Su(`Unsupported field value: ${Ju(i)}`)}(e,t)}function LI(e,t){let n={};return hE(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):gr(e,(i,r)=>{let o=vr(r,t.fu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function jI(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Dt||e instanceof fr||e instanceof Sn||e instanceof yt||e instanceof Yn)}function Og(e,t,n){if(!jI(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=Ju(n);throw i==="an object"?t.Su(e+" a custom object"):t.Su(e+" "+i)}}function $p(e,t,n){if((t=St(t))instanceof rn)return t._internalPath;if(typeof t=="string")return Ng(e,t);throw $u("Field path arguments must be of type string or ",e,!1,void 0,n)}var WR=new RegExp("[~\\*/\\[\\]]");function Ng(e,t,n){if(t.search(WR)>=0)throw $u(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new rn(...t.split("."))._internalPath}catch{throw $u(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function $u(e,t,n,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new w(b.INVALID_ARGUMENT,a+e+c)}function BI(e,t){return e.some(n=>n.isEqual(t))}var mr=class{constructor(t,n,i,r,o){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new qp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let n=this._document.data.field(id("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}},qp=class extends mr{data(){return super.data()}};function id(e,t){return typeof t=="string"?Ng(e,t):t instanceof rn?t._internalPath:t._delegate._internalPath}function UI(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new w(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ra=class{},pr=class extends Ra{};function sn(e,t,...n){let i=[];t instanceof Ra&&i.push(t),i=i.concat(n),function(o){let s=o.filter(c=>c instanceof Gp).length,a=o.filter(c=>c instanceof qu).length;if(s>1||s>0&&a>0)throw new w(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)e=r._apply(e);return e}var qu=class e extends pr{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new e(t,n,i)}_apply(t){let n=this._parse(t);return $I(t._query,n),new ae(t.firestore,t.converter,Em(t._query,n))}_parse(t){let n=_r(t.firestore);return function(o,s,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new w(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){tE(d,u);let f=[];for(let E of d)f.push(Jw(c,o,E));h={arrayValue:{values:f}}}else h=Jw(c,o,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||tE(d,u),h=VI(a,s,d,u==="in"||u==="not-in");return rt.create(l,u,h)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}};function rd(e,t,n){let i=t,r=id("where",e);return qu._create(r,i,n)}var Gp=class e extends Ra{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new e(t,n)}_parse(t){let n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:gt.create(n,this._getOperator())}_apply(t){let n=this._parse(t);return n.getFilters().length===0?t:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let c of a)$I(s,c),s=Em(s,c)}(t._query,n),new ae(t.firestore,t.converter,Em(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Wp=class e extends pr{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new e(t,n)}_apply(t){let n=function(r,o,s){if(r.startAt!==null)throw new w(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new w(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ar(o,s)}(t._query,this._field,this._direction);return new ae(t.firestore,t.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new en(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}};function Fg(e,t="asc"){let n=t,i=id("orderBy",e);return Wp._create(i,n)}var Gu=class e extends pr{constructor(t,n,i){super(),this.type=t,this._limit=n,this._limitType=i}static _create(t,n,i){return new e(t,n,i)}_apply(t){return new ae(t.firestore,t.converter,uu(t._query,this._limit,this._limitType))}};function Vg(e){return DI("limit",e),Gu._create("limit",e,"F")}function Lg(e){return DI("limitToLast",e),Gu._create("limitToLast",e,"L")}var Wu=class e extends pr{constructor(t,n,i){super(),this.type=t,this._docOrFields=n,this._inclusive=i}static _create(t,n,i){return new e(t,n,i)}_apply(t){let n=zI(t,this.type,this._docOrFields,this._inclusive);return new ae(t.firestore,t.converter,function(r,o){return new en(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(t._query,n))}};function jg(...e){return Wu._create("startAt",e,!0)}function Bg(...e){return Wu._create("startAfter",e,!1)}var Hu=class e extends pr{constructor(t,n,i){super(),this.type=t,this._docOrFields=n,this._inclusive=i}static _create(t,n,i){return new e(t,n,i)}_apply(t){let n=zI(t,this.type,this._docOrFields,this._inclusive);return new ae(t.firestore,t.converter,function(r,o){return new en(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(t._query,n))}};function Ug(...e){return Hu._create("endBefore",e,!1)}function zg(...e){return Hu._create("endAt",e,!0)}function zI(e,t,n,i){if(n[0]=St(n[0]),n[0]instanceof mr)return function(o,s,a,c,l){if(!c)throw new w(b.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of uo(o))if(d.field.isKeyField())u.push(sr(s,c.key));else{let h=c.data.field(d.field);if(Qu(h))throw new w(b.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new w(b.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new Tn(u,l)}(e._query,e.firestore._databaseId,t,n[0]._document,i);{let r=_r(e.firestore);return function(s,a,c,l,u,d){let h=s.explicitOrderBy;if(u.length>h.length)throw new w(b.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let E=0;E<u.length;E++){let v=u[E];if(h[E].field.isKeyField()){if(typeof v!="string")throw new w(b.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof v}`);if(!eg(s)&&v.indexOf("/")!==-1)throw new w(b.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${v}' contains a slash.`);let x=s.path.child(lt.fromString(v));if(!A.isDocumentKey(x))throw new w(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);let V=new A(x);f.push(sr(a,V))}else{let x=VI(c,l,v);f.push(x)}}return new Tn(f,d)}(e._query,e.firestore._databaseId,r,t,n,i)}}function Jw(e,t,n){if(typeof(n=St(n))=="string"){if(n==="")throw new w(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eg(t)&&n.indexOf("/")!==-1)throw new w(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=t.path.child(lt.fromString(n));if(!A.isDocumentKey(i))throw new w(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return sr(e,new A(i))}if(n instanceof yt)return sr(e,n._key);throw new w(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ju(n)}.`)}function tE(e,t){if(!Array.isArray(e)||e.length===0)throw new w(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function $I(e,t){let n=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new w(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new w(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var Do=class{convertValue(t,n="none"){switch(or(t)){case 0:return null;case 1:return t.booleanValue;case 2:return kt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(gi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw P()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){let i={};return gr(t,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(t){return new fr(kt(t.latitude),kt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":let i=Jp(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ha(t));default:return null}}convertTimestamp(t){let n=Hn(t);return new Dt(n.seconds,n.nanos)}convertDocumentKey(t,n){let i=lt.fromString(t);j(XE(i));let r=new bi(i.get(1),i.get(3)),o=new A(i.popFirst(5));return r.isEqual(n)||Ft(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function od(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}var Hp=class extends Do{constructor(t){super(),this.firestore=t}convertBytes(t){return new Sn(t)}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return new yt(this.firestore,null,n)}};var Gn=class{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},je=class extends mr{constructor(t,n,i,r,o,s){super(t,n,i,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let n=new mi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){let i=this._document.data.field(id("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},mi=class extends je{data(t={}){return super.data(t)}},on=class{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new Gn(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new mi(this._firestore,this._userDataWriter,i.key,i,new Gn(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let c=new mi(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Gn(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new mi(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Gn(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:HR(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function HR(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P()}}function sd(e,t){return e instanceof je&&t instanceof je?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof on&&t instanceof on&&e._firestore===t._firestore&&ed(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function $g(e){e=ut(e,yt);let t=ut(e.firestore,Tt);return TI(Qt(t),e._key).then(n=>Qg(t,e,n))}var Xn=class extends Do{constructor(t){super(),this.firestore=t}convertBytes(t){return new Sn(t)}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return new yt(this.firestore,null,n)}};function qg(e){e=ut(e,yt);let t=ut(e.firestore,Tt),n=Qt(t),i=new Xn(t);return BR(n,e._key).then(r=>new je(t,i,e._key,r,new Gn(r!==null&&r.hasLocalMutations,!0),e.converter))}function Gg(e){e=ut(e,yt);let t=ut(e.firestore,Tt);return TI(Qt(t),e._key,{source:"server"}).then(n=>Qg(t,e,n))}function ad(e){e=ut(e,ae);let t=ut(e.firestore,Tt),n=Qt(t),i=new Xn(t);return UI(e._query),AI(n,e._query).then(r=>new on(t,i,e,r))}function Wg(e){e=ut(e,ae);let t=ut(e.firestore,Tt),n=Qt(t),i=new Xn(t);return UR(n,e._query).then(r=>new on(t,i,e,r))}function Hg(e){e=ut(e,ae);let t=ut(e.firestore,Tt),n=Qt(t),i=new Xn(t);return AI(n,e._query,{source:"server"}).then(r=>new on(t,i,e,r))}function cd(e,t,n){e=ut(e,yt);let i=ut(e.firestore,Tt),r=od(e.converter,t,n);return Vo(i,[nd(_r(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,Pt.none())])}function ja(e,t,n,...i){e=ut(e,yt);let r=ut(e.firestore,Tt),o=_r(r),s;return s=typeof(t=St(t))=="string"||t instanceof rn?Mg(o,"updateDoc",e._key,t,n,i):Pg(o,"updateDoc",e._key,t),Vo(r,[s.toMutation(e._key,Pt.exists(!0))])}function ld(e){return Vo(ut(e.firestore,Tt),[new Ei(e._key,Pt.none())])}function ud(e,t){let n=ut(e.firestore,Tt),i=br(e),r=od(e.converter,t);return Vo(n,[nd(_r(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,Pt.exists(!1))]).then(()=>i)}function Fo(e,...t){var n,i,r;e=St(e);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||Np(t[s])||(o=t[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Np(t[s])){let d=t[s];t[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),t[s+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),t[s+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let c,l,u;if(e instanceof yt)l=ut(e.firestore,Tt),u=ko(e._key.path),c={next:d=>{t[s]&&t[s](Qg(l,e,d))},error:t[s+1],complete:t[s+2]};else{let d=ut(e,ae);l=ut(d.firestore,Tt),u=d._query;let h=new Xn(l);c={next:f=>{t[s]&&t[s](new on(l,h,d,f))},error:t[s+1],complete:t[s+2]},UI(e._query)}return function(h,f,E,v){let x=new Ao(v),V=new Ta(f,x,E);return h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return ug(yield So(h),V)})),()=>{x.Qa(),h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return dg(yield So(h),V)}))}}(Qt(l),u,a,c)}function Kg(e,t){return zR(Qt(e=ut(e,Tt)),Np(t)?t:{next:t})}function Vo(e,t){return function(i,r){let o=new Gt;return i.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return wR(yield yg(i),r,o)})),o.promise}(Qt(e),t)}function Qg(e,t,n){let i=n.docs.get(t._key),r=new Xn(e);return new je(e,r,t._key,i,new Gn(n.hasPendingWrites,n.fromCache),t.converter)}var KR={maxAttempts:5};var Ku=class{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_r(t)}set(t,n,i){this._verifyNotCommitted();let r=hi(t,this._firestore),o=od(r.converter,n,i),s=nd(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,Pt.none())),this}update(t,n,i,...r){this._verifyNotCommitted();let o=hi(t,this._firestore),s;return s=typeof(n=St(n))=="string"||n instanceof rn?Mg(this._dataReader,"WriteBatch.update",o._key,n,i,r):Pg(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Pt.exists(!0))),this}delete(t){this._verifyNotCommitted();let n=hi(t,this._firestore);return this._mutations=this._mutations.concat(new Ei(n._key,Pt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new w(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function hi(e,t){if((e=St(e)).firestore!==t)throw new w(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Kp=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=_r(n)}get(n){let i=hi(n,this._firestore),r=new Hp(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return P();let s=o[0];if(s.isFoundDocument())return new mr(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new mr(this._firestore,r,i._key,null,i.converter);throw P()})}set(n,i,r){let o=hi(n,this._firestore),s=od(o.converter,i,r),a=nd(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(n,i,r,...o){let s=hi(n,this._firestore),a;return a=typeof(i=St(i))=="string"||i instanceof rn?Mg(this._dataReader,"Transaction.update",s._key,i,r,o):Pg(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(n){let i=hi(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(t,n){super(t,n),this._firestore=t}get(t){let n=hi(t,this._firestore),i=new Xn(this._firestore);return super.get(t).then(r=>new je(this._firestore,i,n._key,r._document,new Gn(!1,!1),n.converter))}};function Yg(e,t,n){e=ut(e,Tt);let i=Object.assign(Object.assign({},KR),n);return function(o){if(o.maxAttempts<1)throw new w(b.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let c=new Gt;return o.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){let l=yield VR(o);new kp(o.asyncQueue,l,a,s,c).Ya()})),c.promise}(Qt(e),r=>t(new Kp(e,r)),i)}function Xg(){return new Da("deleteField")}function Zg(){return new jp("serverTimestamp")}function Jg(...e){return new Bp("arrayUnion",e)}function tb(...e){return new Up("arrayRemove",e)}function eb(e){return new zp("increment",e)}(function(t,n=!0){(function(r){Ro=r})(wv),ps(new $i("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new Tt(new Jf(i.getProvider("auth-internal")),new im(i.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new w(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bi(l.options.projectId,u)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ce(ew,"4.6.0",t),ce(ew,"4.6.0","esm2017")})();var QR="@firebase/firestore-compat",YR="0.3.29";function ab(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new w("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function qI(){if(typeof Uint8Array>"u")throw new w("unimplemented","Uint8Arrays are not available in this environment.")}function GI(){if(!fE())throw new w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var dd=class e{constructor(t){this._delegate=t}static fromBase64String(t){return GI(),new e(Sn.fromBase64String(t))}static fromUint8Array(t){return qI(),new e(Sn.fromUint8Array(t))}toBase64(){return GI(),this._delegate.toBase64()}toUint8Array(){return qI(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function nb(e){return XR(e,["next","error","complete"])}function XR(e,t){if(typeof e!="object"||e===null)return!1;let n=e;for(let i of t)if(i in n&&typeof n[i]=="function")return!0;return!1}var ib=class{enableIndexedDbPersistence(t,n){return xg(t._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(t){return Cg(t._delegate)}clearIndexedDbPersistence(t){return Tg(t._delegate)}},hd=class{constructor(t,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof bi||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){let n=this._delegate._getSettings();!t.merge&&n.host!==t.host&&Ve("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},n),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,n,i={}){td(this._delegate,t,n,i)}enableNetwork(){return Sg(this._delegate)}disableNetwork(){return Dg(this._delegate)}enablePersistence(t){let n=!1,i=!1;return t&&(n=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,Eg("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Ag(this._delegate)}onSnapshotsInSync(t){return Kg(this._delegate,t)}get app(){if(!this._appCompat)throw new w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Bo(this,Va(this._delegate,t))}catch(n){throw ye(n,"collection()","Firestore.collection()")}}doc(t){try{return new Dn(this,br(this._delegate,t))}catch(n){throw ye(n,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Ir(this,Ig(this._delegate,t))}catch(n){throw ye(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return Yg(this._delegate,n=>t(new fd(this,n)))}batch(){return Qt(this._delegate),new md(new Ku(this._delegate,t=>Vo(this._delegate,t)))}loadBundle(t){return Rg(this._delegate,t)}namedQuery(t){return kg(this._delegate,t).then(n=>n?new Ir(this,n):null)}},Lo=class extends Do{constructor(t){super(),this.firestore=t}convertBytes(t){return new dd(new Sn(t))}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return Dn.forKey(n,this.firestore,null)}};function ZR(e){Qp(e)}var fd=class{constructor(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new Lo(t)}get(t){let n=yr(t);return this._delegate.get(n).then(i=>new wr(this._firestore,new je(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(t,n,i){let r=yr(t);return i?(ab("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(t,n,i,...r){let o=yr(t);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(t){let n=yr(t);return this._delegate.delete(n),this}},md=class{constructor(t){this._delegate=t}set(t,n,i){let r=yr(t);return i?(ab("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(t,n,i,...r){let o=yr(t);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(t){let n=yr(t);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},jo=class e{constructor(t,n,i){this._firestore=t,this._userDataWriter=n,this._delegate=i}fromFirestore(t,n){let i=new mi(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Er(this._firestore,i),n??{})}toFirestore(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)}static getInstance(t,n){let i=e.INSTANCES,r=i.get(t);r||(r=new WeakMap,i.set(t,r));let o=r.get(n);return o||(o=new e(t,new Lo(t),n),r.set(n,o)),o}};jo.INSTANCES=new WeakMap;var Dn=class e{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Lo(t)}static forPath(t,n,i){if(t.length%2!==0)throw new w("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new e(n,new yt(n._delegate,i,new A(t)))}static forKey(t,n,i){return new e(n,new yt(n._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Bo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Bo(this.firestore,Va(this._delegate,t))}catch(n){throw ye(n,"collection()","DocumentReference.collection()")}}isEqual(t){return t=St(t),t instanceof yt?La(this._delegate,t):!1}set(t,n){n=ab("DocumentReference.set",n);try{return n?cd(this._delegate,t,n):cd(this._delegate,t)}catch(i){throw ye(i,"setDoc()","DocumentReference.set()")}}update(t,n,...i){try{return arguments.length===1?ja(this._delegate,t):ja(this._delegate,t,n,...i)}catch(r){throw ye(r,"updateDoc()","DocumentReference.update()")}}delete(){return ld(this._delegate)}onSnapshot(...t){let n=WI(t),i=HI(t,r=>new wr(this.firestore,new je(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return Fo(this._delegate,n,i)}get(t){let n;return t?.source==="cache"?n=qg(this._delegate):t?.source==="server"?n=Gg(this._delegate):n=$g(this._delegate),n.then(i=>new wr(this.firestore,new je(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(jo.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function ye(e,t,n){return e.message=e.message.replace(t,n),e}function WI(e){for(let t of e)if(typeof t=="object"&&!nb(t))return t;return{}}function HI(e,t){var n,i;let r;return nb(e[0])?r=e[0]:nb(e[1])?r=e[1]:typeof e[0]=="function"?r={next:e[0],error:e[1],complete:e[2]}:r={next:e[1],error:e[2],complete:e[3]},{next:o=>{r.next&&r.next(t(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var wr=class{constructor(t,n){this._firestore=t,this._delegate=n}get ref(){return new Dn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,n){return this._delegate.get(t,n)}isEqual(t){return sd(this._delegate,t._delegate)}},Er=class extends wr{data(t){let n=this._delegate.data(t);return this._delegate._converter||eE(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Ir=class e{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Lo(t)}where(t,n,i){try{return new e(this.firestore,sn(this._delegate,rd(t,n,i)))}catch(r){throw ye(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,n){try{return new e(this.firestore,sn(this._delegate,Fg(t,n)))}catch(i){throw ye(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new e(this.firestore,sn(this._delegate,Vg(t)))}catch(n){throw ye(n,"limit()","Query.limit()")}}limitToLast(t){try{return new e(this.firestore,sn(this._delegate,Lg(t)))}catch(n){throw ye(n,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new e(this.firestore,sn(this._delegate,jg(...t)))}catch(n){throw ye(n,"startAt()","Query.startAt()")}}startAfter(...t){try{return new e(this.firestore,sn(this._delegate,Bg(...t)))}catch(n){throw ye(n,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new e(this.firestore,sn(this._delegate,Ug(...t)))}catch(n){throw ye(n,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new e(this.firestore,sn(this._delegate,zg(...t)))}catch(n){throw ye(n,"endAt()","Query.endAt()")}}isEqual(t){return ed(this._delegate,t._delegate)}get(t){let n;return t?.source==="cache"?n=Wg(this._delegate):t?.source==="server"?n=Hg(this._delegate):n=ad(this._delegate),n.then(i=>new Ba(this.firestore,new on(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){let n=WI(t),i=HI(t,r=>new Ba(this.firestore,new on(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return Fo(this._delegate,n,i)}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(jo.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},rb=class{constructor(t,n){this._firestore=t,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Er(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ba=class{constructor(t,n){this._firestore=t,this._delegate=n}get query(){return new Ir(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Er(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(n=>new rb(this._firestore,n))}forEach(t,n){this._delegate.forEach(i=>{t.call(n,new Er(this._firestore,i))})}isEqual(t){return sd(this._delegate,t._delegate)}},Bo=class e extends Ir{constructor(t,n){super(t,n),this.firestore=t,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let t=this._delegate.parent;return t?new Dn(this.firestore,t):null}doc(t){try{return t===void 0?new Dn(this.firestore,br(this._delegate)):new Dn(this.firestore,br(this._delegate,t))}catch(n){throw ye(n,"doc()","CollectionReference.doc()")}}add(t){return ud(this._delegate,t).then(n=>new Dn(this.firestore,n))}isEqual(t){return La(this._delegate,t._delegate)}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(jo.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function yr(e){return ut(e,yt)}var ob=class e{constructor(...t){this._delegate=new rn(...t)}static documentId(){return new e(Vt.keyField().canonicalString())}isEqual(t){return t=St(t),t instanceof rn?this._delegate._internalPath.isEqual(t._internalPath):!1}};var sb=class e{constructor(t){this._delegate=t}static serverTimestamp(){let t=Zg();return t._methodName="FieldValue.serverTimestamp",new e(t)}static delete(){let t=Xg();return t._methodName="FieldValue.delete",new e(t)}static arrayUnion(...t){let n=Jg(...t);return n._methodName="FieldValue.arrayUnion",new e(n)}static arrayRemove(...t){let n=tb(...t);return n._methodName="FieldValue.arrayRemove",new e(n)}static increment(t){let n=eb(t);return n._methodName="FieldValue.increment",new e(n)}isEqual(t){return this._delegate.isEqual(t._delegate)}};var JR={Firestore:hd,GeoPoint:fr,Timestamp:Dt,Blob:dd,Transaction:fd,WriteBatch:md,DocumentReference:Dn,DocumentSnapshot:wr,Query:Ir,QueryDocumentSnapshot:Er,QuerySnapshot:Ba,CollectionReference:Bo,FieldPath:ob,FieldValue:sb,setLogLevel:ZR,CACHE_SIZE_UNLIMITED:RI};function tk(e,t){e.INTERNAL.registerComponent(new $i("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},JR)))}function ek(e){tk(e,(t,n)=>new hd(t,n,new ib)),e.registerVersion(QR,YR)}ek(me);function nk(e,t=vc){return new fe(n=>{let i;return t!=null?t.schedule(()=>{i=e.onSnapshot({includeMetadataChanges:!0},n)}):i=e.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function KI(e,t){return nk(e,t)}function ik(e,t){return KI(e,t).pipe(un(void 0),Or(),U(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function ub(e,t){return KI(e,t).pipe(U(n=>({payload:n,type:"query"})))}var pd=class{ref;afs;constructor(t,n){this.ref=t,this.afs=n}set(t,n){return this.ref.set(t,n)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,n){let i=this.ref.collection(t),{ref:r,query:o}=JI(i,n);return new bd(r,o,this.afs)}snapshotChanges(){return ik(this.ref,this.afs.schedulers.outsideAngular).pipe(pe)}valueChanges(t={}){return this.snapshotChanges().pipe(U(({payload:n})=>t.idField?bt(C({},n.data()),{[t.idField]:n.id}):n.data()))}get(t){return wt(this.ref.get(t)).pipe(pe)}};function gd(e,t){return ub(e,t).pipe(un(void 0),Or(),U(n=>{let[i,r]=n,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{let l=o.find(d=>d.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(d=>d.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function QI(e,t,n){return gd(e,n).pipe(Fi((i,r)=>rk(i,r.map(o=>o.payload),t),[]),Mr(),U(i=>i.map(r=>({type:r.type,payload:r}))))}function rk(e,t,n){return t.forEach(i=>{n.indexOf(i.type)>-1&&(e=ok(e,i))}),e}function cb(e,t,n,...i){let r=e.slice();return r.splice(t,n,...i),r}function ok(e,t){switch(t.type){case"added":if(!(e[t.newIndex]&&e[t.newIndex].doc.ref.isEqual(t.doc.ref)))return cb(e,t.newIndex,0,t);break;case"modified":if(e[t.oldIndex]==null||e[t.oldIndex].doc.ref.isEqual(t.doc.ref))if(t.oldIndex!==t.newIndex){let n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}else return cb(e,t.newIndex,1,t);break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return cb(e,t.oldIndex,1);break}return e}function YI(e){return(!e||e.length===0)&&(e=["added","removed","modified"]),e}var bd=class{ref;query;afs;constructor(t,n,i){this.ref=t,this.query=n,this.afs=i}stateChanges(t){let n=gd(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(n=n.pipe(U(i=>i.filter(r=>t.indexOf(r.type)>-1)))),n.pipe(un(void 0),Or(),Ht(([i,r])=>r.length>0||!i),U(([,i])=>i),pe)}auditTrail(t){return this.stateChanges(t).pipe(Fi((n,i)=>[...n,...i],[]))}snapshotChanges(t){let n=YI(t);return QI(this.query,n,this.afs.schedulers.outsideAngular).pipe(pe)}valueChanges(t={}){return ub(this.query,this.afs.schedulers.outsideAngular).pipe(U(n=>n.payload.docs.map(i=>t.idField?bt(C({},i.data()),{[t.idField]:i.id}):i.data())),pe)}get(t){return wt(this.query.get(t)).pipe(pe)}add(t){return this.ref.add(t)}doc(t){return new pd(this.ref.doc(t),this.afs)}},lb=class{query;afs;constructor(t,n){this.query=t,this.afs=n}stateChanges(t){return!t||t.length===0?gd(this.query,this.afs.schedulers.outsideAngular).pipe(pe):gd(this.query,this.afs.schedulers.outsideAngular).pipe(U(n=>n.filter(i=>t.indexOf(i.type)>-1)),Ht(n=>n.length>0),pe)}auditTrail(t){return this.stateChanges(t).pipe(Fi((n,i)=>[...n,...i],[]))}snapshotChanges(t){let n=YI(t);return QI(this.query,n,this.afs.schedulers.outsideAngular).pipe(pe)}valueChanges(t={}){return ub(this.query,this.afs.schedulers.outsideAngular).pipe(U(i=>i.payload.docs.map(r=>t.idField?C({[t.idField]:r.id},r.data()):r.data())),pe)}get(t){return wt(this.query.get(t)).pipe(pe)}},XI=new F("angularfire2.enableFirestorePersistence"),ZI=new F("angularfire2.firestore.persistenceSettings"),sk=new F("angularfire2.firestore.settings"),ak=new F("angularfire2.firestore.use-emulator");function JI(e,t=n=>n){return{query:t(e),ref:e}}var Ua=(()=>{class e{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,s,a,c,l,u,d,h,f,E,v,x,V,$){this.schedulers=c;let O=Ss(n,a,i),X=u;d&&ef(O,a,h,E,v,x,f,V),[this.firestore,this.persistenceEnabled$]=hl(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{let tt=a.runOutsideAngular(()=>O.firestore());if(o&&tt.settings(o),X&&tt.useEmulator(...X),r&&!Ln(s)){let dt=()=>{try{return wt(tt.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(Bt){return typeof console<"u"&&console.warn(Bt),L(!1)}};return[tt,a.runOutsideAngular(dt)]}else return[tt,L(!1)]},[o,X,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:s}=JI(r,i),a=this.schedulers.ngZone.run(()=>o);return new bd(a,s,this)}collectionGroup(n,i){let r=i||(s=>s),o=this.firestore.collectionGroup(n);return new lb(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new pd(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||e)(g(Gr),g(Wr,8),g(XI,8),g(sk,8),g(ie),g(z),g(gn),g(ZI,8),g(ak,8),g(Un,8),g(Qh,8),g(Yh,8),g(Xh,8),g(Zh,8),g(Jh,8),g(tf,8),g(Xe,8))};static \u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})(),tx=(()=>{class e{constructor(){me.registerVersion("angularfire",Ee.full,"fst-compat")}static enablePersistence(n){return{ngModule:e,providers:[{provide:XI,useValue:!0},{provide:ZI,useValue:n}]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=H({type:e});static \u0275inj=W({providers:[Ua]})}return e})();var Y="primary",nc=Symbol("RouteTitle"),pb=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Go(e){return new pb(e)}function ck(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=e[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function lk(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Rn(e[n],t[n]))return!1;return!0}function Rn(e,t){let n=e?gb(e):void 0,i=t?gb(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!ux(e[r],t[r]))return!1;return!0}function gb(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function ux(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((r,o)=>i[o]===r)}else return e===t}function dx(e){return e.length>0?e[e.length-1]:null}function Ri(e){return Zd(e)?e:Nc(e)?wt(Promise.resolve(e)):L(e)}var uk={exact:fx,subset:mx},hx={exact:dk,subset:hk,ignored:()=>!0};function nx(e,t,n){return uk[n.paths](e.root,t.root,n.matrixParams)&&hx[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function dk(e,t){return Rn(e,t)}function fx(e,t,n){if(!Cr(e.segments,t.segments)||!yd(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!fx(e.children[i],t.children[i],n))return!1;return!0}function hk(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>ux(e[n],t[n]))}function mx(e,t,n){return px(e,t,t.segments,n)}function px(e,t,n,i){if(e.segments.length>n.length){let r=e.segments.slice(0,n.length);return!(!Cr(r,n)||t.hasChildren()||!yd(r,n,i))}else if(e.segments.length===n.length){if(!Cr(e.segments,n)||!yd(e.segments,n,i))return!1;for(let r in t.children)if(!e.children[r]||!mx(e.children[r],t.children[r],i))return!1;return!0}else{let r=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!Cr(e.segments,r)||!yd(e.segments,r,i)||!e.children[Y]?!1:px(e.children[Y],t,o,i)}}function yd(e,t,n){return t.every((i,r)=>hx[n](e[r].parameters,i.parameters))}var Ai=class{constructor(t=new mt([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Go(this.queryParams),this._queryParamMap}toString(){return pk.serialize(this)}},mt=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return wd(this)}},xr=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Go(this.parameters),this._parameterMap}toString(){return bx(this)}};function fk(e,t){return Cr(e,t)&&e.every((n,i)=>Rn(n.parameters,t[i].parameters))}function Cr(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function mk(e,t){let n=[];return Object.entries(e.children).forEach(([i,r])=>{i===Y&&(n=n.concat(t(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==Y&&(n=n.concat(t(r,i)))}),n}var ic=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:()=>new Ka,providedIn:"root"});let e=t;return e})(),Ka=class{parse(t){let n=new _b(t);return new Ai(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${za(t.root,!0)}`,i=_k(t.queryParams),r=typeof t.fragment=="string"?`#${gk(t.fragment)}`:"";return`${n}${i}${r}`}},pk=new Ka;function wd(e){return e.segments.map(t=>bx(t)).join("/")}function za(e,t){if(!e.hasChildren())return wd(e);if(t){let n=e.children[Y]?za(e.children[Y],!1):"",i=[];return Object.entries(e.children).forEach(([r,o])=>{r!==Y&&i.push(`${r}:${za(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=mk(e,(i,r)=>r===Y?[za(e.children[Y],!1)]:[`${r}:${za(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[Y]!=null?`${wd(e)}/${n[0]}`:`${wd(e)}/(${n.join("//")})`}}function gx(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _d(e){return gx(e).replace(/%3B/gi,";")}function gk(e){return encodeURI(e)}function bb(e){return gx(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ed(e){return decodeURIComponent(e)}function ix(e){return Ed(e.replace(/\+/g,"%20"))}function bx(e){return`${bb(e.path)}${bk(e.parameters)}`}function bk(e){return Object.entries(e).map(([t,n])=>`;${bb(t)}=${bb(n)}`).join("")}function _k(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(r=>`${_d(n)}=${_d(r)}`).join("&"):`${_d(n)}=${_d(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var vk=/^[^\/()?;#]+/;function db(e){let t=e.match(vk);return t?t[0]:""}var yk=/^[^\/()?;=#]+/;function wk(e){let t=e.match(yk);return t?t[0]:""}var Ek=/^[^=?&#]+/;function Ik(e){let t=e.match(Ek);return t?t[0]:""}var xk=/^[^&#]+/;function Ck(e){let t=e.match(xk);return t?t[0]:""}var _b=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new mt([],{}):new mt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[Y]=new mt(t,n)),i}parseSegment(){let t=db(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new vt(4009,!1);return this.capture(t),new xr(Ed(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=wk(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=db(this.remaining);r&&(i=r,this.capture(i))}t[Ed(n)]=Ed(i)}parseQueryParam(t){let n=Ik(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=Ck(this.remaining);s&&(i=s,this.capture(i))}let r=ix(n),o=ix(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=db(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new vt(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Y);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Y]:new mt([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new vt(4011,!1)}};function _x(e){return e.segments.length>0?new mt([],{[Y]:e}):e}function vx(e){let t={};for(let[i,r]of Object.entries(e.children)){let o=vx(r);if(i===Y&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let n=new mt(e.segments,t);return Tk(n)}function Tk(e){if(e.numberOfChildren===1&&e.children[Y]){let t=e.children[Y];return new mt(e.segments.concat(t.segments),t.children)}return e}function Wo(e){return e instanceof Ai}function Ak(e,t,n=null,i=null){let r=yx(e);return wx(r,t,n,i)}function yx(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new mt(o.url,s);return o===e&&(t=a),a}let i=n(e.root),r=_x(i);return t??r}function wx(e,t,n,i){let r=e;for(;r.parent;)r=r.parent;if(t.length===0)return hb(r,r,r,n,i);let o=Sk(t);if(o.toRoot())return hb(r,r,new mt([],{}),n,i);let s=Dk(o,r,e),a=s.processChildren?Ga(s.segmentGroup,s.index,o.commands):Ix(s.segmentGroup,s.index,o.commands);return hb(r,s.segmentGroup,a,n,i)}function Id(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Qa(e){return typeof e=="object"&&e!=null&&e.outlets}function hb(e,t,n,i,r){let o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;e===t?s=n:s=Ex(e,t,n);let a=_x(vx(s));return new Ai(a,o,r)}function Ex(e,t,n){let i={};return Object.entries(e.children).forEach(([r,o])=>{o===t?i[r]=n:i[r]=Ex(o,t,n)}),new mt(e.segments,i)}var xd=class{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&Id(i[0]))throw new vt(4003,!1);let r=i.find(Qa);if(r&&r!==dx(i))throw new vt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Sk(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new xd(!0,0,e);let t=0,n=!1,i=e.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new xd(n,t,i)}var $o=class{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function Dk(e,t,n){if(e.isAbsolute)return new $o(t,!0,0);if(!n)return new $o(t,!1,NaN);if(n.parent===null)return new $o(n,!0,0);let i=Id(e.commands[0])?0:1,r=n.segments.length-1+i;return Rk(n,r,e.numberOfDoubleDots)}function Rk(e,t,n){let i=e,r=t,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new vt(4005,!1);r=i.segments.length}return new $o(i,!1,r-o)}function kk(e){return Qa(e[0])?e[0].outlets:{[Y]:e}}function Ix(e,t,n){if(e??=new mt([],{}),e.segments.length===0&&e.hasChildren())return Ga(e,t,n);let i=Pk(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let o=new mt(e.segments.slice(0,i.pathIndex),{});return o.children[Y]=new mt(e.segments.slice(i.pathIndex),e.children),Ga(o,0,r)}else return i.match&&r.length===0?new mt(e.segments,{}):i.match&&!e.hasChildren()?vb(e,t,n):i.match?Ga(e,0,r):vb(e,t,n)}function Ga(e,t,n){if(n.length===0)return new mt(e.segments,{});{let i=kk(n),r={};if(Object.keys(i).some(o=>o!==Y)&&e.children[Y]&&e.numberOfChildren===1&&e.children[Y].segments.length===0){let o=Ga(e.children[Y],t,n);return new mt(e.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=Ix(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new mt(e.segments,r)}}function Pk(e,t,n){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return o;let s=e.segments[r],a=n[i];if(Qa(a))break;let c=`${a}`,l=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!ox(c,l,s))return o;i+=2}else{if(!ox(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function vb(e,t,n){let i=e.segments.slice(0,t),r=0;for(;r<n.length;){let o=n[r];if(Qa(o)){let c=Mk(o.outlets);return new mt(i,c)}if(r===0&&Id(n[0])){let c=e.segments[t];i.push(new xr(c.path,rx(n[0]))),r++;continue}let s=Qa(o)?o.outlets[Y]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&Id(a)?(i.push(new xr(s,rx(a))),r+=2):(i.push(new xr(s,{})),r++)}return new mt(i,{})}function Mk(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=vb(new mt([],{}),0,i))}),t}function rx(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function ox(e,t,n){return e==n.path&&Rn(t,n.parameters)}var Wa="imperative",te=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(te||{}),Be=class{constructor(t,n){this.id=t,this.url=n}},Ho=class extends Be{constructor(t,n,i="imperative",r=null){super(t,n),this.type=te.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Jn=class extends Be{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=te.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Re=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(Re||{}),Cd=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Cd||{}),Si=class extends Be{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=te.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Di=class extends Be{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=te.NavigationSkipped}},Ya=class extends Be{constructor(t,n,i,r){super(t,n),this.error=i,this.target=r,this.type=te.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Td=class extends Be{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=te.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yb=class extends Be{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=te.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wb=class extends Be{constructor(t,n,i,r,o){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=te.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Eb=class extends Be{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=te.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ib=class extends Be{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=te.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xb=class{constructor(t){this.route=t,this.type=te.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Cb=class{constructor(t){this.route=t,this.type=te.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Tb=class{constructor(t){this.snapshot=t,this.type=te.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ab=class{constructor(t){this.snapshot=t,this.type=te.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sb=class{constructor(t){this.snapshot=t,this.type=te.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Db=class{constructor(t){this.snapshot=t,this.type=te.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ad=class{constructor(t,n,i){this.routerEvent=t,this.position=n,this.anchor=i,this.type=te.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Xa=class{},Za=class{constructor(t){this.url=t}};var Rb=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new rc,this.attachRef=null}},rc=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Rb,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Sd=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=kb(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=kb(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Pb(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Pb(t,this._root).map(n=>n.value)}};function kb(e,t){if(e===t.value)return t;for(let n of t.children){let i=kb(e,n);if(i)return i}return null}function Pb(e,t){if(e===t.value)return[t];for(let n of t.children){let i=Pb(e,n);if(i.length)return i.unshift(t),i}return[]}var De=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function zo(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Dd=class extends Sd{constructor(t,n){super(t),this.snapshot=n,zb(this,t)}toString(){return this.snapshot.toString()}};function xx(e){let t=Ok(e),n=new we([new xr("",{})]),i=new we({}),r=new we({}),o=new we({}),s=new we(""),a=new Ko(n,i,o,s,r,Y,e,t.root);return a.snapshot=t.root,new Dd(new De(a,[]),t)}function Ok(e){let t={},n={},i={},r="",o=new Ja([],t,i,r,n,Y,e,null,{});return new Rd("",new De(o,[]))}var Ko=class{constructor(t,n,i,r,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(U(l=>l[nc]))??L(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(U(t=>Go(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(U(t=>Go(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ub(e,t,n="emptyOnly"){let i,{routeConfig:r}=e;return t!==null&&(n==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:C(C({},t.params),e.params),data:C(C({},t.data),e.data),resolve:C(C(C(C({},e.data),t.data),r?.data),e._resolvedData)}:i={params:C({},e.params),data:C({},e.data),resolve:C(C({},e.data),e._resolvedData??{})},r&&Tx(r)&&(i.resolve[nc]=r.title),i}var Ja=class{get title(){return this.data?.[nc]}constructor(t,n,i,r,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Go(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Go(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Rd=class extends Sd{constructor(t,n){super(n),this.url=t,zb(this,n)}toString(){return Cx(this._root)}};function zb(e,t){t.value._routerState=e,t.children.forEach(n=>zb(e,n))}function Cx(e){let t=e.children.length>0?` { ${e.children.map(Cx).join(", ")} } `:"";return`${e.value}${t}`}function fb(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Rn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Rn(t.params,n.params)||e.paramsSubject.next(n.params),lk(t.url,n.url)||e.urlSubject.next(n.url),Rn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Mb(e,t){let n=Rn(e.params,t.params)&&fk(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||Mb(e.parent,t.parent))}function Tx(e){return typeof e.title=="string"||e.title===null}var $b=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Y,this.activateEvents=new ne,this.deactivateEvents=new ne,this.attachEvents=new ne,this.detachEvents=new ne,this.parentContexts=S(rc),this.location=S(Vr),this.changeDetector=S(Vn),this.environmentInjector=S(ls),this.inputBinder=S(Nd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new vt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new vt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new vt(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new vt(4013,!1);this._activatedRoute=i;let o=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Ob(i,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ft({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Li]});let e=t;return e})(),Ob=class{constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i,this.__ngOutletInjector=!0}get(t,n){return t===Ko?this.route:t===rc?this.childContexts:this.parent.get(t,n)}},Nd=new F(""),sx=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,o=kr([r.queryParams,r.params,r.data]).pipe(Ut(([s,a,c],l)=>(c=C(C(C({},s),a),c),l===0?L(c):Promise.resolve(c)))).subscribe(s=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=iv(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(i,o)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:t.\u0275fac});let e=t;return e})();function Nk(e,t,n){let i=tc(e,t._root,n?n._root:void 0);return new Dd(i,t)}function tc(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let r=Fk(e,t,n);return new De(i,r)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>tc(e,a)),s}}let i=Vk(t.value),r=t.children.map(o=>tc(e,o));return new De(i,r)}}function Fk(e,t,n){return t.children.map(i=>{for(let r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return tc(e,i,r);return tc(e,i)})}function Vk(e){return new Ko(new we(e.url),new we(e.params),new we(e.queryParams),new we(e.fragment),new we(e.data),e.outlet,e.component,e)}var Ax="ngNavigationCancelingError";function Sx(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=Wo(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=Dx(!1,Re.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function Dx(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Ax]=!0,n.cancellationCode=t,n}function Lk(e){return Rx(e)&&Wo(e.url)}function Rx(e){return!!e&&e[Ax]}var jk=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ot({type:t,selectors:[["ng-component"]],standalone:!0,features:[Fn],decls:1,vars:0,template:function(r,o){r&1&&K(0,"router-outlet")},dependencies:[$b],encapsulation:2});let e=t;return e})();function Bk(e,t){return e.providers&&!e._injector&&(e._injector=ch(e.providers,t,`Route: ${e.path}`)),e._injector??t}function qb(e){let t=e.children&&e.children.map(qb),n=t?bt(C({},e),{children:t}):C({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Y&&(n.component=jk),n}function kn(e){return e.outlet||Y}function Uk(e,t){let n=e.filter(i=>kn(i)===t);return n.push(...e.filter(i=>kn(i)!==t)),n}function oc(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var zk=(e,t,n,i)=>U(r=>(new Nb(t,r.targetRouterState,r.currentRouterState,n,i).activate(e),r)),Nb=class{constructor(t,n,i,r,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),fb(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let r=zo(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,n,i){let r=t.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=zo(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=zo(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let r=zo(n);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Db(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Ab(t.value.snapshot))}activateRoutes(t,n,i){let r=t.value,o=n?n.value:null;if(fb(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),fb(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=oc(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}},kd=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},qo=class{constructor(t,n){this.component=t,this.route=n}};function $k(e,t,n){let i=e._root,r=t?t._root:null;return $a(i,r,n,[i.value])}function qk(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Yo(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!O_(e)?e:t.get(e):i}function $a(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=zo(t);return e.children.forEach(s=>{Gk(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ha(a,n.getContext(s),r)),r}function Gk(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Wk(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new kd(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?$a(e,t,a?a.children:null,i,r):$a(e,t,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new qo(a.outlet.component,s))}else s&&Ha(t,a,r),r.canActivateChecks.push(new kd(i)),o.component?$a(e,null,a?a.children:null,i,r):$a(e,null,n,i,r);return r}function Wk(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Cr(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Cr(e.url,t.url)||!Rn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mb(e,t)||!Rn(e.queryParams,t.queryParams);case"paramsChange":default:return!Mb(e,t)}}function Ha(e,t,n){let i=zo(e),r=e.value;Object.entries(i).forEach(([o,s])=>{r.component?t?Ha(s,t.children.getContext(o),n):Ha(s,null,n):Ha(s,t,n)}),r.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new qo(t.outlet.component,r)):n.canDeactivateChecks.push(new qo(null,r)):n.canDeactivateChecks.push(new qo(null,r))}function sc(e){return typeof e=="function"}function Hk(e){return typeof e=="boolean"}function Kk(e){return e&&sc(e.canLoad)}function Qk(e){return e&&sc(e.canActivate)}function Yk(e){return e&&sc(e.canActivateChild)}function Xk(e){return e&&sc(e.canDeactivate)}function Zk(e){return e&&sc(e.canMatch)}function kx(e){return e instanceof D_||e?.name==="EmptyError"}var vd=Symbol("INITIAL_VALUE");function Qo(){return Ut(e=>kr(e.map(t=>t.pipe($e(1),un(vd)))).pipe(U(t=>{for(let n of t)if(n!==!0){if(n===vd)return vd;if(n===!1||n instanceof Ai)return n}return!0}),Ht(t=>t!==vd),$e(1)))}function Jk(e,t){return xe(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?L(bt(C({},n),{guardsResult:!0})):t1(s,i,r,e).pipe(xe(a=>a&&Hk(a)?e1(i,o,e,t):L(a)),U(a=>bt(C({},n),{guardsResult:a})))})}function t1(e,t,n,i){return wt(e).pipe(xe(r=>s1(r.component,r.route,n,t,i)),ln(r=>r!==!0,!0))}function e1(e,t,n,i){return wt(t).pipe(Ni(r=>yc(i1(r.route.parent,i),n1(r.route,i),o1(e,r.path,n),r1(e,r.route,n))),ln(r=>r!==!0,!0))}function n1(e,t){return e!==null&&t&&t(new Sb(e)),L(!0)}function i1(e,t){return e!==null&&t&&t(new Tb(e)),L(!0)}function r1(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return L(!0);let r=i.map(o=>th(()=>{let s=oc(t)??n,a=Yo(o,s),c=Qk(a)?a.canActivate(t,e):Pn(s,()=>a(t,e));return Ri(c).pipe(ln())}));return L(r).pipe(Qo())}function o1(e,t,n){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>qk(s)).filter(s=>s!==null).map(s=>th(()=>{let a=s.guards.map(c=>{let l=oc(s.node)??n,u=Yo(c,l),d=Yk(u)?u.canActivateChild(i,e):Pn(l,()=>u(i,e));return Ri(d).pipe(ln())});return L(a).pipe(Qo())}));return L(o).pipe(Qo())}function s1(e,t,n,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return L(!0);let s=o.map(a=>{let c=oc(t)??r,l=Yo(a,c),u=Xk(l)?l.canDeactivate(e,t,n,i):Pn(c,()=>l(e,t,n,i));return Ri(u).pipe(ln())});return L(s).pipe(Qo())}function a1(e,t,n,i){let r=t.canLoad;if(r===void 0||r.length===0)return L(!0);let o=r.map(s=>{let a=Yo(s,e),c=Kk(a)?a.canLoad(t,n):Pn(e,()=>a(t,n));return Ri(c)});return L(o).pipe(Qo(),Px(i))}function Px(e){return Qd(Ot(t=>{if(Wo(t))throw Sx(e,t)}),U(t=>t===!0))}function c1(e,t,n,i){let r=t.canMatch;if(!r||r.length===0)return L(!0);let o=r.map(s=>{let a=Yo(s,e),c=Zk(a)?a.canMatch(t,n):Pn(e,()=>a(t,n));return Ri(c)});return L(o).pipe(Qo(),Px(i))}var ec=class{constructor(t){this.segmentGroup=t||null}},Pd=class extends Error{constructor(t){super(),this.urlTree=t}};function Uo(e){return ss(new ec(e))}function l1(e){return ss(new vt(4e3,!1))}function u1(e){return ss(Dx(!1,Re.GuardRejected))}var Fb=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return L(i);if(r.numberOfChildren>1||!r.children[Y])return l1(t.redirectTo);r=r.children[Y]}}applyRedirectCommands(t,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i);if(n.startsWith("/"))throw new Pd(r);return r}applyRedirectCreateUrlTree(t,n,i,r){let o=this.createSegmentGroup(t,n.root,i,r);return new Ai(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(t,n,i,r){let o=this.createSegments(t,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,i,r)}),new mt(o,s)}createSegments(t,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,n,i){let r=i[n.path.substring(1)];if(!r)throw new vt(4001,!1);return r}findOrReturn(t,n){let i=0;for(let r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}},Vb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function d1(e,t,n,i,r){let o=Gb(e,t,n);return o.matched?(i=Bk(t,i),c1(i,t,n,r).pipe(U(s=>s===!0?o:C({},Vb)))):L(o)}function Gb(e,t,n){if(t.path==="**")return h1(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?C({},Vb):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(t.matcher||ck)(n,e,t);if(!r)return C({},Vb);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?C(C({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function h1(e){return{matched:!0,parameters:e.length>0?dx(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function ax(e,t,n,i){return n.length>0&&p1(e,n,i)?{segmentGroup:new mt(t,m1(i,new mt(n,e.children))),slicedSegments:[]}:n.length===0&&g1(e,n,i)?{segmentGroup:new mt(e.segments,f1(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new mt(e.segments,e.children),slicedSegments:n}}function f1(e,t,n,i){let r={};for(let o of n)if(Fd(e,t,o)&&!i[kn(o)]){let s=new mt([],{});r[kn(o)]=s}return C(C({},i),r)}function m1(e,t){let n={};n[Y]=t;for(let i of e)if(i.path===""&&kn(i)!==Y){let r=new mt([],{});n[kn(i)]=r}return n}function p1(e,t,n){return n.some(i=>Fd(e,t,i)&&kn(i)!==Y)}function g1(e,t,n){return n.some(i=>Fd(e,t,i))}function Fd(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function b1(e,t,n,i){return kn(e)!==i&&(i===Y||!Fd(t,n,e))?!1:Gb(t,e,n).matched}function _1(e,t,n){return t.length===0&&!e.children[n]}var Lb=class{};function v1(e,t,n,i,r,o,s="emptyOnly"){return new jb(e,t,n,i,r,s,o).recognize()}var y1=31,jb=class{constructor(t,n,i,r,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Fb(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new vt(4002,`'${t.segmentGroup}'`)}recognize(){let t=ax(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(U(n=>{let i=new Ja([],Object.freeze({}),Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,{},Y,this.rootComponentType,null,{}),r=new De(i,n),o=new Rd("",r),s=Ak(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Y).pipe(Pr(i=>{if(i instanceof Pd)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ec?this.noMatchError(i):i}))}inheritParamsAndData(t,n){let i=t.value,r=Ub(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(t,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,r,!0).pipe(U(o=>o instanceof De?[o]:[]))}processChildren(t,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return wt(r).pipe(Ni(o=>{let s=i.children[o],a=Uk(n,o);return this.processSegmentGroup(t,a,s,o)}),Fi((o,s)=>(o.push(...s),o)),ih(null),M_(),xe(o=>{if(o===null)return Uo(i);let s=Mx(o);return w1(s),L(s)}))}processSegment(t,n,i,r,o,s){return wt(n).pipe(Ni(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,i,r,o,s).pipe(Pr(c=>{if(c instanceof ec)return L(null);throw c}))),ln(a=>!!a),Pr(a=>{if(kx(a))return _1(i,r,o)?L(new Lb):Uo(i);throw a}))}processSegmentAgainstRoute(t,n,i,r,o,s,a){return b1(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,n,i,o,s):Uo(r):Uo(r)}expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Gb(n,r,o);if(!a)return Uo(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>y1&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,d).pipe(xe(h=>this.processSegment(t,i,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(t,n,i,r,o){let s=d1(n,i,r,t,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe(Ut(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Ut(({routes:c})=>{let l=i._loadedInjector??t,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Ja(u,h,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,I1(i),kn(i),i.component??i._loadedComponent??null,i,x1(i)),{segmentGroup:E,slicedSegments:v}=ax(n,u,d,c);if(v.length===0&&E.hasChildren())return this.processChildren(l,c,E).pipe(U(V=>V===null?null:new De(f,V)));if(c.length===0&&v.length===0)return L(new De(f,[]));let x=kn(i)===o;return this.processSegment(l,c,E,v,x?Y:o,!0).pipe(U(V=>new De(f,V instanceof De?[V]:[])))}))):Uo(n)))}getChildConfig(t,n,i){return n.children?L({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?L({routes:n._loadedRoutes,injector:n._loadedInjector}):a1(t,n,i,this.urlSerializer).pipe(xe(r=>r?this.configLoader.loadChildren(t,n).pipe(Ot(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):u1(n))):L({routes:[],injector:t})}};function w1(e){e.sort((t,n)=>t.value.outlet===Y?-1:n.value.outlet===Y?1:t.value.outlet.localeCompare(n.value.outlet))}function E1(e){let t=e.value.routeConfig;return t&&t.path===""}function Mx(e){let t=[],n=new Set;for(let i of e){if(!E1(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):t.push(i)}for(let i of n){let r=Mx(i.children);t.push(new De(i.value,r))}return t.filter(i=>!n.has(i))}function I1(e){return e.data||{}}function x1(e){return e.resolve||{}}function C1(e,t,n,i,r,o){return xe(s=>v1(e,t,n,i,s.extractedUrl,r,o).pipe(U(({state:a,tree:c})=>bt(C({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function T1(e,t){return xe(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return L(n);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of Ox(c))s.add(l);let a=0;return wt(s).pipe(Ni(c=>o.has(c)?A1(c,i,e,t):(c.data=Ub(c,c.parent,e).resolve,L(void 0))),Ot(()=>a++),rh(1),xe(c=>a===s.size?L(n):ei))})}function Ox(e){let t=e.children.map(n=>Ox(n)).flat();return[e,...t]}function A1(e,t,n,i){let r=e.routeConfig,o=e._resolve;return r?.title!==void 0&&!Tx(r)&&(o[nc]=r.title),S1(o,e,t,i).pipe(U(s=>(e._resolvedData=s,e.data=Ub(e,e.parent,n).resolve,null)))}function S1(e,t,n,i){let r=gb(e);if(r.length===0)return L({});let o={};return wt(r).pipe(xe(s=>D1(e[s],t,n,i).pipe(ln(),Ot(a=>{o[s]=a}))),rh(1),P_(o),Pr(s=>kx(s)?ei:ss(s)))}function D1(e,t,n,i){let r=oc(t)??i,o=Yo(e,r),s=o.resolve?o.resolve(t,n):Pn(r,()=>o(t,n));return Ri(s)}function mb(e){return Ut(t=>{let n=e(t);return n?wt(n).pipe(U(()=>t)):L(t)})}var Nx=(()=>{let t=class t{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===Y);return r}getResolvedTitleForRoute(i){return i.data[nc]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:()=>S(R1),providedIn:"root"});let e=t;return e})(),R1=(()=>{let t=class t extends Nx{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(g(zv))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ac=new F("",{providedIn:"root",factory:()=>({})}),Md=new F(""),Wb=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=S(Vc)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return L(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Ri(i.loadComponent()).pipe(U(Fx),Ot(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),as(()=>{this.componentLoaders.delete(i)})),o=new Xd(r,()=>new ht).pipe(Yd());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return L({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=k1(r,this.compiler,i,this.onLoadEndListener).pipe(as(()=>{this.childrenLoaders.delete(r)})),a=new Xd(s,()=>new ht).pipe(Yd());return this.childrenLoaders.set(r,a),a}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function k1(e,t,n,i){return Ri(e.loadChildren()).pipe(U(Fx),xe(r=>r instanceof U_||Array.isArray(r)?L(r):wt(t.compileModuleAsync(r))),U(r=>{i&&i(e);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(Md,[],{optional:!0,self:!0}).flat()),{routes:s.map(qb),injector:o}}))}function P1(e){return e&&typeof e=="object"&&"default"in e}function Fx(e){return P1(e)?e.default:e}var Hb=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:()=>S(M1),providedIn:"root"});let e=t;return e})(),M1=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Vx=new F(""),Lx=new F("");function O1(e,t,n){let i=e.get(Lx),r=e.get(J);return e.get(z).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=r.startViewTransition(()=>(o(),N1(e))),{onViewTransitionCreated:c}=i;return c&&Pn(e,()=>c({transition:a,from:t,to:n})),s})}function N1(e){return new Promise(t=>{B_(t,{injector:e})})}var Kb=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ht,this.transitionAbortSubject=new ht,this.configLoader=S(Wb),this.environmentInjector=S(ls),this.urlSerializer=S(ic),this.rootContexts=S(rc),this.location=S(zi),this.inputBindingEnabled=S(Nd,{optional:!0})!==null,this.titleStrategy=S(Nx),this.options=S(ac,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=S(Hb),this.createViewTransition=S(Vx,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>L(void 0),this.rootComponentType=null;let i=o=>this.events.next(new xb(o)),r=o=>this.events.next(new Cb(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(bt(C(C({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new we({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Wa,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ht(s=>s.id!==0),U(s=>bt(C({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ut(s=>{let a=!1,c=!1;return L(s).pipe(Ut(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Re.SupersededByNewNavigation),ei;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?bt(C({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Di(l.id,this.urlSerializer.serialize(l.rawUrl),h,Cd.IgnoredSameUrlNavigation)),l.resolve(null),ei}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return L(l).pipe(Ut(h=>{let f=this.transitions?.getValue();return this.events.next(new Ho(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?ei:Promise.resolve(h)}),C1(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Ot(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=bt(C({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Td(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:E,restoredState:v,extras:x}=l,V=new Ho(h,this.urlSerializer.serialize(f),E,v);this.events.next(V);let $=xx(this.rootComponentType).snapshot;return this.currentTransition=s=bt(C({},l),{targetSnapshot:$,urlAfterRedirects:f,extras:bt(C({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,L(s)}else{let h="";return this.events.next(new Di(l.id,this.urlSerializer.serialize(l.extractedUrl),h,Cd.IgnoredByUrlHandlingStrategy)),l.resolve(null),ei}}),Ot(l=>{let u=new yb(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),U(l=>(this.currentTransition=s=bt(C({},l),{guards:$k(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),Jk(this.environmentInjector,l=>this.events.next(l)),Ot(l=>{if(s.guardsResult=l.guardsResult,Wo(l.guardsResult))throw Sx(this.urlSerializer,l.guardsResult);let u=new wb(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Ht(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Re.GuardRejected),!1)),mb(l=>{if(l.guards.canActivateChecks.length)return L(l).pipe(Ot(u=>{let d=new Eb(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ut(u=>{let d=!1;return L(u).pipe(T1(this.paramsInheritanceStrategy,this.environmentInjector),Ot({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Re.NoDataFromResolver)}}))}),Ot(u=>{let d=new Ib(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),mb(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ot(f=>{d.component=f}),U(()=>{})));for(let f of d.children)h.push(...u(f));return h};return kr(u(l.targetSnapshot.root)).pipe(ih(null),$e(1))}),mb(()=>this.afterPreactivation()),Ut(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?wt(d).pipe(U(()=>s)):L(s)}),U(l=>{let u=Nk(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=bt(C({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Ot(()=>{this.events.next(new Xa)}),zk(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),$e(1),Ot({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),qe(this.transitionAbortSubject.pipe(Ot(l=>{throw l}))),as(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Re.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Pr(l=>{if(c=!0,Rx(l))this.events.next(new Si(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),Lk(l)?this.events.next(new Za(l.url)):s.resolve(!1);else{this.events.next(new Ya(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(i.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return ei}))}))}cancelNavigationTransition(i,r,o){let s=new Si(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function F1(e){return e!==Wa}var V1=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:()=>S(L1),providedIn:"root"});let e=t;return e})(),Bb=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},L1=(()=>{let t=class t extends Bb{};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=Mn(t)))(o||t)}})(),t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),jx=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:()=>S(j1),providedIn:"root"});let e=t;return e})(),j1=(()=>{let t=class t extends jx{constructor(){super(...arguments),this.location=S(zi),this.urlSerializer=S(ic),this.options=S(ac,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=S(Hb),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ai,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=xx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Ho)this.stateMemento=this.createStateMemento();else if(i instanceof Di)this.rawUrlTree=r.initialUrl;else if(i instanceof Td){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof Xa?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Si&&(i.code===Re.GuardRejected||i.code===Re.NoDataFromResolver)?this.restoreHistory(r):i instanceof Ya?this.restoreHistory(r,!0):i instanceof Jn&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=C(C({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=C(C({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=Mn(t)))(o||t)}})(),t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),qa=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(qa||{});function Bx(e,t){e.events.pipe(Ht(n=>n instanceof Jn||n instanceof Si||n instanceof Ya||n instanceof Di),U(n=>n instanceof Jn||n instanceof Di?qa.COMPLETE:(n instanceof Si?n.code===Re.Redirect||n.code===Re.SupersededByNewNavigation:!1)?qa.REDIRECTING:qa.FAILED),Ht(n=>n!==qa.REDIRECTING),$e(1)).subscribe(()=>{t()})}function B1(e){throw e}var U1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},z1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ke=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=S(Pc),this.stateManager=S(jx),this.options=S(ac,{optional:!0})||{},this.pendingTasks=S(lh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=S(Kb),this.urlSerializer=S(ic),this.location=S(zi),this.urlHandlingStrategy=S(Hb),this._events=new ht,this.errorHandler=this.options.errorHandler||B1,this.navigated=!1,this.routeReuseStrategy=S(V1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=S(Md,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!S(Nd,{optional:!0}),this.eventsSubscription=new Mi,this.isNgZoneEnabled=S(z)instanceof z&&z.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Si&&r.code!==Re.Redirect&&r.code!==Re.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Jn)this.navigated=!0;else if(r instanceof Za){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||F1(o.source)};this.scheduleNavigation(a,Wa,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}q1(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Wa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=C({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(qb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=C(C({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=yx(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return wx(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=Wo(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Wa,null,r)}navigate(i,r={skipLocationChange:!1}){return $1(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=C({},U1):r===!1?o=C({},z1):o=r,Wo(i))return nx(this.currentUrlTree,i,o);let s=this.parseUrl(i);return nx(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(i,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return Bx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function $1(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new vt(4008,!1)}function q1(e){return!(e instanceof Xa)&&!(e instanceof Za)}var Od=class{};var G1=(()=>{let t=class t{constructor(i,r,o,s,a){this.router=i,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ht(i=>i instanceof Jn),Ni(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=ch(s.providers,i,`Route: ${s.path}`));let a=s._injector??i,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return wt(o).pipe(Jd())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(i,r):o=L(null);let s=o.pipe(xe(a=>a===null?L(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return wt([s,a]).pipe(Jd())}else return s})}};t.\u0275fac=function(r){return new(r||t)(g(ke),g(Vc),g(ls),g(Od),g(Wb))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ux=new F(""),W1=(()=>{let t=class t{constructor(i,r,o,s,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Ho?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof Jn?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Di&&i.code===Cd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Ad&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ad(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(r){Fr()},t.\u0275prov=N({token:t,factory:t.\u0275fac});let e=t;return e})();function H1(e){return e.routerState.root}function cc(e,t){return{\u0275kind:e,\u0275providers:t}}function K1(){let e=S(Kt);return t=>{let n=e.get(Bi);if(t!==n.components[0])return;let i=e.get(ke),r=e.get(zx);e.get(Qb)===1&&i.initialNavigation(),e.get($x,null,sh.Optional)?.setUpPreloading(),e.get(Ux,null,sh.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var zx=new F("",{factory:()=>new ht}),Qb=new F("",{providedIn:"root",factory:()=>1});function Q1(){return cc(2,[{provide:Qb,useValue:0},{provide:fh,multi:!0,deps:[Kt],useFactory:t=>{let n=t.get(sv,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=t.get(ke),o=t.get(zx);Bx(r,()=>{i(!0)}),t.get(Kb).afterPreactivation=()=>(i(!0),o.closed?L(void 0):o),r.initialNavigation()}))}}])}function Y1(){return cc(3,[{provide:fh,multi:!0,useFactory:()=>{let t=S(ke);return()=>{t.setUpLocationChangeListener()}}},{provide:Qb,useValue:2}])}var $x=new F("");function X1(e){return cc(0,[{provide:$x,useExisting:G1},{provide:Od,useExisting:e}])}function Z1(){return cc(8,[sx,{provide:Nd,useExisting:sx}])}function J1(e){let t=[{provide:Vx,useValue:O1},{provide:Lx,useValue:C({skipNextTransition:!!e?.skipInitialTransition},e)}];return cc(9,t)}var cx=new F("ROUTER_FORROOT_GUARD"),tP=[zi,{provide:ic,useClass:Ka},ke,rc,{provide:Ko,useFactory:H1,deps:[ke]},Wb,[]],Yb=(()=>{let t=class t{constructor(i){}static forRoot(i,r){return{ngModule:t,providers:[tP,[],{provide:Md,multi:!0,useValue:i},{provide:cx,useFactory:rP,deps:[[ke,new ee,new N_]]},{provide:ac,useValue:r||{}},r?.useHash?nP():iP(),eP(),r?.preloadingStrategy?X1(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?oP(r):[],r?.bindToComponentInputs?Z1().\u0275providers:[],r?.enableViewTransitions?J1().\u0275providers:[],sP()]}}static forChild(i){return{ngModule:t,providers:[{provide:Md,multi:!0,useValue:i}]}}};t.\u0275fac=function(r){return new(r||t)(g(cx,8))},t.\u0275mod=H({type:t}),t.\u0275inj=W({});let e=t;return e})();function eP(){return{provide:Ux,useFactory:()=>{let e=S(mv),t=S(z),n=S(ac),i=S(Kb),r=S(ic);return n.scrollOffset&&e.setOffset(n.scrollOffset),new W1(r,i,e,t,n)}}}function nP(){return{provide:ph,useClass:cv}}function iP(){return{provide:ph,useClass:av}}function rP(e){return"guarded"}function oP(e){return[e.initialNavigation==="disabled"?Y1().\u0275providers:[],e.initialNavigation==="enabledBlocking"?Q1().\u0275providers:[]]}var lx=new F("");function sP(){return[{provide:lx,useFactory:K1},{provide:Fc,multi:!0,useExisting:lx}]}var qx=(()=>{let t=class t{constructor(i){this.renderer=i}ngOnInit(){this.renderer.setStyle(document.body,"background","url( https://mnd-assets.mynewsdesk.com/image/upload/c_fill,dpr_auto,f_auto,g_auto,q_auto:good,w_1782/a2i7v0esw1hag0nql553) no-repeat center center fixed"),this.renderer.setStyle(document.body,"background-size","cover")}};t.\u0275fac=function(r){return new(r||t)(k(dn))},t.\u0275cmp=ot({type:t,selectors:[["app-first-page"]],decls:6,vars:0,consts:[[1,"home"],[1,"text"]],template:function(r,o){r&1&&(y(0,"div",0)(1,"div",1)(2,"h1"),T(3,"Welcome to Colleague Care!"),_(),y(4,"p"),T(5,"Your compass for cultivating camaraderie in the workplace. Streamline your team's efforts with intuitive scheduling for tasks and events, fostering a culture of collaboration and support. Elevate your work environment, one chore at a time."),_()()())},styles:["@media (min-width: 768px){.home[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;margin-top:150px}.text[_ngcontent-%COMP%]{width:700px;background-color:#00000080;border-radius:30px;transition:width 1s ease-out,background-color 1s ease-out}.text[_ngcontent-%COMP%]:hover{width:700px;background-color:#000;border-radius:30px;transition:width 1s ease-in,background-color 1s ease-in}p[_ngcontent-%COMP%]{color:#fff;font-size:larger;text-align:center;margin:50px}h1[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:50px}}@media (max-width: 767px){.home[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;margin-top:100px}.text[_ngcontent-%COMP%]{width:300px;background-color:#00000080;border-radius:30px;transition:width 1s ease-out,background-color 1s ease-out}.text[_ngcontent-%COMP%]:hover{width:300px;background-color:#000;border-radius:30px;transition:width 1s ease-in,background-color 1s ease-in}p[_ngcontent-%COMP%]{color:#fff;font-size:large;text-align:center;margin:30px}h1[_ngcontent-%COMP%]{color:#fff;text-align:center;margin:30px}}"]});let e=t;return e})();function aP(e,t){if(e&1){let n=Nt();y(0,"div",3)(1,"h2"),T(2,"Login"),_(),y(3,"div",4)(4,"label",5),T(5,"Email:"),_(),y(6,"input",6),Ke("ngModelChange",function(r){st(n);let o=et();return He(o.email,r)||(o.email=r),at(r)}),_()(),y(7,"div",4)(8,"label",7),T(9,"Password:"),_(),y(10,"input",8),Ke("ngModelChange",function(r){st(n);let o=et();return He(o.password,r)||(o.password=r),at(r)}),_()(),y(11,"div",9)(12,"button",10),Z("click",function(){st(n);let r=et();return at(r.login())}),T(13,"Login"),_()(),y(14,"div",11)(15,"p"),T(16,"Don't have an account? "),y(17,"a",12),Z("click",function(){return st(n),et().toggleRegistrationForm(),at(!1)}),T(18,"Create"),_()()()()}if(e&2){let n=et();M(6),We("ngModel",n.email),M(4),We("ngModel",n.password)}}function cP(e,t){if(e&1){let n=Nt();y(0,"div",13)(1,"h2"),T(2,"Create Account"),_(),y(3,"div",4)(4,"label",5),T(5,"Email:"),_(),y(6,"input",6),Ke("ngModelChange",function(r){st(n);let o=et();return He(o.email,r)||(o.email=r),at(r)}),_()(),y(7,"div",4)(8,"label",7),T(9,"Password:"),_(),y(10,"input",8),Ke("ngModelChange",function(r){st(n);let o=et();return He(o.password,r)||(o.password=r),at(r)}),_()(),y(11,"div",4)(12,"label",14),T(13,"First Name:"),_(),y(14,"input",15),Ke("ngModelChange",function(r){st(n);let o=et();return He(o.firstName,r)||(o.firstName=r),at(r)}),_()(),y(15,"div",4)(16,"label",16),T(17,"Last Name:"),_(),y(18,"input",17),Ke("ngModelChange",function(r){st(n);let o=et();return He(o.lastName,r)||(o.lastName=r),at(r)}),_()(),y(19,"div",4)(20,"label",18),T(21,"Birthday:"),_(),y(22,"input",19),Ke("ngModelChange",function(r){st(n);let o=et();return He(o.birthday,r)||(o.birthday=r),at(r)}),_()(),y(23,"div",20)(24,"button",10),Z("click",function(){st(n);let r=et();return at(r.register())}),T(25,"Register"),_()(),y(26,"div",21)(27,"p"),T(28,"Already have an account? "),y(29,"a",22),Z("click",function(){return st(n),et().toggleRegistrationForm(),at(!1)}),T(30,"Login"),_()()()()}if(e&2){let n=et();M(6),We("ngModel",n.email),M(4),We("ngModel",n.password),M(4),We("ngModel",n.firstName),M(4),We("ngModel",n.lastName),M(4),We("ngModel",n.birthday)}}var Gx=(()=>{let t=class t{constructor(i,r,o){this.auth=i,this.router=r,this.firestore=o,this.email="",this.password="",this.firstName="",this.lastName="",this.birthday=null,this.showRegistrationForm=!1}login(){return p(this,null,function*(){try{let i=yield this.auth.signInWithEmailAndPassword(this.email,this.password);console.log("Logged in successfully!",i.user),i.user&&this.router.navigate(["/display"])}catch(i){alert("Login failed. Please check your credentials."),console.error("Login error:",i),this.email="",this.password=""}})}register(){return p(this,null,function*(){try{let i=yield this.auth.createUserWithEmailAndPassword(this.email,this.password);console.log("Registered successfully!",i.user),i.user&&(yield this.firestore.collection("colleagues").doc(i.user.uid).set({email:this.email,firstName:this.firstName,lastName:this.lastName,birthday:this.birthday}),this.router.navigate(["/display"]))}catch(i){alert("Registration failed. Please try again."),console.error("Registration error:",i),this.email="",this.password=""}})}toggleRegistrationForm(){this.showRegistrationForm=!this.showRegistrationForm,this.email="",this.password="",this.firstName="",this.lastName="",this.birthday=null}};t.\u0275fac=function(r){return new(r||t)(k(Un),k(ke),k(Ua))},t.\u0275cmp=ot({type:t,selectors:[["app-login-page"]],decls:3,vars:2,consts:[[1,"login"],["class","login-table",4,"ngIf"],["class","registration-table",4,"ngIf"],[1,"login-table"],[1,"input"],["for","email"],["type","email","id","email",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password",3,"ngModelChange","ngModel"],[1,"login-button"],[3,"click"],[1,"create-account-link"],["href","#",1,"create",3,"click"],[1,"registration-table"],["for","firstName"],["type","text","id","firstName",3,"ngModelChange","ngModel"],["for","lastName"],["type","text","id","lastName",3,"ngModelChange","ngModel"],["for","birthday"],["type","date","id","birthday",3,"ngModelChange","ngModel"],[1,"registration-button"],[1,"login-link"],["href","#",3,"click"]],template:function(r,o){r&1&&(y(0,"div",0),Ct(1,aP,19,2,"div",1)(2,cP,31,5,"div",2),_()),r&2&&(M(),it("ngIf",!o.showRegistrationForm),M(),it("ngIf",o.showRegistrationForm))},dependencies:[Oe,pn,oi,jn],styles:[".login[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;align-items:center;justify-content:center}h2[_ngcontent-%COMP%]{margin-top:20px}.login-table[_ngcontent-%COMP%]{background-color:#00000080;border-radius:30px;color:#fff;transition:width 1s ease-out,background-color 1s ease-out;margin-bottom:300px;display:flex;align-items:center;justify-content:center;flex-direction:column}.login-table[_ngcontent-%COMP%]:hover{background-color:#000;border-radius:30px;color:#fff;transition:width 1s ease-in,background-color 1s ease-in}.registration-table[_ngcontent-%COMP%]{background-color:#00000080;border-radius:30px;color:#fff;transition:width 1s ease-out,background-color 1s ease-out;margin-bottom:120px;display:flex;align-items:center;justify-content:center;flex-direction:column}.registration-table[_ngcontent-%COMP%]:hover{background-color:#000;border-radius:30px;color:#fff;transition:width 1s ease-in,background-color 1s ease-in}.input[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:40px;margin-right:40px;margin-bottom:20px}input[_ngcontent-%COMP%]{border-radius:20px;border:solid 2px #E1E1E1;height:20px;padding-left:5px;padding-right:5px;background-color:#fff;transition:background-color .3s ease}label[_ngcontent-%COMP%]{font-size:small}input[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.login-button[_ngcontent-%COMP%], .registration-button[_ngcontent-%COMP%]{align-self:flex-end}button[_ngcontent-%COMP%]{border-radius:20px;margin-bottom:40px;margin-right:40px;margin-top:20px;height:25px;width:75px;border:solid 2px rgb(99,99,99);transition:border-color .3s ease;font-size:medium}button[_ngcontent-%COMP%]:hover{border-color:#e1e1e1}"]});let e=t;return e})();var Wx="auth",lc=class{constructor(t){return t}},uc=class{constructor(){return Ts(Wx)}};var Xb=new F("angularfire2.auth-instances");function cM(e,t){let n=cl(Wx,e,t);return n&&new lc(n)}function lM(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new lc(i)}}var uM={provide:uc,deps:[[new ee,Xb]]},dM={provide:lc,useFactory:cM,deps:[[new ee,Xb],Bn]},hM=(()=>{class e{constructor(){ce("angularfire",Ee.full,"auth")}static \u0275fac=function(i){return new(i||e)};static \u0275mod=H({type:e});static \u0275inj=W({providers:[dM,uM]})}return e})();function Hx(e,...t){return{ngModule:hM,providers:[{provide:Xb,useFactory:lM(e),multi:!0,deps:[z,Kt,gn,Gi,[new ee,Xe],...t]}]}}var Kx=ge(wh,!0);var Ld=function(){return Ld=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Ld.apply(this,arguments)};var mM={includeMetadataChanges:!1};function Qx(e,t){return t===void 0&&(t=mM),new fe(function(n){var i=Fo(e,t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function Yx(e,t){var n;t===void 0&&(t={});var i=e.data(t);return!e.exists()||typeof i!="object"||i===null||!t.idField?i:Ld(Ld({},i),(n={},n[t.idField]=e.id,n))}function Xx(e){return Qx(e,{includeMetadataChanges:!0}).pipe(U(function(t){return t.docs}))}function Zx(e,t){return t===void 0&&(t={}),Xx(e).pipe(U(function(n){return n.map(function(i){return Yx(i,t)})}))}var Pe=class{constructor(t){return t}},Jx="firestore",Zb=class{constructor(){return Ts(Jx)}};var Jb=new F("angularfire2.firestore-instances");function pM(e,t){let n=cl(Jx,e,t);return n&&new Pe(n)}function gM(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Pe(i)}}var bM={provide:Zb,deps:[[new ee,Jb]]},_M={provide:Pe,useFactory:pM,deps:[[new ee,Jb],Bn]},vM=(()=>{class e{constructor(){ce("angularfire",Ee.full,"fst")}static \u0275fac=function(i){return new(i||e)};static \u0275mod=H({type:e});static \u0275inj=W({providers:[_M,bM]})}return e})();function tC(e,...t){return{ngModule:vM,providers:[{provide:Jb,useFactory:gM(e),multi:!0,deps:[z,Kt,gn,Gi,[new ee,uc],[new ee,Xe],...t]}]}}var eC=ge(Zx,!0);var Zo=ge(ud,!0);var Ue=ge(Va,!0);var nC=ge(ld,!0);var t_=ge(br,!0);var dc=ge(ad,!0);var iC=ge(kI,!0);var e_=ge(sn,!0);var rC=ge(ja,!0);var jd=ge(rd,!0);var yM=["createChoreForm"],sC=(()=>{let t=class t{constructor(){this.firestore=S(Pe)}saveData(){let i=Ue(this.firestore,"chores");Zo(i,{chore_name:this.choreForm.value.chore_name,description:this.choreForm.value.description,category:this.choreForm.value.category})}resetForm(){this.choreForm.reset({"chore-name":"",description:"",category:"Cleaning"})}submitForm(){alert(this.choreForm.value.chore_name),this.saveData(),this.resetForm()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ot({type:t,selectors:[["app-create-chore"]],viewQuery:function(r,o){if(r&1&&Nn(yM,5),r&2){let s;hn(s=fn())&&(o.choreForm=s.first)}},decls:23,vars:0,consts:[["createChoreForm","ngForm"],["autocomplete","off"],["for","chore_name"],["type","text","id","chore_name","name","chore_name","ngModel",""],["for","description"],["id","description","name","description","ngModel",""],[1,"drop-down"],["for","category"],["id","category","name","category","ngModel",""],["value","Cleaning"],["value","Delivery"],["value","Maintain"],[3,"click"]],template:function(r,o){if(r&1){let s=Nt();y(0,"form",1,0)(2,"div")(3,"label",2),T(4,"Chore Name:"),_(),K(5,"input",3),_(),y(6,"div")(7,"label",4),T(8,"Description:"),_(),K(9,"textarea",5),_(),y(10,"div",6)(11,"label",7),T(12,"Category:"),_(),y(13,"select",8)(14,"option",9),T(15,"Cleaning"),_(),y(16,"option",10),T(17,"Deliver"),_(),y(18,"option",11),T(19,"maintenance"),_()()(),y(20,"div")(21,"button",12),Z("click",function(){return st(s),at(o.submitForm())}),T(22,"Submit"),_()()()}},dependencies:[il,rl,ol,pn,$r,oi,el,jn,Cs],styles:["@media (min-width: 768px){div[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#000;margin-left:150px;margin-top:20px}#category[_ngcontent-%COMP%]{width:410px;border-radius:5px;border:solid 2px #E1E1E1}#chore_name[_ngcontent-%COMP%]{width:150px;border-radius:20px;border:solid 2px #E1E1E1;padding-left:5px;padding-right:5px;background-color:#fff;transition:background-color .3s ease}#chore_name[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}#description[_ngcontent-%COMP%]{height:200px;width:400px;border-radius:20px;border:solid 2px #E1E1E1;padding-left:5px;padding-top:10px;padding-right:5px;background-color:#fff;transition:background-color .3s ease;resize:vertical;overflow-y:auto}#description[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}button[_ngcontent-%COMP%]{height:25px;width:75px;border-radius:20px;background-color:#fff;border:solid 2px rgb(99,99,99);transition:border-color .3s ease;font-size:medium}button[_ngcontent-%COMP%]:hover{border-color:#e1e1e1}}@media (max-width: 767px){div[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#000;margin-left:50px;margin-top:20px}#chore_name[_ngcontent-%COMP%]{width:150px;border-radius:20px;border:solid 2px #E1E1E1;padding-left:5px;padding-right:5px;background-color:#fff;transition:background-color .3s ease}#chore_name[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}#description[_ngcontent-%COMP%]{height:240px;width:225px;border-radius:20px;border:solid 2px #E1E1E1;padding-left:5px;padding-top:10px;padding-right:5px;background-color:#fff;transition:background-color .3s ease;resize:vertical;overflow-y:auto}#description[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}button[_ngcontent-%COMP%]{height:25px;width:75px;border-radius:20px;background-color:#fff;border:solid 2px rgb(99,99,99);transition:border-color .3s ease;font-size:medium;margin-top:5px}button[_ngcontent-%COMP%]:hover{border-color:#e1e1e1}}"]});let e=t;return e})();var EM=["createEventForm"],aC=(()=>{let t=class t{constructor(){this.firestore=S(Pe)}saveData(){let i=Ue(this.firestore,"events");Zo(i,{name:this.eventForm.value.name,description:this.eventForm.value.description,date:this.eventForm.value.date,time:this.eventForm.value.time,category:this.eventForm.value.category})}resetForm(){this.eventForm.reset({name:"",description:"",date:"",time:"",category:"Fika"})}submitForm(){this.saveData(),this.resetForm()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ot({type:t,selectors:[["app-create-event"]],viewQuery:function(r,o){if(r&1&&Nn(EM,5),r&2){let s;hn(s=fn())&&(o.eventForm=s.first)}},decls:34,vars:0,consts:[["createEventForm","ngForm"],["autocomplete","off",1,"eventform"],[1,"textInput"],["for","name"],["type","text","id","name","name","name","ngModel",""],["for","description"],["id","description","name","description","ngModel",""],[1,"date-time"],["for","date"],["type","date","id","date","name","date","ngModel",""],["for","time"],["type","time","id","time","name","time","ngModel",""],["for","category"],["id","category","name","category","ngModel",""],["value","Fika"],["value","Birthday"],["value","AV"],["value","Trip"],[3,"click"]],template:function(r,o){if(r&1){let s=Nt();y(0,"form",1,0)(2,"div",2)(3,"label",3),T(4,"Event name:"),_(),K(5,"input",4),_(),y(6,"div",2)(7,"label",5),T(8,"Description:"),_(),K(9,"textarea",6),_(),y(10,"div",7)(11,"div")(12,"label",8),T(13,"Date:"),_(),K(14,"input",9),_(),y(15,"div")(16,"label",10),T(17,"Time:"),_(),K(18,"input",11),_()(),y(19,"div",2)(20,"label",12),T(21,"Category:"),_(),y(22,"select",13)(23,"option",14),T(24,"Fika"),_(),y(25,"option",15),T(26,"Birthday"),_(),y(27,"option",16),T(28,"AV"),_(),y(29,"option",17),T(30,"Trip"),_()()(),y(31,"div")(32,"button",18),Z("click",function(){return st(s),at(o.submitForm())}),T(33,"Submit"),_()()()}},dependencies:[il,rl,ol,pn,$r,oi,el,jn,Cs],styles:["@media (min-width: 768px){.eventform[_ngcontent-%COMP%]{margin-left:150px;margin-top:20px}.textInput[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px}#category[_ngcontent-%COMP%]{width:410px;border-radius:5px;border:solid 2px #E1E1E1}#name[_ngcontent-%COMP%]{width:150px;border-radius:20px;border:solid 2px #E1E1E1;padding-left:5px;padding-right:5px;background-color:#fff;transition:background-color .3s ease}#name[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}#description[_ngcontent-%COMP%]{height:150px;width:400px;border-radius:20px;border:solid 2px #E1E1E1;padding-left:5px;padding-top:10px;padding-right:5px;background-color:#fff;transition:background-color .3s ease;resize:vertical;overflow-y:auto}#description[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.date-time[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:20px}#date[_ngcontent-%COMP%]{height:20px;margin-right:20px}#time[_ngcontent-%COMP%]{height:20px}button[_ngcontent-%COMP%]{margin-top:20px;height:25px;width:75px;border-radius:20px;background-color:#fff;border:solid 2px rgb(99,99,99);transition:border-color .3s ease;font-size:medium}button[_ngcontent-%COMP%]:hover{border-color:#e1e1e1}}@media (max-width: 767px){.eventform[_ngcontent-%COMP%]{margin-left:50px;margin-top:20px}.textInput[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:20px}#name[_ngcontent-%COMP%]{width:150px;border-radius:20px;border:solid 2px #E1E1E1;padding-left:5px;padding-right:5px;background-color:#fff;transition:background-color .3s ease}#name[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}#description[_ngcontent-%COMP%]{height:200px;width:225px;border-radius:20px;border:solid 2px #E1E1E1;padding-left:5px;padding-top:10px;padding-right:5px;background-color:#fff;transition:background-color .3s ease;resize:vertical;overflow-y:auto}#description[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.date-time[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-top:20px}#date[_ngcontent-%COMP%]{height:20px;margin-right:20px}#time[_ngcontent-%COMP%]{height:20px}button[_ngcontent-%COMP%]{margin-top:20px;height:25px;width:75px;border-radius:20px;background-color:#fff;border:solid 2px rgb(99,99,99);transition:border-color .3s ease;font-size:medium}button[_ngcontent-%COMP%]:hover{border-color:#e1e1e1}}"]});let e=t;return e})();function xM(e,t){e&1&&K(0,"app-create-chore")}function CM(e,t){e&1&&K(0,"app-create-event")}var cC=(()=>{let t=class t{constructor(){this.createChoreVisible=!0,this.createEventVisible=!1}showCreateChore(){this.createChoreVisible=!0,this.createEventVisible=!1}showCreateEvent(){this.createChoreVisible=!1,this.createEventVisible=!0}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ot({type:t,selectors:[["app-display-card"]],decls:8,vars:6,consts:[[1,"toggle-buttons"],[1,"chore",3,"click"],[1,"event",3,"click"],[1,"display-content"],[4,"ngIf"]],template:function(r,o){r&1&&(y(0,"div",0)(1,"button",1),Z("click",function(){return o.showCreateChore()}),T(2,"Create Chore"),_(),y(3,"button",2),Z("click",function(){return o.showCreateEvent()}),T(4,"Create Event"),_()(),y(5,"div",3),Ct(6,xM,1,0,"app-create-chore",4)(7,CM,1,0,"app-create-event",4),_()),r&2&&(M(),Me("shaded-chore",o.createChoreVisible),M(2),Me("shaded-event",o.createEventVisible),M(3),it("ngIf",o.createChoreVisible),M(),it("ngIf",o.createEventVisible))},dependencies:[Oe,sC,aC],styles:[".toggle-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%}button[_ngcontent-%COMP%]{width:100%;height:40px;background-color:#89abb4;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover, .shaded-chore[_ngcontent-%COMP%], .shaded-event[_ngcontent-%COMP%]{background-color:#f5f9fa}.event[_ngcontent-%COMP%]{border-top-right-radius:30px;border-style:hidden}.chore[_ngcontent-%COMP%]{border-top-left-radius:30px;border-style:hidden}"]});let e=t;return e})();var lC=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ot({type:t,selectors:[["app-form-page"]],decls:3,vars:0,consts:[[1,"form-page"],[1,"form"]],template:function(r,o){r&1&&(y(0,"div",0)(1,"div",1),K(2,"app-display-card"),_()())},dependencies:[cC],styles:["@keyframes _ngcontent-%COMP%_snapIn{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}.form[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_snapIn .5s ease-out forwards;opacity:0}@media (min-width: 768px){.form-page[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center}.form[_ngcontent-%COMP%]{width:700px;height:500px;margin-top:75px;background-color:#f5f9fa;border-radius:30px}}@media (max-width: 767px){.form-page[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center}.form[_ngcontent-%COMP%]{width:700px;height:600px;margin-top:75px;background-color:#f5f9fa;border-radius:30px}}"]});let e=t;return e})();function AM(e,t){if(e&1&&(y(0,"div")(1,"p",13),T(2),_()()),e&2){let n=et().$implicit;M(2),Ce(n.chore.description)}}function SM(e,t){e&1&&K(0,"img",14)}function DM(e,t){e&1&&K(0,"img",15)}function RM(e,t){e&1&&K(0,"img",16)}function kM(e,t){if(e&1){let n=Nt();y(0,"div",6),Z("click",function(){let r=st(n).$implicit,o=et();return at(o.toggleDetails(r))}),y(1,"div",7)(2,"h3"),T(3),_(),y(4,"p"),T(5),_(),Ct(6,AM,3,1,"div",8),_(),y(7,"div",9),Ct(8,SM,1,0,"img",10)(9,DM,1,0,"img",11)(10,RM,1,0,"img",12),_()()}if(e&2){let n=t.$implicit;M(3),Ce(n.chore.chore_name),M(2),H_("",n.colleague.first_name," ",n.colleague.last_name,""),M(),it("ngIf",n.expanded),M(2),it("ngIf",n.chore.category==="Cleaning"),M(),it("ngIf",n.chore.category==="Maintain"),M(),it("ngIf",n.chore.category==="Delivery")}}var uC=(()=>{let t=class t{constructor(i){this.firestore=i,this.schedule=[],this.displayedSchedule=[],this.currentPage=0,this.pageSize=5,this.maxPage=0,this.createSchedule()}createSchedule(){return p(this,null,function*(){let i=Ue(this.firestore,"chores"),r=Ue(this.firestore,"colleagues"),s=(yield dc(i)).docs.map(u=>u.data()),c=(yield dc(r)).docs.map(u=>u.data()),l=this.getWeekNumber(new Date);for(let u of s)if(!(yield this.getExistingSchedule(u,l))){let h=this.shuffleArray(c),f=this.generateChoreSchedule(h,l,u);yield this.saveSchedule(f)}yield this.fetchSchedule()})}fetchSchedule(){return p(this,null,function*(){let i=this.getWeekNumber(new Date),r=Ue(this.firestore,"schedule"),o=e_(r,jd("weekNumber","==",i)),s=yield dc(o);this.schedule=s.docs.map(a=>a.data()),this.maxPage=Math.ceil(this.schedule.length/this.pageSize)-1,this.updateDisplayedSchedule()})}getExistingSchedule(i,r){return p(this,null,function*(){let o=Ue(this.firestore,"schedule"),s=e_(o,jd("chore.chore_name","==",i.chore_name),jd("weekNumber","==",r));return!(yield dc(s)).empty})}saveSchedule(i){return p(this,null,function*(){let r=Ue(this.firestore,"schedule");for(let o of i)try{yield Zo(r,o)}catch(s){console.error("Error adding document: ",s)}})}generateChoreSchedule(i,r,o){let s=[];for(let a=0;a<i.length;a++){let c=r+a,l=a%i.length,u=i[l],d={weekNumber:c,colleague:u,chore:o};s.push(d)}return s}getWeekNumber(i){let r=new Date(i.getFullYear(),0,1),o=Math.floor((i.getTime()-r.getTime())/(24*3600*1e3)),s=(11-r.getDay())%7,a=o-s;return Math.ceil((a+1)/7)}shuffleArray(i){for(let r=i.length-1;r>0;r--){let o=Math.floor(Math.random()*(r+1));[i[r],i[o]]=[i[o],i[r]]}return i}toggleDetails(i){i.expanded=!i.expanded}nextPage(){this.currentPage<this.maxPage&&(this.currentPage++,this.updateDisplayedSchedule())}prevPage(){this.currentPage>0&&(this.currentPage--,this.updateDisplayedSchedule())}updateDisplayedSchedule(){let i=this.currentPage*this.pageSize;this.displayedSchedule=this.schedule.slice(i,i+this.pageSize)}};t.\u0275fac=function(r){return new(r||t)(k(Pe))},t.\u0275cmp=ot({type:t,selectors:[["app-chedual-creator"]],decls:10,vars:3,consts:[[1,"headCard"],[1,"displayTable"],["class","tableContent",3,"click",4,"ngFor","ngForOf"],[1,"pagination"],[1,"prevPage",3,"click","disabled"],[1,"nextPage",3,"click","disabled"],[1,"tableContent",3,"click"],[1,"column"],[4,"ngIf"],[1,"category-icon"],["src","../../../assets/images/cleaning.svg","alt","Cleaning Icon",4,"ngIf"],["src","../../../assets/images/maintain.svg","alt","Maintain Icon",4,"ngIf"],["src","../../../assets/images/delivery.svg","alt","Delivery Icon",4,"ngIf"],[1,"important"],["src","../../../assets/images/cleaning.svg","alt","Cleaning Icon"],["src","../../../assets/images/maintain.svg","alt","Maintain Icon"],["src","../../../assets/images/delivery.svg","alt","Delivery Icon"]],template:function(r,o){r&1&&(y(0,"div",0)(1,"h2"),T(2,"Chores assigned this week."),_()(),y(3,"div",1),Ct(4,kM,11,7,"div",2),y(5,"div",3)(6,"button",4),Z("click",function(){return o.prevPage()}),T(7,"Prev"),_(),y(8,"button",5),Z("click",function(){return o.nextPage()}),T(9,"Next"),_()()()),r&2&&(M(4),it("ngForOf",o.displayedSchedule),M(2),it("disabled",o.currentPage===0),M(2),it("disabled",o.currentPage===o.maxPage))},dependencies:[Br,Oe],styles:["@media (min-width: 768px){.displayTable[_ngcontent-%COMP%]{background-color:#f5f9fa;width:400px;display:flex;flex-direction:column;align-items:center;padding-top:20px;padding-bottom:20px;border-bottom-left-radius:20px;border-bottom-right-radius:20px}.tableContent[_ngcontent-%COMP%]{background-color:#fff;display:flex;flex-direction:row;border:solid 2px #E1E1E1;width:250px;border-radius:30px;padding-left:40px;padding-right:40px;margin:10px}.tableContent[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.column[_ngcontent-%COMP%]{width:200px}.category-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px}.headCard[_ngcontent-%COMP%]{background-color:#89abb4;color:#fff;border-top-left-radius:20px;border-top-right-radius:20px;display:flex;align-items:center;justify-content:center}.important[_ngcontent-%COMP%]{background-color:#f2ffab}.pagination[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}button[_ngcontent-%COMP%]{margin-left:40px;margin-right:40px;margin-top:10px;height:30px;background-color:#fff;border:solid 1px rgb(99,99,99);transition:border-color .3s ease;font-size:medium}button[_ngcontent-%COMP%]:hover{border-color:#e1e1e1}.prevPage[_ngcontent-%COMP%]{border-bottom-left-radius:20px;border-top-left-radius:20px}.nextPage[_ngcontent-%COMP%]{border-bottom-right-radius:20px;border-top-right-radius:20px}}@media (max-width: 767px){.displayTable[_ngcontent-%COMP%]{background-color:#f5f9fa;width:100%;display:flex;flex-direction:column;align-items:center;padding-top:20px;padding-bottom:20px;border-bottom-left-radius:20px;border-bottom-right-radius:20px}.tableContent[_ngcontent-%COMP%]{background-color:#fff;border:solid 2px #E1E1E1;width:250px;border-radius:30px;padding-left:25px;padding-right:25px;margin:10px}.tableContent[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.headCard[_ngcontent-%COMP%]{background-color:#89abb4;color:#000;border-top-left-radius:20px;border-top-right-radius:20px;display:flex;align-items:center;justify-content:center}.important[_ngcontent-%COMP%]{background-color:#f2ffab}.pagination[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}button[_ngcontent-%COMP%]{margin-left:40px;margin-right:40px;margin-top:10px;height:30px;background-color:#fff;border:solid 1px rgb(99,99,99);transition:border-color .3s ease;font-size:medium}button[_ngcontent-%COMP%]:hover{border-color:#e1e1e1}.prevPage[_ngcontent-%COMP%]{border-bottom-left-radius:20px;border-top-left-radius:20px}.nextPage[_ngcontent-%COMP%]{border-bottom-right-radius:20px;border-top-right-radius:20px}.category-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px}}"]});let e=t;return e})();var MM=(e,t)=>({"event-exists":e,"no-event":t});function OM(e,t){if(e&1&&($_(0),y(1,"h2"),T(2,"Today it's time for:"),_(),y(3,"p"),T(4),_(),q_()),e&2){let n=et();M(4),Ce(n.eventToday.name)}}function NM(e,t){e&1&&(y(0,"h2"),T(1,"No event today :("),_())}function FM(e,t){if(e&1){let n=Nt();y(0,"div")(1,"p",16),T(2),_(),y(3,"p"),T(4),_(),y(5,"div",17)(6,"button",18),Z("click",function(){st(n);let r=et().$implicit,o=et();return at(o.editEvent(r))}),T(7,"Edit"),_(),y(8,"button",19),Z("click",function(){st(n);let r=et().$implicit,o=et();return at(o.deleteEvent(r))}),K(9,"img",20),_()()()}if(e&2){let n=et().$implicit;M(2),Ce(n.description),M(2),Ge("",n.time," o'clock")}}function VM(e,t){e&1&&K(0,"img",21)}function LM(e,t){e&1&&K(0,"img",22)}function jM(e,t){e&1&&K(0,"img",23)}function BM(e,t){e&1&&K(0,"img",24)}function UM(e,t){if(e&1){let n=Nt();y(0,"div",8),Z("click",function(){let r=st(n).$implicit,o=et();return at(o.toggleDetails(r))}),y(1,"div",9)(2,"h3"),T(3),_(),y(4,"p"),T(5),_(),Ct(6,FM,10,2,"div",10),_(),y(7,"div",11),Ct(8,VM,1,0,"img",12)(9,LM,1,0,"img",13)(10,jM,1,0,"img",14)(11,BM,1,0,"img",15),_()()}if(e&2){let n=t.$implicit;M(3),Ce(n.name),M(2),Ce(n.date),M(),it("ngIf",n.expanded),M(2),it("ngIf",n.category==="Fika"),M(),it("ngIf",n.category==="Birthday"),M(),it("ngIf",n.category==="AV"),M(),it("ngIf",n.category==="Trip")}}var dC=(()=>{let t=class t{constructor(i){this.firestore=i,this.events$=eC(Ue(this.firestore,"events"),{idField:"id"}),this.sortedEvents=[],this.currentPage=0,this.pageSize=5,this.eventToday=null}ngOnInit(){this.events$.subscribe(i=>{this.sortedEvents=this.sortEventsByDate(i),this.updateEventToday()})}sortEventsByDate(i){let r=new Date;return i.filter(o=>new Date(o.date+" "+o.time).getTime()>r.getTime()).sort((o,s)=>{let a=new Date(o.date+" "+o.time),c=new Date(s.date+" "+s.time);return a.getTime()-c.getTime()})}toggleDetails(i){i.expanded=!i.expanded}nextPage(){let i=Math.ceil(this.sortedEvents.length/this.pageSize);this.currentPage<i-1&&this.currentPage++}prevPage(){this.currentPage>0&&this.currentPage--}getDisplayedEvents(){let i=this.currentPage*this.pageSize;return this.sortedEvents.slice(i,i+this.pageSize)}deleteEvent(i){if(!i||!i.id){console.error("Invalid event:",i);return}if(confirm("Are you sure you want to delete this event?")){let r=t_(this.firestore,"events",i.id);nC(r).then(()=>{console.log("Event deleted successfully."),this.updateEventToday()}).catch(o=>{console.error("Error deleting event:",o)})}}editEvent(i){let r=prompt("Enter new name:",i.name),o=prompt("Enter new description:",i.description),s=prompt("Enter new date (YYYY-MM-DD):",i.date),a=prompt("Enter new time (HH:MM):",i.time);if(r===null||o===null||s===null||a===null||r===""||o===""||s===""||a==="")return;let c=new Date(s),l=t_(this.firestore,"events",i.id);rC(l,{name:r,description:o,date:c.toISOString().split("T")[0],time:a}).then(()=>{console.log("Event updated successfully.");let u=this.sortedEvents.findIndex(d=>d.id===i.id);u!==-1&&(this.sortedEvents[u].name=r,this.sortedEvents[u].description=o,this.sortedEvents[u].date=c.toISOString().split("T")[0],this.sortedEvents[u].time=a)}).catch(u=>{console.error("Error updating event:",u)})}updateEventToday(){let i=new Date;this.eventToday=this.sortedEvents.find(r=>new Date(r.date).toDateString()===i.toDateString())||null}};t.\u0275fac=function(r){return new(r||t)(k(Pe))},t.\u0275cmp=ot({type:t,selectors:[["app-fetch-events"]],decls:11,vars:9,consts:[["noEventToday",""],[1,"event-today-box",3,"ngClass"],[4,"ngIf","ngIfElse"],[1,"displayTable"],["class","tableContent",3,"click",4,"ngFor","ngForOf"],[1,"pagination"],[1,"prevPage",3,"click","disabled"],[1,"nextPage",3,"click","disabled"],[1,"tableContent",3,"click"],[1,"column"],[4,"ngIf"],[1,"category-icon"],["src","../../../assets/fika.png","alt","Fika Icon",4,"ngIf"],["src","../../../assets/images/birthday.svg","alt","Birthday Icon",4,"ngIf"],["src","../../../assets/images/drink.svg","alt","AV Icon",4,"ngIf"],["src","../../../assets/images/trip.svg","alt","Trip Icon",4,"ngIf"],[1,"important"],[1,"delEditButtons"],[1,"editButton",3,"click"],[1,"deleteButton",3,"click"],["src","../../../assets/bin.png","alt","Delete",2,"width","16px","height","16px"],["src","../../../assets/fika.png","alt","Fika Icon"],["src","../../../assets/images/birthday.svg","alt","Birthday Icon"],["src","../../../assets/images/drink.svg","alt","AV Icon"],["src","../../../assets/images/trip.svg","alt","Trip Icon"]],template:function(r,o){if(r&1){let s=Nt();y(0,"div",1),Ct(1,OM,5,1,"ng-container",2)(2,NM,2,0,"ng-template",null,0,Rc),_(),y(4,"div",3),Ct(5,UM,12,7,"div",4),y(6,"div",5)(7,"button",6),Z("click",function(){return st(s),at(o.prevPage())}),T(8,"Prev"),_(),y(9,"button",7),Z("click",function(){return st(s),at(o.nextPage())}),T(10,"Next"),_()()()}if(r&2){let s=Dc(3);it("ngClass",K_(6,MM,o.eventToday,!o.eventToday)),M(),it("ngIf",o.eventToday)("ngIfElse",s),M(4),it("ngForOf",o.getDisplayedEvents()),M(2),it("disabled",o.currentPage===0),M(2),it("disabled",o.currentPage===o.sortedEvents.length/o.pageSize-1)}},dependencies:[lv,Br,Oe],styles:["@media (min-width: 768px){.displayTable[_ngcontent-%COMP%]{background-color:#f5f9fa;width:400px;display:flex;flex-direction:column;align-items:center;padding-top:20px;padding-bottom:20px;border-bottom-left-radius:20px;border-bottom-right-radius:20px}.tableContent[_ngcontent-%COMP%]{display:flex;flex-direction:row;background-color:#fff;border:solid 2px #E1E1E1;width:250px;border-radius:30px;padding-left:40px;padding-right:40px;margin:10px}.category-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px}.delEditButtons[_ngcontent-%COMP%]{display:flex;flex-direction:row}.tableContent[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.eventDetails[_ngcontent-%COMP%]{overflow:hidden;max-height:0;transition:max-height .3s ease}.eventDetails.open[_ngcontent-%COMP%]{max-height:200px;min-height:75px;border-bottom-left-radius:10px;border-bottom-right-radius:10px}.event-today-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:400px;height:70px}.event-exists[_ngcontent-%COMP%]{background-color:#81fbb8;border-top-left-radius:20px;border-top-right-radius:20px;display:flex;flex-direction:column}.event-exists[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px}.event-exists[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:2px;margin-bottom:0}.no-event[_ngcontent-%COMP%]{background-color:#89abb4;border-top-left-radius:20px;border-top-right-radius:20px}.pagination[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}.column[_ngcontent-%COMP%]{width:200px}button[_ngcontent-%COMP%]{margin-left:40px;margin-right:40px;margin-top:10px;height:30px;background-color:#fff;border:solid 1px rgb(99,99,99);transition:border-color .3s ease;font-size:medium}button[_ngcontent-%COMP%]:hover{border-color:#e1e1e1}.editButton[_ngcontent-%COMP%]{margin-bottom:20px;border-top:none;border-left:none;border-right:none;border-width:3px;background-color:transparent}.deleteButton[_ngcontent-%COMP%]{margin-top:12px;padding-top:1px;border:none;background:none}.prevPage[_ngcontent-%COMP%]{border-bottom-left-radius:20px;border-top-left-radius:20px}.nextPage[_ngcontent-%COMP%]{border-bottom-right-radius:20px;border-top-right-radius:20px}.important[_ngcontent-%COMP%]{background-color:#f2ffab}}@media (max-width: 767px){.displayTable[_ngcontent-%COMP%]{background-color:#f5f9fa;width:100%;display:flex;flex-direction:column;align-items:center;padding-top:20px;padding-bottom:20px;border-bottom-left-radius:20px;border-bottom-right-radius:20px}.tableContent[_ngcontent-%COMP%]{background-color:#fff;border:solid 2px #E1E1E1;width:250px;border-radius:30px;padding-left:25px;padding-right:25px;margin:10px}.tableContent[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.eventDetails[_ngcontent-%COMP%]{overflow:hidden;max-height:0;transition:max-height .3s ease}.eventDetails.open[_ngcontent-%COMP%]{max-height:200px;min-height:75px;border-bottom-left-radius:10px;border-bottom-right-radius:10px}.event-today-box[_ngcontent-%COMP%]{margin-top:40px;display:flex;align-items:center;justify-content:center;width:500px;height:70px}.event-exists[_ngcontent-%COMP%]{width:100%;background-color:#81fbb8;border-top-left-radius:20px;border-top-right-radius:20px;display:flex;flex-direction:column}.event-exists[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px}.event-exists[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:2px;margin-bottom:0}.no-event[_ngcontent-%COMP%]{width:100%;background-color:#89abb4;border-top-left-radius:20px;border-top-right-radius:20px}.pagination[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between}button[_ngcontent-%COMP%]{margin-left:40px;margin-right:40px;margin-top:10px;height:30px;background-color:#fff;border:solid 1px rgb(99,99,99);transition:border-color .3s ease;font-size:medium}button[_ngcontent-%COMP%]:hover{border-color:#e1e1e1}.prevPage[_ngcontent-%COMP%]{border-bottom-left-radius:20px;border-top-left-radius:20px}.nextPage[_ngcontent-%COMP%]{border-bottom-right-radius:20px;border-top-right-radius:20px}.important[_ngcontent-%COMP%]{background-color:#f2ffab}.category-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px}}"]});let e=t;return e})();var Bd=(()=>{let t=class t{constructor(i){this.auth=i,this.isLoggedIn=this.auth.authState.pipe(U(r=>!!r)),this.userEmail=this.auth.authState.pipe(U(r=>r?r.email:null))}logout(){return p(this,null,function*(){try{yield this.auth.signOut(),console.log("Logged out successfully!")}catch(i){console.error("Logout error:",i)}})}};t.\u0275fac=function(r){return new(r||t)(g(Un))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function $M(e,t){e&1&&(y(0,"div")(1,"p"),T(2,"No suggestions yet."),_()())}function qM(e,t){if(e&1){let n=Nt();y(0,"div",13)(1,"div",14)(2,"input",15),Q_(3,"async"),Ke("ngModelChange",function(r){let o=st(n).$implicit;return He(o.selected,r)||(o.selected=r),at(r)}),Z("change",function(){let r=st(n).$implicit,o=et(2);return at(o.selectSuggestion(r.id))}),_(),y(4,"span",16),T(5),_(),y(6,"div",17),K(7,"div",18),_(),y(8,"span"),T(9),_()()()}if(e&2){let n=t.$implicit,i=et(2);M(2),We("ngModel",n.selected),it("disabled",!i.canVote(n))("checked",n.voters.includes(Y_(3,7,i.authService.userEmail))),M(3),Ce(n.suggestion),M(2),uh("width",i.getPercentage(n.votes),"%"),M(2),Ge("",i.getPercentage(n.votes),"%")}}function GM(e,t){if(e&1&&(y(0,"div",10),Ct(1,qM,10,9,"div",11),_(),y(2,"div",12),T(3),_()),e&2){let n=et();M(),it("ngForOf",n.suggestions),M(2),Ge(" Total Votes: ",n.getTotalVotes()," ")}}function WM(e,t){if(e&1&&(y(0,"p",19),T(1),_()),e&2){let n=et();M(),Ce(n.errorMessage)}}var fC=(()=>{let t=class t{constructor(i,r){this.firestore=i,this.authService=r,this.suggestions=[],this.suggestionText="",this.selectedSuggestionId=null,this.voted=!1,this.isLoading=!1,this.errorMessage=""}ngOnInit(){this.loadSuggestions(),this.checkIfVotedToday()}loadSuggestions(){let r=new Date().toISOString().split("T")[0];this.firestore.collection("lunch",o=>o.where("date","==",r)).valueChanges({idField:"id"}).subscribe(o=>{this.suggestions=o})}createSuggestion(){if(this.suggestionText.trim().length===0){this.errorMessage="Cannot create an empty suggestion.";return}this.isLoading=!0,this.authService.userEmail.subscribe(i=>{if(i&&!this.voted){let r=new Date;this.firestore.collection("lunch").add({suggestion:this.suggestionText,date:r.toISOString().split("T")[0],createdBy:i,votes:1,voters:[i]}).then(()=>{this.loadSuggestions(),this.suggestionText="",this.voted=!0}).catch(o=>{console.error("Error creating suggestion:",o),this.errorMessage="Failed to create suggestion."}).finally(()=>{this.isLoading=!1})}else this.errorMessage="User not authenticated or already voted.",this.isLoading=!1})}selectSuggestion(i){this.selectedSuggestionId=i}triggerVote(){if(!this.selectedSuggestionId){this.errorMessage="No suggestion selected.";return}let i=this.suggestions.find(r=>r.id===this.selectedSuggestionId);i&&!this.voted?this.vote(i):this.errorMessage="Invalid selection or already voted."}vote(i){this.authService.userEmail.subscribe(r=>{r&&this.canVote(i)&&this.firestore.doc(`lunch/${i.id}`).update({votes:i.votes+1,voters:[...i.voters,r]}).then(()=>{this.loadSuggestions(),this.voted=!0}).catch(o=>{console.error("Error voting:",o),this.errorMessage="Failed to vote."})})}canVote(i){return!this.voted&&!i.voters.includes(this.authService.userEmail)}getTotalVotes(){let i=0;return this.suggestions.forEach(r=>{i+=r.votes}),i}getPercentage(i){let r=this.getTotalVotes();return r>0?Math.round(i/r*100):0}checkIfVotedToday(){let r=new Date().toISOString().split("T")[0];this.authService.userEmail.subscribe(o=>{o&&this.firestore.collection("lunch",s=>s.where("date","==",r).where("voters","array-contains",o)).get().subscribe(s=>{this.voted=!s.empty})})}};t.\u0275fac=function(r){return new(r||t)(k(Ua),k(Bd))},t.\u0275cmp=ot({type:t,selectors:[["app-lunch"]],decls:16,vars:6,consts:[["suggestionsList",""],[1,"lunch"],[1,"headCard"],[1,"displayTable"],[4,"ngIf","ngIfElse"],[1,"vote"],[3,"click","disabled"],[1,"input"],["type","text",3,"ngModelChange","ngModel"],["style","color: red;",4,"ngIf"],[1,"suggestions"],["class","suggestion",4,"ngFor","ngForOf"],[1,"totalVotes"],[1,"suggestion"],[1,"suggestion-info"],["type","checkbox",1,"checkbox",3,"ngModelChange","change","ngModel","disabled","checked"],[1,"spacer"],[1,"percentage-bar"],[1,"percentage-fill"],[2,"color","red"]],template:function(r,o){if(r&1){let s=Nt();y(0,"div",1)(1,"div",2)(2,"h2"),T(3,"Lunch Poll."),_()(),y(4,"div",3),Ct(5,$M,3,0,"div",4),y(6,"div",5),Ct(7,GM,4,2,"ng-template",null,0,Rc),y(9,"button",6),Z("click",function(){return st(s),at(o.triggerVote())}),T(10,"Vote Now"),_()(),y(11,"div",7)(12,"input",8),Ke("ngModelChange",function(c){return st(s),He(o.suggestionText,c)||(o.suggestionText=c),at(c)}),_(),y(13,"button",6),Z("click",function(){return st(s),at(o.createSuggestion())}),T(14,"Submit"),_(),Ct(15,WM,2,1,"p",9),_()()()}if(r&2){let s=Dc(8);M(5),it("ngIf",o.suggestions.length===0)("ngIfElse",s),M(4),it("disabled",!o.selectedSuggestionId||o.voted),M(3),We("ngModel",o.suggestionText),M(),it("disabled",o.isLoading||o.voted),M(2),it("ngIf",o.errorMessage)}},dependencies:[Br,Oe,pn,Fh,oi,jn,uv],styles:['@media (min-width: 768px){.displayTable[_ngcontent-%COMP%]{background-color:#f5f9fa;width:400px;min-height:300px;display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding-top:20px;padding-bottom:20px;border-bottom-left-radius:20px;border-bottom-right-radius:20px;background-image:url("./media/food-MHR4OW2U.svg");background-size:200px;background-position:center;background-repeat:no-repeat}.tableContent[_ngcontent-%COMP%]{background-color:#fff;border:solid 2px #E1E1E1;width:250px;border-radius:30px;padding-left:40px;padding-right:40px;margin:10px}.headCard[_ngcontent-%COMP%]{background-color:#89abb4;color:#fff;border-top-left-radius:20px;border-top-right-radius:20px;display:flex;align-items:center;justify-content:center}.spacer[_ngcontent-%COMP%]{margin-right:10px}.suggestion[_ngcontent-%COMP%]{margin-top:15px;display:flex;align-items:center}.suggestion-info[_ngcontent-%COMP%]{display:flex;align-items:center}.percentage-bar[_ngcontent-%COMP%]{width:100px;height:10px;background-color:#ddd;border-radius:5px;margin-top:5px;margin-left:10px}.percentage-fill[_ngcontent-%COMP%]{height:100%;background-color:#4caf50;border-radius:5px}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px;border-radius:20px;border:solid 2px #E1E1E1}button[_ngcontent-%COMP%]{margin-top:20px;height:25px;width:75px;border-radius:20px;background-color:#fff;border:solid 2px rgb(99,99,99);transition:border-color .3s ease;font-size:medium}button[_ngcontent-%COMP%]:hover{border-color:#e1e1e1}}@media (max-width: 767px){.displayTable[_ngcontent-%COMP%]{background-color:#f5f9fa;width:400px;min-height:300px;display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding-top:20px;padding-bottom:20px;border-bottom-left-radius:20px;border-bottom-right-radius:20px;background-image:url("./media/food-MHR4OW2U.svg");background-size:200px;background-position:center;background-repeat:no-repeat}.lunch[_ngcontent-%COMP%]{margin-top:30px}.tableContent[_ngcontent-%COMP%]{background-color:#fff;border:solid 2px #E1E1E1;width:250px;border-radius:30px;padding-left:40px;padding-right:40px;margin:10px}.headCard[_ngcontent-%COMP%]{background-color:#89abb4;color:#fff;border-top-left-radius:20px;border-top-right-radius:20px;display:flex;align-items:center;justify-content:center}.spacer[_ngcontent-%COMP%]{margin-right:10px}.suggestion[_ngcontent-%COMP%]{margin-top:15px;display:flex;align-items:center}.suggestion-info[_ngcontent-%COMP%]{display:flex;align-items:center}.percentage-bar[_ngcontent-%COMP%]{width:100px;height:10px;background-color:#ddd;border-radius:5px;margin-top:5px;margin-left:10px}.percentage-fill[_ngcontent-%COMP%]{height:100%;background-color:#4caf50;border-radius:5px}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px;border-radius:20px;border:solid 2px #E1E1E1}button[_ngcontent-%COMP%]{margin-top:20px;height:25px;width:75px;border-radius:20px;background-color:#fff;border:solid 2px rgb(99,99,99);transition:border-color .3s ease;font-size:medium}button[_ngcontent-%COMP%]:hover{border-color:#e1e1e1}}']});let e=t;return e})();var mC=(()=>{let t=class t{constructor(i){this.renderer=i}ngOnInit(){this.renderer.setStyle(document.body,"background","url(../../../assets/images/together.svg) no-repeat center center fixed"),this.renderer.setStyle(document.body,"background-size","cover")}};t.\u0275fac=function(r){return new(r||t)(k(dn))},t.\u0275cmp=ot({type:t,selectors:[["app-display-page"]],decls:4,vars:0,consts:[[1,"display"]],template:function(r,o){r&1&&(y(0,"div",0),K(1,"app-chedual-creator")(2,"app-lunch")(3,"app-fetch-events"),_())},dependencies:[uC,dC,fC],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.display[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out forwards}.display[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(1){animation-delay:.2s}.display[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(2){animation-delay:.4s}.display[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:nth-child(3){animation-delay:.6s}@media (min-width: 768px){.display[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-left:100px;margin-right:100px;margin-top:100px;padding-bottom:100px}}@media (max-width: 767px){.display[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;margin-top:50px}}"]});let e=t;return e})();var n_=(()=>{let t=class t{constructor(i,r){this.auth=i,this.router=r}canActivate(){return this.auth.authState.pipe(U(i=>i?!0:(this.router.navigate(["/"]),!1)))}};t.\u0275fac=function(r){return new(r||t)(g(Un),g(ke))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var KM=[{path:"",component:qx},{path:"login",component:Gx},{path:"form",component:lC,canActivate:[n_]},{path:"display",component:mC,canActivate:[n_]}],pC=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=W({imports:[Yb.forRoot(KM),Yb]});let e=t;return e})();var gC=(()=>{let t=class t{constructor(){this.currentWeek=0}ngOnInit(){this.currentWeek=this.getWeekNumber(new Date)}getWeekNumber(i){let r=new Date(i.getFullYear(),0,1);return Math.ceil(((i.getTime()-r.getTime())/864e5+r.getDay()+1)/7)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ot({type:t,selectors:[["app-week-display"]],decls:5,vars:1,consts:[[1,"week-number-square"],[1,"weekNo"]],template:function(r,o){r&1&&(y(0,"div",0)(1,"p"),T(2,"This week is the :"),_(),y(3,"div",1),T(4),_()()),r&2&&(M(4),Ge(" ",o.currentWeek,"th"))},styles:["@media (min-width: 768px){.week-number-square[_ngcontent-%COMP%]{width:242.16px;height:10x;background-color:#fff;display:flex;justify-content:center;align-items:center;font-size:20px;margin-top:60px;color:#388b3f;border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-left:solid 3px gray;border-right:solid 3px gray;border-bottom:solid 3px gray}.weekNo[_ngcontent-%COMP%]{font-size:large;font-weight:900;border-bottom:solid 1px}}@media (max-width: 767px){.week-number-square[_ngcontent-%COMP%]{width:140px;height:40px;background-color:#fff;display:flex;justify-content:center;align-items:center;font-size:18px;margin-top:50px;color:#388b3f;border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-left:solid 3px gray;border-right:solid 3px gray;border-bottom:solid 3px gray}.week-number-square[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:small}.weekNo[_ngcontent-%COMP%]{font-size:medium;font-weight:900;border-bottom:solid 1px}}"]});let e=t;return e})();function YM(e,t){if(e&1){let n=Nt();y(0,"button",4),Z("click",function(){st(n);let r=et();return at(r.navigateToForm())}),T(1,"Create Agendas"),_()}}function XM(e,t){if(e&1){let n=Nt();y(0,"button",4),Z("click",function(){st(n);let r=et();return at(r.navigateToDisplay())}),T(1,"Agendas"),_()}}var bC=(()=>{let t=class t{constructor(i,r){this.authService=i,this.router=r,this.isLoggedIn=!1}ngOnInit(){this.authService.isLoggedIn.subscribe(i=>{this.isLoggedIn=i})}navigateToForm(){this.router.navigate(["/form"])}navigateToDisplay(){this.router.navigate(["/display"])}navigateToLoginOrLogout(){this.isLoggedIn?this.authService.logout().then(()=>{this.router.navigate([""])}):this.router.navigate(["/login"])}};t.\u0275fac=function(r){return new(r||t)(k(Bd),k(ke))},t.\u0275cmp=ot({type:t,selectors:[["app-header"]],decls:13,vars:3,consts:[[1,"header"],[1,"buttons"],[1,"filler"],["src","../../assets/images/CC.jpg","alt","cc"],[3,"click"],[3,"click",4,"ngIf"],[1,"weekDisplay"]],template:function(r,o){r&1&&(y(0,"div",0)(1,"div",1),K(2,"div",2)(3,"div",2)(4,"div",2),_(),K(5,"img",3),y(6,"div",1)(7,"button",4),Z("click",function(){return o.navigateToLoginOrLogout()}),T(8),_(),Ct(9,YM,2,0,"button",5)(10,XM,2,0,"button",5),_()(),y(11,"div",6),K(12,"app-week-display"),_()),r&2&&(M(8),Ce(o.isLoggedIn?"Logout":"Login"),M(),it("ngIf",o.isLoggedIn),M(),it("ngIf",o.isLoggedIn))},dependencies:[Oe,gC],styles:["@media (min-width: 768px){.header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;background-image:linear-gradient(135deg,#81fbb8 10%,#518e55);height:70px;display:flex;flex-direction:row;justify-content:space-between;z-index:1}img[_ngcontent-%COMP%]{height:70px;border-left:solid 3px gray;border-right:solid 3px gray}.buttons[_ngcontent-%COMP%]{width:350px;display:flex;flex-direction:row-reverse;align-items:center;justify-content:space-around;margin-left:100px;margin-right:175px}button[_ngcontent-%COMP%]{padding-top:2px;background:none;border:none;font-size:large;color:#fff;border-bottom:transparent solid 3px;transition:border-color 1s ease-out}button[_ngcontent-%COMP%]:hover{transition:.3s ease-in;border-color:#fff;color:#f5f5f5}.weekDisplay[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}}@media (max-width: 767px){.header[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;background-image:linear-gradient(135deg,#81fbb8 10%,#518e55);height:50px;display:flex;flex-direction:row;justify-items:flex-start;align-items:center}img[_ngcontent-%COMP%]{height:50px;width:140px;border-left:solid 3px gray;border-right:solid 3px gray}button[_ngcontent-%COMP%]{padding-top:2px;margin-left:1px;margin-right:1px;background:none;border:none;font-size:small;color:#fff;border-bottom:transparent solid 3px;transition:border-color 1s ease-out}.weekDisplay[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:start;align-items:center}}"]});let e=t;return e})();var _C=(()=>{let t=class t{constructor(){this.title="cc"}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=ot({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(r,o){r&1&&K(0,"app-header")(1,"router-outlet")},dependencies:[$b,bC]});let e=t;return e})();var JM="@",tO=(()=>{let t=class t{constructor(i,r,o,s,a){this.doc=i,this.delegate=r,this.zone=o,this.animationType=s,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=S(j_,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-5ZWTXLXG.js")).catch(r=>{throw new vt(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(i,r){let o=this.delegate.createRenderer(i,r);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let s=new i_(o);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(i,r);s.use(c)}).catch(a=>{s.use(o)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(r){Fr()},t.\u0275prov=N({token:t,factory:t.\u0275fac});let e=t;return e})(),i_=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let n of this.replay)n(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,n){this.delegate.appendChild(t,n)}insertBefore(t,n,i,r){this.delegate.insertBefore(t,n,i,r)}removeChild(t,n,i){this.delegate.removeChild(t,n,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,r){this.delegate.setAttribute(t,n,i,r)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,r){this.delegate.setStyle(t,n,i,r)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){this.shouldReplay(n)&&this.replay.push(r=>r.setProperty(t,n,i)),this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.shouldReplay(n)&&this.replay.push(r=>r.listen(t,n,i)),this.delegate.listen(t,n,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(JM)}};function vC(e="animations"){return Ac("NgAsyncAnimations"),Nr([{provide:Tc,useFactory:(t,n,i)=>new tO(t,n,i,e),deps:[J,Wc,z]},{provide:On,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var o_;try{o_=typeof Intl<"u"&&Intl.v8BreakIterator}catch{o_=!1}var Mt=(()=>{let t=class t{constructor(i){this._platformId=i,this.isBrowser=this._platformId?fv(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||o_)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(g(ie))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var hc;function eO(){if(hc==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>hc=!0}))}finally{hc=hc||!1}return hc}function Jo(e){return eO()?e:!!e.capture}var Tr;function yC(){if(Tr==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Tr=!1,Tr;if("scrollBehavior"in document.documentElement.style)Tr=!0;else{let e=Element.prototype.scrollTo;e?Tr=!/\{\s*\[native code\]\s*\}/.test(e.toString()):Tr=!1}}return Tr}var r_;function nO(){if(r_==null){let e=typeof document<"u"?document.head:null;r_=!!(e&&(e.createShadowRoot||e.attachShadow))}return r_}function wC(e){if(nO()){let t=e.getRootNode?e.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function an(e){return e.composedPath?e.composedPath()[0]:e.target}function fc(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ts(e){return Array.isArray(e)?e:[e]}function jt(e){return e==null?"":typeof e=="string"?e:`${e}px`}function ti(e){return e instanceof At?e.nativeElement:e}var EC=new Set,Sr,iO=(()=>{let t=class t{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):oO}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&rO(i,this._nonce),this._matchMedia(i)}};t.\u0275fac=function(r){return new(r||t)(g(Mt),g(ds,8))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function rO(e,t){if(!EC.has(e))try{Sr||(Sr=document.createElement("style"),t&&Sr.setAttribute("nonce",t),Sr.setAttribute("type","text/css"),document.head.appendChild(Sr)),Sr.sheet&&(Sr.sheet.insertRule(`@media ${e} {body{ }}`,0),EC.add(e))}catch(n){console.error(n)}}function oO(e){return{matches:e==="all"||e==="",media:e,addListener:()=>{},removeListener:()=>{}}}var Ud=(()=>{let t=class t{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new ht}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return IC(ts(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=IC(ts(i)).map(a=>this._registerQuery(a).observable),s=kr(o);return s=yc(s.pipe($e(1)),s.pipe(Ic(1),nh(0))),s.pipe(U(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),s={observable:new fe(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(un(r),U(({matches:a})=>({query:i,matches:a})),qe(this._destroySubject)),mql:r};return this._queries.set(i,s),s}};t.\u0275fac=function(r){return new(r||t)(g(iO),g(z))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function IC(e){return e.map(t=>t.split(",")).reduce((t,n)=>t.concat(n)).map(t=>t.trim())}var xC={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function a_(e){return e.buttons===0||e.detail===0}function c_(e){let t=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var aO=new F("cdk-input-modality-detector-options"),cO={ignoreKeys:[18,17,224,91,16]},AC=650,es=Jo({passive:!0,capture:!0}),lO=(()=>{let t=class t{get mostRecentModality(){return this._modality.value}constructor(i,r,o,s){this._platform=i,this._mostRecentTarget=null,this._modality=new we(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=an(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<AC||(this._modality.next(a_(a)?"keyboard":"mouse"),this._mostRecentTarget=an(a))},this._onTouchstart=a=>{if(c_(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=an(a)},this._options=C(C({},cO),s),this.modalityDetected=this._modality.pipe(Ic(1)),this.modalityChanged=this.modalityDetected.pipe(Mr()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,es),o.addEventListener("mousedown",this._onMousedown,es),o.addEventListener("touchstart",this._onTouchstart,es)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,es),document.removeEventListener("mousedown",this._onMousedown,es),document.removeEventListener("touchstart",this._onTouchstart,es))}};t.\u0275fac=function(r){return new(r||t)(g(Mt),g(z),g(J),g(aO,8))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),uO=new F("liveAnnouncerElement",{providedIn:"root",factory:dO});function dO(){return null}var hO=new F("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),fO=0,SC=(()=>{let t=class t{constructor(i,r,o,s){this._ngZone=r,this._defaultOptions=s,this._document=o,this._liveElement=i||this._createLiveElement()}announce(i,...r){let o=this._defaultOptions,s,a;return r.length===1&&typeof r[0]=="number"?a=r[0]:[s,a]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=o&&o.politeness?o.politeness:"polite"),a==null&&o&&(a=o.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(c=>this._currentResolve=c)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof a=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",r=this._document.getElementsByClassName(i),o=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return o.classList.add(i),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),o.id=`cdk-live-announcer-${fO++}`,this._document.body.appendChild(o),o}_exposeAnnouncerToModals(i){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let s=r[o],a=s.getAttribute("aria-owns");a?a.indexOf(i)===-1&&s.setAttribute("aria-owns",a+" "+i):s.setAttribute("aria-owns",i)}}};t.\u0275fac=function(r){return new(r||t)(g(uO,8),g(z),g(J),g(hO,8))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var $d=function(e){return e[e.IMMEDIATE=0]="IMMEDIATE",e[e.EVENTUAL=1]="EVENTUAL",e}($d||{}),mO=new F("cdk-focus-monitor-default-options"),zd=Jo({passive:!0,capture:!0}),DC=(()=>{let t=class t{constructor(i,r,o,s,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ht,this._rootNodeFocusAndBlurListener=c=>{let l=an(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=s,this._detectionMode=a?.detectionMode||$d.IMMEDIATE}monitor(i,r=!1){let o=ti(i);if(!this._platform.isBrowser||o.nodeType!==1)return L();let s=wC(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new ht,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=ti(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let s=ti(i),a=this._getDocument().activeElement;s===a?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===$d.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===$d.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?AC:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),s=an(i);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,zd),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,zd)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(qe(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,zd),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,zd),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,s)=>{(s===i||o.checkChildren&&s.contains(i))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let s=i.labels;if(s){for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0}return!1}};t.\u0275fac=function(r){return new(r||t)(g(z),g(Mt),g(lO),g(J,8),g(mO,8))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Dr=function(e){return e[e.NONE=0]="NONE",e[e.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",e[e.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",e}(Dr||{}),CC="cdk-high-contrast-black-on-white",TC="cdk-high-contrast-white-on-black",s_="cdk-high-contrast-active",RC=(()=>{let t=class t{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=S(Ud).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Dr.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Dr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Dr.BLACK_ON_WHITE}return Dr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(s_,CC,TC),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Dr.BLACK_ON_WHITE?i.add(s_,CC):r===Dr.WHITE_ON_BLACK&&i.add(s_,TC)}}};t.\u0275fac=function(r){return new(r||t)(g(Mt),g(J))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var pO=new F("cdk-dir-doc",{providedIn:"root",factory:gO});function gO(){return S(J)}var bO=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function _O(e){let t=e?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?bO.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var PC=(()=>{let t=class t{constructor(i){if(this.value="ltr",this.change=new ne,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=_O(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};t.\u0275fac=function(r){return new(r||t)(g(pO,8))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var ki=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=W({});let e=t;return e})();function wO(){return!0}var EO=new F("mat-sanity-checks",{providedIn:"root",factory:wO}),Pi=(()=>{let t=class t{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return fc()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};t.\u0275fac=function(r){return new(r||t)(g(RC),g(EO,8),g(J))},t.\u0275mod=H({type:t}),t.\u0275inj=W({imports:[ki,ki]});let e=t;return e})();var ze=function(e){return e[e.FADING_IN=0]="FADING_IN",e[e.VISIBLE=1]="VISIBLE",e[e.FADING_OUT=2]="FADING_OUT",e[e.HIDDEN=3]="HIDDEN",e}(ze||{}),d_=class{constructor(t,n,i,r=!1){this._renderer=t,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=ze.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},MC=Jo({passive:!0,capture:!0}),h_=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let n=an(t);n&&this._events.get(t.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(t))})}}addHandler(t,n,i,r){let o=this._events.get(n);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,MC)})}removeHandler(t,n,i){let r=this._events.get(t);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,MC)))}},OC={enterDuration:225,exitDuration:150},IO=800,NC=Jo({passive:!0,capture:!0}),FC=["mousedown","touchstart"],VC=["mouseup","mouseleave","touchend","touchcancel"],mc=class mc{constructor(t,n,i,r){this._target=t,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ti(i))}fadeInRipple(t,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=C(C({},OC),i.animation);i.centered&&(t=r.left+r.width/2,n=r.top+r.height/2);let s=i.radius||xO(t,n,r),a=t-r.left,c=n-r.top,l=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${c-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,E=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,v=new d_(this,u,i,E);u.style.transform="scale3d(1, 1, 1)",v.state=ze.FADING_IN,i.persistent||(this._mostRecentTransientRipple=v);let x=null;return!E&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let V=()=>this._finishRippleTransition(v),$=()=>this._destroyRipple(v);u.addEventListener("transitionend",V),u.addEventListener("transitioncancel",$),x={onTransitionEnd:V,onTransitionCancel:$}}),this._activeRipples.set(v,x),(E||!l)&&this._finishRippleTransition(v),v}fadeOutRipple(t){if(t.state===ze.FADING_OUT||t.state===ze.HIDDEN)return;let n=t.element,i=C(C({},OC),t.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",t.state=ze.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let n=ti(t);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,FC.forEach(i=>{mc._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{VC.forEach(n=>{this._triggerElement.addEventListener(n,this,NC)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===ze.FADING_IN?this._startFadeOutTransition(t):t.state===ze.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let n=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=ze.VISIBLE,!i&&(!n||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let n=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=ze.HIDDEN,n!==null&&(t.element.removeEventListener("transitionend",n.onTransitionEnd),t.element.removeEventListener("transitioncancel",n.onTransitionCancel)),t.element.remove()}_onMousedown(t){let n=a_(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+IO;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!c_(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=t.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let n=t.state===ze.VISIBLE||t.config.terminateOnPointerUp&&t.state===ze.FADING_IN;!t.config.persistent&&n&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(FC.forEach(n=>mc._eventManager.removeHandler(n,t,this)),this._pointerUpEventsRegistered&&VC.forEach(n=>t.removeEventListener(n,this,NC)))}};mc._eventManager=new h_;var f_=mc;function xO(e,t,n){let i=Math.max(Math.abs(e-n.left),Math.abs(e-n.right)),r=Math.max(Math.abs(t-n.top),Math.abs(t-n.bottom));return Math.sqrt(i*i+r*r)}var UC=new F("mat-ripple-global-options"),CO=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,s,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new f_(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:C(C(C({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,C(C({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,C(C({},this.rippleConfig),i))}};t.\u0275fac=function(r){return new(r||t)(k(At),k(z),k(Mt),k(UC,8),k(On,8))},t.\u0275dir=ft({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&Me("mat-ripple-unbounded",o.unbounded)},inputs:{color:[xt.None,"matRippleColor","color"],unbounded:[xt.None,"matRippleUnbounded","unbounded"],centered:[xt.None,"matRippleCentered","centered"],radius:[xt.None,"matRippleRadius","radius"],animation:[xt.None,"matRippleAnimation","animation"],disabled:[xt.None,"matRippleDisabled","disabled"],trigger:[xt.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let e=t;return e})(),zC=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=W({imports:[Pi,Pi]});let e=t;return e})();var LC={capture:!0},jC=["focus","click","mouseenter","touchstart"],l_="mat-ripple-loader-uninitialized",u_="mat-ripple-loader-class-name",BC="mat-ripple-loader-centered",qd="mat-ripple-loader-disabled",$C=(()=>{let t=class t{constructor(){this._document=S(J,{optional:!0}),this._animationMode=S(On,{optional:!0}),this._globalRippleOptions=S(UC,{optional:!0}),this._platform=S(Mt),this._ngZone=S(z),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let o=i.target.closest(`[${l_}]`);o&&this._createRipple(o)},this._ngZone.runOutsideAngular(()=>{for(let i of jC)this._document?.addEventListener(i,this._onInteraction,LC)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of jC)this._document?.removeEventListener(r,this._onInteraction,LC)}configureRipple(i,r){i.setAttribute(l_,""),(r.className||!i.hasAttribute(u_))&&i.setAttribute(u_,r.className||""),r.centered&&i.setAttribute(BC,""),r.disabled&&i.setAttribute(qd,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let o=this._hosts.get(i);if(o){o.disabled=r;return}r?i.setAttribute(qd,""):i.removeAttribute(qd)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",i.getAttribute(u_)),i.append(o);let s=new CO(new At(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=i,s.centered=i.hasAttribute(BC),s.disabled=i.hasAttribute(qd),this.attachRipple(i,s),s}attachRipple(i,r){i.removeAttribute(l_),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var TO=["mat-button",""],AO=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],SO=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var DO=new F("MAT_BUTTON_CONFIG");var RO=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],kO=(()=>{let t=class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,o,s){this._elementRef=i,this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=S(DC),this._rippleLoader=S($C),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let a=S(DO,{optional:!0}),c=i.nativeElement,l=c.classList;this.disabledInteractive=a?.disabledInteractive??!1,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:u,mdcClasses:d}of RO)c.hasAttribute(u)&&l.add(...d)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};t.\u0275fac=function(r){Fr()},t.\u0275dir=ft({type:t,inputs:{color:"color",disableRipple:[xt.HasDecoratorInputTransform,"disableRipple","disableRipple",Ye],disabled:[xt.HasDecoratorInputTransform,"disabled","disabled",Ye],ariaDisabled:[xt.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",Ye],disabledInteractive:[xt.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",Ye]},features:[ji]});let e=t;return e})();var qC=(()=>{let t=class t extends kO{constructor(i,r,o,s){super(i,r,o,s)}};t.\u0275fac=function(r){return new(r||t)(k(At),k(Mt),k(z),k(On,8))},t.\u0275cmp=ot({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(ri("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),z_(o.color?"mat-"+o.color:""),Me("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[re,Fn],attrs:TO,ngContentSelectors:SO,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(Sc(AO),K(0,"span",0),Lr(1),y(2,"span",1),Lr(3,1),_(),Lr(4,2),K(5,"span",2)(6,"span",3)),r&2&&Me("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let e=t;return e})();var GC=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=W({imports:[Pi,zC,Pi]});let e=t;return e})();var pc=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},ns=class extends pc{constructor(t,n,i,r,o){super(),this.component=t,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},is=class extends pc{constructor(t,n,i,r){super(),this.templateRef=t,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,n=this.context){return this.context=n,super.attach(t)}detach(){return this.context=void 0,super.detach()}},m_=class extends pc{constructor(t){super(),this.element=t instanceof At?t.nativeElement:t}},rs=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof ns)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof is)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof m_)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Gd=class extends rs{constructor(t,n,i,r,o){super(),this.outletElement=t,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(t){let i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||Kt.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let n=t.viewContainerRef,i=n.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var p_=(()=>{let t=class t extends rs{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new ne,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,s=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(s,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};t.\u0275fac=function(r){return new(r||t)(k(Cc),k(Vr),k(J))},t.\u0275dir=ft({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[xt.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[re]});let e=t;return e})();var Wd=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=W({});let e=t;return e})();var PO=20,HC=(()=>{let t=class t{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new ht,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=PO){return this._platform.isBrowser?new fe(r=>{this._globalSubscription||this._addGlobalListener();let o=i>0?this._scrolled.pipe(eh(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):L()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(Ht(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,i)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=ti(r),s=i.getElementRef().nativeElement;do if(o==s)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return k_(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};t.\u0275fac=function(r){return new(r||t)(g(z),g(Mt),g(J,8))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var MO=20,g_=(()=>{let t=class t{constructor(i,r,o){this._platform=i,this._change=new ht,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,s=o.getBoundingClientRect(),a=-s.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,c=-s.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:a,left:c}}change(i=MO){return i>0?this._change.pipe(eh(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};t.\u0275fac=function(r){return new(r||t)(g(Mt),g(z),g(J,8))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var WC=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=W({});let e=t;return e})(),b_=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=W({imports:[ki,WC,ki,WC]});let e=t;return e})();var KC=yC(),__=class{constructor(t,n){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=jt(-this._previousScrollPosition.left),t.style.top=jt(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,n=this._document.body,i=t.style,r=n.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),KC&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),KC&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var v_=class{constructor(t,n,i,r){this._scrollDispatcher=t,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Ht(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Hd=class{enable(){}disable(){}attach(){}};function y_(e,t){return t.some(n=>{let i=e.bottom<n.top,r=e.top>n.bottom,o=e.right<n.left,s=e.left>n.right;return i||r||o||s})}function QC(e,t){return t.some(n=>{let i=e.top<n.top,r=e.bottom>n.bottom,o=e.left<n.left,s=e.right>n.right;return i||r||o||s})}var w_=class{constructor(t,n,i,r){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();y_(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},NO=(()=>{let t=class t{constructor(i,r,o,s){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new Hd,this.close=a=>new v_(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new __(this._viewportRuler,this._document),this.reposition=a=>new w_(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}};t.\u0275fac=function(r){return new(r||t)(g(HC),g(g_),g(z),g(J))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),gc=class{constructor(t){if(this.scrollStrategy=new Hd,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let n=Object.keys(t);for(let i of n)t[i]!==void 0&&(this[i]=t[i])}}};var E_=class{constructor(t,n){this.connectionPair=t,this.scrollableViewProperties=n}};var tT=(()=>{let t=class t{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};t.\u0275fac=function(r){return new(r||t)(g(J))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),FO=(()=>{let t=class t extends tT{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{let s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){let c=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(o)):c.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};t.\u0275fac=function(r){return new(r||t)(g(J),g(z,8))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),VO=(()=>{let t=class t extends tT{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=an(s)},this._clickListener=s=>{let a=an(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let d=l[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(a)||d.overlayElement.contains(c))break;let h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};t.\u0275fac=function(r){return new(r||t)(g(J),g(Mt),g(z,8))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),eT=(()=>{let t=class t{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||fc()){let o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}let r=this._document.createElement("div");r.classList.add(i),fc()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};t.\u0275fac=function(r){return new(r||t)(g(J),g(Mt))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),I_=class{constructor(t,n,i,r,o,s,a,c,l,u=!1){this._portalOutlet=t,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new ht,this._attachments=new ht,this._detachments=new ht,this._locationChanges=Mi.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new ht,this._outsidePointerEvents=new ht,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe($e(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=C(C({},this._config),t),this._updateElementSize()}setDirection(t){this._config=bt(C({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=jt(this._config.width),t.height=jt(this._config.height),t.minWidth=jt(this._config.minWidth),t.minHeight=jt(this._config.minHeight),t.maxWidth=jt(this._config.maxWidth),t.maxHeight=jt(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,n,i){let r=ts(n||[]).filter(o=>!!o);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let t=this._ngZone.onStable.pipe(qe(wc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},YC="cdk-overlay-connected-position-bounding-box",LO=/([A-Za-z%]+)$/,x_=class{get positions(){return this._preferredPositions}constructor(t,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ht,this._resizeSubscription=Mi.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(YC),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,r,a),l=this._getOverlayPoint(c,n,a),u=this._getOverlayFit(l,n,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,i)){o.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(o.length){let a=null,c=-1;for(let l of o){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Rr(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(YC),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,n)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,n,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r=i.originX=="start"?s:a}n.left<0&&(r-=n.left);let o;return i.originY=="center"?o=t.top+t.height/2:o=i.originY=="top"?t.top:t.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(t,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let o;return i.overlayY=="center"?o=-n.height/2:o=i.overlayY=="top"?0:-n.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,n,i,r){let o=ZC(n),{x:s,y:a}=t,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let u=0-s,d=s+o.width-i.width,h=0-a,f=a+o.height-i.height,E=this._subtractOverflows(o.width,u,d),v=this._subtractOverflows(o.height,h,f),x=E*v;return{visibleArea:x,isCompletelyWithinViewport:o.width*o.height===x,fitsInViewportVertically:v===o.height,fitsInViewportHorizontally:E==o.width}}_canFitWithFlexibleDimensions(t,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,o=i.right-n.x,s=XC(this._overlayRef.getConfig().minHeight),a=XC(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||s!=null&&s<=r,l=t.fitsInViewportHorizontally||a!=null&&a<=o;return c&&l}return!1}_pushOverlayOnScreen(t,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=ZC(n),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),a=Math.max(t.y+r.height-o.height,0),c=Math.max(o.top-i.top-t.y,0),l=Math.max(o.left-i.left-t.x,0),u=0,d=0;return r.width<=o.width?u=l||-s:u=t.x<this._viewportMargin?o.left-i.left-t.x:0,r.height<=o.height?d=c||-a:d=t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:u,y:d},{x:t.x+u,y:t.y+d}}_applyPosition(t,n){if(this._setTransformOrigin(t),this._setOverlayElementStyles(n,t),this._setBoundingBoxStyles(n,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!jO(this._lastScrollVisibility,i)){let r=new E_(t,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,n){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(n.overlayY==="top")s=t.y,o=i.height-s+this._viewportMargin;else if(n.overlayY==="bottom")a=i.height-t.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-t.y+i.top,t.y),E=this._lastBoundingBoxSize.height;o=f*2,s=t.y-f,o>E&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-E/2)}let c=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,l=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,u,d,h;if(l)h=i.width-t.x+this._viewportMargin*2,u=t.x-this._viewportMargin;else if(c)d=t.x,u=i.right-t.x;else{let f=Math.min(i.right-t.x+i.left,t.x),E=this._lastBoundingBoxSize.width;u=f*2,d=t.x-f,u>E&&!this._isInitialRender&&!this._growAfterOpen&&(d=t.x-E/2)}return{top:s,left:d,bottom:a,right:h,width:u,height:o}}_setBoundingBoxStyles(t,n){let i=this._calculateBoundingBoxRect(t,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=jt(i.height),r.top=jt(i.top),r.bottom=jt(i.bottom),r.width=jt(i.width),r.left=jt(i.left),r.right=jt(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=jt(o)),s&&(r.maxWidth=jt(s))}this._lastBoundingBoxSize=i,Rr(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Rr(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Rr(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,n){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();Rr(i,this._getExactOverlayY(n,t,u)),Rr(i,this._getExactOverlayX(n,t,u))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=jt(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=jt(s.maxWidth):o&&(i.maxWidth="")),Rr(this._pane.style,i)}_getExactOverlayY(t,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=jt(o.y);return r}_getExactOverlayX(t,n,i){let r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=jt(o.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:QC(t,i),isOriginOutsideView:y_(t,i),isOverlayClipped:QC(n,i),isOverlayOutsideView:y_(n,i)}}_subtractOverflows(t,...n){return n.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:t-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,n){return n==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&ts(t).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof At)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let n=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+n,height:i,width:n}}};function Rr(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function XC(e){if(typeof e!="number"&&e!=null){let[t,n]=e.split(LO);return!n||n==="px"?parseFloat(t):null}return e||null}function ZC(e){return{top:Math.floor(e.top),right:Math.floor(e.right),bottom:Math.floor(e.bottom),left:Math.floor(e.left),width:Math.floor(e.width),height:Math.floor(e.height)}}function jO(e,t){return e===t?!0:e.isOriginClipped===t.isOriginClipped&&e.isOriginOutsideView===t.isOriginOutsideView&&e.isOverlayClipped===t.isOverlayClipped&&e.isOverlayOutsideView===t.isOverlayOutsideView}var JC="cdk-global-overlay-wrapper",C_=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let n=t.getConfig();this._overlayRef=t,this._width&&!n.width&&t.updateSize({width:this._width}),this._height&&!n.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(JC),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),l=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",E="",v="";c?v="flex-start":u==="center"?(v="center",h?E=d:f=d):h?u==="left"||u==="end"?(v="flex-end",f=d):(u==="right"||u==="start")&&(v="flex-start",E=d):u==="left"||u==="start"?(v="flex-start",f=d):(u==="right"||u==="end")&&(v="flex-end",E=d),t.position=this._cssPosition,t.marginLeft=c?"0":f,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":E,n.justifyContent=v,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(JC),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},BO=(()=>{let t=class t{constructor(i,r,o,s){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new C_}flexibleConnectedTo(i){return new x_(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};t.\u0275fac=function(r){return new(r||t)(g(g_),g(J),g(Mt),g(eT))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),UO=0,bc=(()=>{let t=class t{constructor(i,r,o,s,a,c,l,u,d,h,f,E){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=u,this._directionality=d,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=E}create(i){let r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),a=new gc(i);return a.direction=a.direction||this._directionality.value,new I_(s,r,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${UO++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Bi)),new Gd(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};t.\u0275fac=function(r){return new(r||t)(g(NO),g(eT),g(Cc),g(BO),g(FO),g(Kt),g(z),g(J),g(PC),g(zi),g(VO),g(On,8))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var zO=new F("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let e=S(bc);return()=>e.scrollStrategies.reposition()}});function $O(e){return()=>e.scrollStrategies.reposition()}var qO={provide:zO,deps:[bc],useFactory:$O},nT=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=W({providers:[bc,qO],imports:[ki,Wd,b_,b_]});let e=t;return e})();function WO(e,t){if(e&1){let n=Nt();y(0,"div",1)(1,"button",2),Z("click",function(){st(n);let r=et();return at(r.action())}),T(2),_()()}if(e&2){let n=et();M(2),Ge(" ",n.data.action," ")}}var HO=["label"];function KO(e,t){}var QO=Math.pow(2,31)-1,_c=class{constructor(t,n){this._overlayRef=n,this._afterDismissed=new ht,this._afterOpened=new ht,this._onAction=new ht,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,QO))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},iT=new F("MatSnackBarData"),os=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},YO=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ft({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let e=t;return e})(),XO=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ft({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let e=t;return e})(),ZO=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=ft({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let e=t;return e})(),rT=(()=>{let t=class t{constructor(i,r){this.snackBarRef=i,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};t.\u0275fac=function(r){return new(r||t)(k(_c),k(iT))},t.\u0275cmp=ot({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[Fn],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,o){r&1&&(y(0,"div",0),T(1),_(),Ct(2,WO,3,1,"div",1)),r&2&&(M(),Ge(" ",o.data.message,`
`),M(),dh(2,o.hasAction?2:-1))},dependencies:[qC,YO,XO,ZO],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let e=t;return e})(),JO={snackBarState:Iv("state",[Ih("void, hidden",Uc({transform:"scale(0.8)",opacity:0})),Ih("visible",Uc({transform:"scale(1)",opacity:1})),xh("* => visible",Eh("150ms cubic-bezier(0, 0, 0.2, 1)")),xh("* => void, * => hidden",Eh("75ms cubic-bezier(0.4, 0.0, 1, 1)",Uc({opacity:0})))])},tN=0,eN=(()=>{let t=class t extends rs{constructor(i,r,o,s,a){super(),this._ngZone=i,this._elementRef=r,this._changeDetectorRef=o,this._platform=s,this.snackBarConfig=a,this._document=S(J),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new ht,this._onExit=new ht,this._onEnter=new ht,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${tN++}`,this.attachDomPortal=c=>{this._assertNotAttached();let l=this._portalOutlet.attachDomPortal(c);return this._afterPortalAttached(),l},a.politeness==="assertive"&&!a.announcementMessage?this._live="assertive":a.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(i){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._afterPortalAttached(),r}attachTemplatePortal(i){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._afterPortalAttached(),r}onAnimationEnd(i){let{fromState:r,toState:o}=i;if((o==="void"&&r!=="void"||o==="hidden")&&this._completeExit(),o==="visible"){let s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let i=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(a=>i.classList.add(a)):i.classList.add(r)),this._exposeToModals();let o=this._label.nativeElement,s="mdc-snackbar__label";o.classList.toggle(s,!o.querySelector(`.${s}`))}_exposeToModals(){let i=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let s=r[o],a=s.getAttribute("aria-owns");this._trackedModals.add(s),a?a.indexOf(i)===-1&&s.setAttribute("aria-owns",a+" "+i):s.setAttribute("aria-owns",i)}}_clearFromModals(){this._trackedModals.forEach(i=>{let r=i.getAttribute("aria-owns");if(r){let o=r.replace(this._liveElementId,"").trim();o.length>0?i.setAttribute("aria-owns",o):i.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(i&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(o=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};t.\u0275fac=function(r){return new(r||t)(k(z),k(At),k(Vn),k(Mt),k(os))},t.\u0275cmp=ot({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,o){if(r&1&&(Nn(p_,7),Nn(HO,7)),r&2){let s;hn(s=fn())&&(o._portalOutlet=s.first),hn(s=fn())&&(o._label=s.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,o){r&1&&W_("@state.done",function(a){return o.onAnimationEnd(a)}),r&2&&G_("@state",o._animationState)},standalone:!0,features:[re,Fn],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,o){r&1&&(y(0,"div",1)(1,"div",2,0)(3,"div",3),Ct(4,KO,0,0,"ng-template",4),_(),K(5,"div"),_()()),r&2&&(M(5),ri("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[p_],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[JO.snackBarState]}});let e=t;return e})();function nN(){return new os}var iN=new F("mat-snack-bar-default-options",{providedIn:"root",factory:nN}),rN=(()=>{let t=class t{get _openedSnackBarRef(){let i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}constructor(i,r,o,s,a,c){this._overlay=i,this._live=r,this._injector=o,this._breakpointObserver=s,this._parentSnackBar=a,this._defaultConfig=c,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=rT,this.snackBarContainerComponent=eN,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(i,r){return this._attach(i,r)}openFromTemplate(i,r){return this._attach(i,r)}open(i,r="",o){let s=C(C({},this._defaultConfig),o);return s.data={message:i,action:r},s.announcementMessage===i&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,r){let o=r&&r.viewContainerRef&&r.viewContainerRef.injector,s=Kt.create({parent:o||this._injector,providers:[{provide:os,useValue:r}]}),a=new ns(this.snackBarContainerComponent,r.viewContainerRef,s),c=i.attach(a);return c.instance.snackBarConfig=r,c.instance}_attach(i,r){let o=C(C(C({},new os),this._defaultConfig),r),s=this._createOverlay(o),a=this._attachSnackBarContainer(s,o),c=new _c(a,s);if(i instanceof fs){let l=new is(i,null,{$implicit:o.data,snackBarRef:c});c.instance=a.attachTemplatePortal(l)}else{let l=this._createInjector(o,c),u=new ns(i,void 0,l),d=a.attachComponentPortal(u);c.instance=d.instance}return this._breakpointObserver.observe(xC.HandsetPortrait).pipe(qe(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),o.announcementMessage&&a._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(c,o),this._openedSnackBarRef=c,this._openedSnackBarRef}_animateSnackBar(i,r){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter(),r.duration&&r.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(r.duration))}_createOverlay(i){let r=new gc;r.direction=i.direction;let o=this._overlay.position().global(),s=i.direction==="rtl",a=i.horizontalPosition==="left"||i.horizontalPosition==="start"&&!s||i.horizontalPosition==="end"&&s,c=!a&&i.horizontalPosition!=="center";return a?o.left("0"):c?o.right("0"):o.centerHorizontally(),i.verticalPosition==="top"?o.top("0"):o.bottom("0"),r.positionStrategy=o,this._overlay.create(r)}_createInjector(i,r){let o=i&&i.viewContainerRef&&i.viewContainerRef.injector;return Kt.create({parent:o||this._injector,providers:[{provide:_c,useValue:r},{provide:iT,useValue:i.data}]})}};t.\u0275fac=function(r){return new(r||t)(g(bc),g(SC),g(Kt),g(Ud),g(t,12),g(iN))},t.\u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var oT=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=W({providers:[rN],imports:[nT,Wd,GC,Pi,rT,Pi]});let e=t;return e})();var sT={apiKey:"AIzaSyB9Z6cZoMv6ga-E1TY2EBY4fWbLC809Kx8",authDomain:"colleague-care-961e7.firebaseapp.com",projectId:"colleague-care-961e7",storageBucket:"colleague-care-961e7.appspot.com",messagingSenderId:'"G-MSLYFHL1M7"',appId:"1:146426847182:web:aa565e2303cff0981cd59f",measurementId:"146426847182"},aT=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t,bootstrap:[_C]}),t.\u0275inj=W({providers:[$v(),vC("noop")],imports:[Uv,my,pC,tx,Py.initializeApp(sT),My,oT,gy(()=>by(sT)),Hx(()=>Kx()),tC(()=>iC())]});let e=t;return e})();Bv().bootstrapModule(aT).catch(e=>console.error(e));
